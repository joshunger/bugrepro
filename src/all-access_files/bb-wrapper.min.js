!function(){define("bb/util/module-info",["module"],function(a){"use strict";var b={name:"<%= name %>",version:"<%= version %>"};return b.settings=a.config()||{},b.settings.loginUrl||(b.settings.loginUrl="https://api.bodybuilding.com/login"),"undefined"==typeof b.settings.disableAngularRouting&&(b.settings.disableAngularRouting=!0),b}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){define("@bbcom/bb-analytics",["exports"],function(a){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a){try{window.sessionStorage&&"function"==typeof window.sessionStorage.removeItem&&window.sessionStorage.removetem(a)}catch(a){}}function d(a,b){try{b&&("string"!=typeof b&&(b=JSON.stringify(b)),window.sessionStorage&&"function"==typeof window.sessionStorage.setItem&&window.sessionStorage.setItem(a,b))}catch(a){}}function e(a){var b=void 0;try{if(window.sessionStorage&&"function"==typeof window.sessionStorage.getItem){var c=window.sessionStorage.getItem(a);c&&(b=c.match(/^(\{|\[)/)?JSON.parse(c):c)}}catch(a){}return b}function f(a,b,c,d,e,f){if(++r,f||(f={}),f.eventNumber=r,!f.mark&&"function"==typeof window.performance.mark){var g=a+b+r;window.performance.mark(g),f.mark=window.performance.getEntriesByName(g)[0].startTime}q.push({event:"bbEvent."+a,bbEvent:{event:a,category:b,action:c,label:d,value:e,fields:f}})}function g(a,b,c,d,e){f("validation."+a,"validation",b,c,d,e)}function h(a,b,e,g,h){g=g||{},g.bbUserLoginMethod=e,f("loginStateChanged","user",a?"login":"logout",b||a?"signed in":"signed out",void 0,g),a&&e?d("bbUserLoginMethod",e):a||c("bbUserLoginMethod"),a&&h&&k(h,q)}function i(a,b,c,d,e){var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k={};try{f=new u(b||window.location.href)}catch(a){}g=e?e.constructor.name:"exception",h="error",i=f?f.fileName+":"+c+"("+d+")":"exception",j=a,k.line=c,k.col=d,e&&(k.stack=e.stack),q.push({event:"bbEvent.exception",bbException:{event:g,category:h,action:i,label:j,fields:k}})}function j(a,b,c,d){var e="error-page";if(a>=400&&a<500)switch(a){case 404:e="not found";break;case 401:e="unauthorized";break;case 403:e="forbidden";break;default:e="client error"}else if(a>=500)switch(a){case 503:e="gateway timeout";break;default:e="server error"}f(e,"error",b,c,void 0,d)}function k(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=e("bbUserLoginMethod"),d=void 0;a&&(d={event:"bbEvent.userDataLoaded",userId:a.userId,bbUserKruxId:a.hashedEmail,bbUserLoggedInStatus:!0,bbBodyspaceUserId:a.userId,bbUserJoinDate:new Date(1e3*a.joinDate).toUTCString(),bbUserLastLogin:new Date(1e3*a.lastLogin).toUTCString(),bbUserHomeCountry:a.country,bbUserHomeState:a.state,bbUserHomeCity:a.city,bbUserGoalsBodyFat:a.weightGoal,bbUserGoalsPhysique:a.goalPhysique,bbUserMilitaryBranch:a.militaryBranch,bbForumUserRep:a.forumRep},a.mainGoal&&(d.bbUserGoalsMain=a.mainGoal.code)),c&&(d=d||{},d.bbUserLoginMethod=c),d&&b.push(d)}function l(a,b,c,d){if(!d&&window.performance&&"function"==typeof window.performance.mark){var e=a+"."+b;window.performance.mark(e),d=window.performance.getEntriesByName(e,"mark"),"array"===d.constructor.name.toLowerCase()&&(d=d[d.length-1]),d=d.startTime}d&&q.push({event:"bbEvent.timing",bbTiming:{hitType:"timing",category:a,variable:b,value:d,label:c}})}function m(a,b){return a.name+"["+a.markIndex+"]["+ ++a.counter+"]"+(b?"."+b:"")}function n(a){var b=void 0;return t.mark&&(window.performance.mark(a),b=window.performance.getEntriesByName(a,"mark")),b}function o(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d.bbPageName=a,d.event="pageview",b&&(d.bbPageType=b),c&&(d.bbPageSubType=c),q.push(d)}Object.defineProperty(a,"__esModule",{value:!0}),a.pushEvent=f,a.validationError=g,a.loginStateChanged=h,a.pushException=i,a.fauxErrorPage=j,a.populateProfile=k,a.pushTiming=l,a.pageView=o;var p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=window.dataLayer||[],r=(a.version="1.5.0",0),s=0,t={mark:!(!window.performance||"function"!=typeof window.performance.mark),measure:!(!window.performance||"function"!=typeof window.performance.measure)},u=(a.PerformanceMeasure=function(){function a(c,d){b(this,a),this.category=c,this.name=d,this.markIndex=++s,this.counter=0}return p(a,[{key:"start",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.startMark=n(m(this),a),this.startMark&&"array"===this.startMark.constructor.name.toLowerCase()&&(this.startMark=this.startMark[this.startMark.length-1]),b&&this.startMark&&l(this.category,this.name,a,this.startMark.startTime),this}},{key:"measure",value:function a(b){var a=void 0;if(window.performance&&"function"==typeof window.performance.measure){var c=m(this),d=n(c);if(d&&"array"===d.constructor.name.toLowerCase()&&(d=d[d.length-1]),d&&this.startMark&&t.measure){var e=m(this,b);window.performance.measure(e,this.startMark.name,d.name),a=window.performance.getEntriesByName(e,"measure"),a&&"array"===a.constructor.name.toLowerCase()&&(a=a[a.length-1]),l(this.category,this.name,b,a.duration)}}return a}}]),a}(),a.UrlUtil=function a(c){var d=this;if(b(this,a),void 0===c||null===c)throw new Error('Cannot construct URL from "'+c+'"');var e=void 0;if(c.match(/^https?:\/\/.*/))e=new URL(c);else{var f=window.location,g=void 0;g=c.match(/^\/.*/)?f.protocol+"/":f.protocol+"//"+f.hostname+"/",e=new URL(""+g+c)}for(var h in e)"function"!=typeof h&&(this[h]=e[h]);Object.keys(e).forEach(function(a){d[a]=e[a]}),this.domain=this.hostname.replace(/^(.+\.)*(\w.*)\.\w+$/,"$2"),this.domain||(this.domain=this.hostname),this.fileName=(this.pathname||this.path||"").replace(/.*\/(.+)\/?$/)})})},{}]},{},[1]),define("bb/ui/gdpr/gdpr",["angular"],function(a){"use strict";function b(b,c,d){function e(e){var f={values:{necessary:!0,experience:!0,social:!0}};e.gdpr=f,d.hasCookie&&(f.values=a.extend(f.values,d.values)),f.showMore=function(){f.showSettings=!0},f.acceptAll=function(){f.submitSettings({necessary:!0,experience:!0,social:!0})},f.submitSettings=function(a){d.setCookie(a||f.values),f.savingSettings=!0,c(function(){b.$emit("gdpr.close"),f.savingSettings=!1},888)}}var f={restrict:"EA",templateUrl:"bb/ui/gdpr/gdpr.ng.html",link:e};return f}return["$rootScope","$timeout","gdprService",b]}),define("bb/ui/gdpr/gdpr-modal",[],function(){"use strict";function a(a,b,c){function d(d,e){function f(){h.controller("bbDialog").dialogOpen()}function g(){h.controller("bbDialog").dialogClose()}var h=e.find("bb-dialog");b(function(){c.hasCookie||f()},800),a.$on("gdpr.show",f),a.$on("gdpr.close",g)}var e={restrict:"EA",templateUrl:"bb/ui/gdpr/gdpr-modal.ng.html",link:d};return e}return["$rootScope","$timeout","gdprService",a]}),define("bb/ui/gdpr/views",[],{init:function(a){"use strict";a.put("bb/ui/gdpr/gdpr-modal.ng.html","<bb-dialog tracking-name=gdpr type=lightbox click-to-dismiss><bb-dialog-header></bb-dialog-header><bb-dialog-content><bb-gdpr></bb-gdpr></bb-dialog-content></bb-dialog>"),a.put("bb/ui/gdpr/gdpr.ng.html",'<div class=Gdpr><h3 class=Gdpr-heading>Your Cookie Settings</h3><div class=Gdpr-initialView ng-if=!gdpr.showSettings><p class=Gdpr-p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus praesentium repellat consectetur minus maxime soluta porro dicta modi assumenda, ea atque, repellendus dignissimos iusto sit vero et, suscipit id ipsum?</p><p class=Gdpr-p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus praesentium repellat consectetur minus maxime soluta porro dicta modi assumenda, ea atque, repellendus dignissimos iusto sit vero et, suscipit id ipsum?</p><div class=Gdpr-buttons><button class="bb-flat-btn bb-flat-btn--size-md bb-flat-btn--titlecase bb-spinner-btn Gdpr-btn" ng-click=gdpr.acceptAll()><span bb-visible=!gdpr.savingSettings>Yes, I Accept </span><span bb-visible=gdpr.savingSettings class=bb-spinner-btn__spinner>&hellip;</span></button> <button class="bb-flat-btn bb-flat-btn--size-md bb-flat-btn--transparent bb-flat-btn--titlecase Gdpr-btn Gdpr-btn--transparent" ng-click=gdpr.showMore()>More Information</button></div></div><div class=Gdpr-settingsView ng-if=gdpr.showSettings><form class=gdprForm novalidate ng-submit=gdpr.submitSettings()><ul class=bb-list--plain><li class=Gdpr-li><div class=Gdpr-checkboxCol><input class=Gdpr-inputCheckbox type=checkbox id=_GDPR_necessary ng-model=gdpr.values.necessary disabled readonly></div><div class=Gdpr-labelCol><label class=Gdpr-label for=_GDPR_necessary>Functional</label><p class="Gdpr-p Gdpr-p--inForm">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quo ad in dolorem? Sapiente maxime architecto cum vero ullam commodi quidem non. Magni perspiciatis repellat ipsam aliquid hic vel quasi unde.</p></div></li><li class=Gdpr-li><div class=Gdpr-checkboxCol><input class=Gdpr-inputCheckbox type=checkbox id=_GDPR_experience ng-model=gdpr.values.experience></div><div class=Gdpr-labelCol><label class=Gdpr-label for=_GDPR_experience>Experience</label><p class="Gdpr-p Gdpr-p--inForm">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quo ad in dolorem? Sapiente maxime architecto cum vero ullam commodi quidem non. Magni perspiciatis repellat ipsam aliquid hic vel quasi unde.</p></div></li><li class=Gdpr-li><div class=Gdpr-checkboxCol><input class=Gdpr-inputCheckbox type=checkbox id=_GDPR_social ng-model=gdpr.values.social></div><div class=Gdpr-labelCol><label class=Gdpr-label for=_GDPR_social>Social Media &amp; Advertising</label><p class="Gdpr-p Gdpr-p--inForm">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quo ad in dolorem? Sapiente maxime architecto cum vero ullam commodi quidem non. Magni perspiciatis repellat ipsam aliquid hic vel quasi unde.</p></div></li></ul><div class=Gdpr-buttons><button class="bb-flat-btn bb-flat-btn--size-md bb-flat-btn--titlecase bb-spinner-btn" type=submit><span bb-visible=!gdpr.savingSettings>Done </span><span bb-visible=gdpr.savingSettings class=bb-spinner-btn__spinner>&hellip;</span></button></div></form></div><hr class=Gdpr-hr><p class="Gdpr-p Gdpr-p--footer">You can always... <a class=Gdpr-link--footer href=#>privacy policy</a></p></div>')}}),define("bb/util/browser/get-meta",[],function(){"use strict";function a(a){return a.replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()})}function b(b){var c,d;return c=document.querySelector('meta[name="'+b+'"]'),d=c?c.getAttribute("content"):window[a(b)]}return b}),define("bb/ui/services/gdpr/gdpr-service",["bb/util/browser/get-meta"],function(a){"use strict";function b(b){var c={};return c.init=function(){c.locale=a("bb:detected-locale"),c.countryCode=c.locale?c.locale.split("_")[1]:null,c.languageCode=c.locale?c.locale.split("_")[0]:null,c.gdprCountryCodes=["FR","DE","DK"],c.isCurrentCountryGdpr=c.gdprCountryCodes.indexOf(c.countryCode)!==-1,c.hasCookie=!!b.get("gdpr"),c.values=b.get("gdpr")},c.setCookie=function(a){b.put("gdpr",a),c.values=a,c.hasCookie=!0},c.init(),c}return["$cookieStore",b]}),function(a){define("angular-cookies",["angular"],function(){return function(){!function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&(d.cookies(a,c),delete h[a]);for(a in g)e=g[a],b.isString(e)||(e=""+e,g[a]=e),e!==h[a]&&(d.cookies(a,e),h[a]=e,i=!0);if(i){f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?(delete g[a],delete h[a]):g[a]=h[a]=f[a])}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular)}.apply(a,arguments)})}(this),define("bb/ui/services/gdpr/package",["angular","./gdpr-service","angular-cookies"],function(a,b){"use strict";return a.module("bb.ui.services.gdpr",["ngCookies"]).service("gdprService",b)}),define("bb/ui/module-info",{name:"bb-ui",version:"19.2.1"}),define("bb/ui/ui-module",["angular","bb/ui/module-info"],function(a,b){"use strict";var c=a.module("bb.ui",[]);return c.constant("moduleInfo",b),c}),define("bb/ui/core/views",[],{init:function(a){"use strict";a.put("bb/ui/core/dialog-content.html","<div class=bb-dialog__content ng-transclude></div>"),a.put("bb/ui/core/dialog-footer.html","<footer class=bb-dialog__footer><div class=bb-dialog__footer-actions ng-transclude></div></footer>"),a.put("bb/ui/core/dialog-header.html","<header class=bb-dialog__header><div class=bb-dialog__header-content ng-transclude></div><div class=bb-dialog__header-actions><button class=bb-close ng-click=dialogClose()></button></div></header>"),a.put("bb/ui/core/dialog.html",'<div class="bb-dialog-mask bb-hide" tracking-name={{trackingName}}><div class=bb-dialog ng-if=showDialog ng-transclude></div></div>'),a.put("bb/ui/core/offline-dialog.html","<bb-dialog><bb-dialog-header><h3>Offline!</h3></bb-dialog-header><bb-dialog-content><p>Check your internet connection.</p></bb-dialog-content><bb-dialog-footer><button ng-click=dialogClose()>close</button></bb-dialog-footer></bb-dialog>")}}),define("bb/ui/core/run",["angular","bb/ui/core/views"],function(a,b){"use strict";return function(a){b.init(a)}}),function(a){define("angular-md5",["angular"],function(){return function(){!function(a,b,c){b.module("angular-md5",["gdi2290.md5"]),b.module("ngMd5",["gdi2290.md5"]),b.module("gdi2290.md5",["gdi2290.gravatar-filter","gdi2290.md5-service","gdi2290.md5-filter"]),b.module("gdi2290.gravatar-filter",[]).filter("gravatar",["md5",function(a){var b={};return function(c,d){return b[c]||(d=d?a.createHash(d.toString().toLowerCase()):"",b[c]=c?a.createHash(c.toString().toLowerCase()):d),b[c]}}]),b.module("gdi2290.md5-filter",[]).filter("md5",["md5",function(a){return function(b){return b?a.createHash(b.toString().toLowerCase()):b}}]),b.module("gdi2290.md5-service",[]).factory("md5",[function(){var a={createHash:function(a){var b,c,d,e,f,g,h,i,j,k,l=function(a,b){return a<<b|a>>>32-b},m=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},n=function(a,b,c){return a&b|~a&c},o=function(a,b,c){return a&c|b&~c},p=function(a,b,c){return a^b^c},q=function(a,b,c){return b^(a|~c)},r=function(a,b,c,d,e,f,g){return a=m(a,m(m(n(b,c,d),e),g)),m(l(a,f),b)},s=function(a,b,c,d,e,f,g){return a=m(a,m(m(o(b,c,d),e),g)),m(l(a,f),b)},t=function(a,b,c,d,e,f,g){return a=m(a,m(m(p(b,c,d),e),g)),m(l(a,f),b)},u=function(a,b,c,d,e,f,g){return a=m(a,m(m(q(b,c,d),e),g)),m(l(a,f),b)},v=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;i<c;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},w=function(a){var b,c,d="",e="";for(c=0;c<=3;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(x=v(a),h=1732584193,i=4023233417,j=2562383102,k=271733878,b=x.length,c=0;c<b;c+=16)d=h,e=i,f=j,g=k,h=r(h,i,j,k,x[c+0],y,3614090360),k=r(k,h,i,j,x[c+1],z,3905402710),j=r(j,k,h,i,x[c+2],A,606105819),i=r(i,j,k,h,x[c+3],B,3250441966),h=r(h,i,j,k,x[c+4],y,4118548399),k=r(k,h,i,j,x[c+5],z,1200080426),j=r(j,k,h,i,x[c+6],A,2821735955),i=r(i,j,k,h,x[c+7],B,4249261313),h=r(h,i,j,k,x[c+8],y,1770035416),k=r(k,h,i,j,x[c+9],z,2336552879),j=r(j,k,h,i,x[c+10],A,4294925233),i=r(i,j,k,h,x[c+11],B,2304563134),h=r(h,i,j,k,x[c+12],y,1804603682),k=r(k,h,i,j,x[c+13],z,4254626195),j=r(j,k,h,i,x[c+14],A,2792965006),i=r(i,j,k,h,x[c+15],B,1236535329),h=s(h,i,j,k,x[c+1],C,4129170786),k=s(k,h,i,j,x[c+6],D,3225465664),j=s(j,k,h,i,x[c+11],E,643717713),i=s(i,j,k,h,x[c+0],F,3921069994),h=s(h,i,j,k,x[c+5],C,3593408605),k=s(k,h,i,j,x[c+10],D,38016083),j=s(j,k,h,i,x[c+15],E,3634488961),i=s(i,j,k,h,x[c+4],F,3889429448),h=s(h,i,j,k,x[c+9],C,568446438),k=s(k,h,i,j,x[c+14],D,3275163606),j=s(j,k,h,i,x[c+3],E,4107603335),i=s(i,j,k,h,x[c+8],F,1163531501),h=s(h,i,j,k,x[c+13],C,2850285829),k=s(k,h,i,j,x[c+2],D,4243563512),j=s(j,k,h,i,x[c+7],E,1735328473),i=s(i,j,k,h,x[c+12],F,2368359562),h=t(h,i,j,k,x[c+5],G,4294588738),k=t(k,h,i,j,x[c+8],H,2272392833),j=t(j,k,h,i,x[c+11],I,1839030562),i=t(i,j,k,h,x[c+14],J,4259657740),h=t(h,i,j,k,x[c+1],G,2763975236),k=t(k,h,i,j,x[c+4],H,1272893353),j=t(j,k,h,i,x[c+7],I,4139469664),i=t(i,j,k,h,x[c+10],J,3200236656),h=t(h,i,j,k,x[c+13],G,681279174),k=t(k,h,i,j,x[c+0],H,3936430074),j=t(j,k,h,i,x[c+3],I,3572445317),i=t(i,j,k,h,x[c+6],J,76029189),h=t(h,i,j,k,x[c+9],G,3654602809),k=t(k,h,i,j,x[c+12],H,3873151461),j=t(j,k,h,i,x[c+15],I,530742520),i=t(i,j,k,h,x[c+2],J,3299628645),h=u(h,i,j,k,x[c+0],K,4096336452),k=u(k,h,i,j,x[c+7],L,1126891415),j=u(j,k,h,i,x[c+14],M,2878612391),i=u(i,j,k,h,x[c+5],N,4237533241),h=u(h,i,j,k,x[c+12],K,1700485571),k=u(k,h,i,j,x[c+3],L,2399980690),j=u(j,k,h,i,x[c+10],M,4293915773),i=u(i,j,k,h,x[c+1],N,2240044497),h=u(h,i,j,k,x[c+8],K,1873313359),k=u(k,h,i,j,x[c+15],L,4264355552),j=u(j,k,h,i,x[c+6],M,2734768916),i=u(i,j,k,h,x[c+13],N,1309151649),h=u(h,i,j,k,x[c+4],K,4149444226),k=u(k,h,i,j,x[c+11],L,3174756917),j=u(j,k,h,i,x[c+2],M,718787259),i=u(i,j,k,h,x[c+9],N,3951481745),h=m(h,d),i=m(i,e),j=m(j,f),k=m(k,g);var O=w(h)+w(i)+w(j)+w(k);return O.toLowerCase()}};return a}])}(window,window.angular,void 0)}.apply(a,arguments)})}(this),function(a){define("angular-base64",["angular"],function(){return function(){!function(){"use strict";angular.module("base64",[]).constant("$base64",function(){function a(a,b){var c=f.indexOf(a.charAt(b));if(c==-1)throw"Cannot decode base64";return c}function b(b){b=""+b;var c,d,f,g=b.length;if(0==g)return b;if(g%4!=0)throw"Cannot decode base64";c=0,b.charAt(g-1)==e&&(c=1,b.charAt(g-2)==e&&(c=2),g-=4);var h=[];for(d=0;d<g;d+=4)f=a(b,d)<<18|a(b,d+1)<<12|a(b,d+2)<<6|a(b,d+3),h.push(String.fromCharCode(f>>16,f>>8&255,255&f));switch(c){case 1:f=a(b,d)<<18|a(b,d+1)<<12|a(b,d+2)<<6,h.push(String.fromCharCode(f>>16,f>>8&255));break;case 2:f=a(b,d)<<18|a(b,d+1)<<12,h.push(String.fromCharCode(f>>16))}return h.join("")}function c(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c}function d(a){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var b,d,g=[];a=""+a;var h=a.length-a.length%3;if(0==a.length)return a;for(b=0;b<h;b+=3)d=c(a,b)<<16|c(a,b+1)<<8|c(a,b+2),g.push(f.charAt(d>>18)),g.push(f.charAt(d>>12&63)),g.push(f.charAt(d>>6&63)),g.push(f.charAt(63&d));switch(a.length-h){case 1:d=c(a,b)<<16,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+e+e);break;case 2:d=c(a,b)<<16|c(a,b+1)<<8,g.push(f.charAt(d>>18)+f.charAt(d>>12&63)+f.charAt(d>>6&63)+e)}return g.join("")}var e="=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{encode:d,decode:b}}())}()}.apply(a,arguments)})}(this),define("bb/ui/services/zeus-interceptor/zeus-interceptor",["angular"],function(a){"use strict";function b(b,c){var d,e,f;return f=function(a){var c,d=b.defer(),e=a.data,f=a.status,g=a.headers,h=a.config;return a.config&&a.config.zeus?(c=f<200?"http info":f>=300&&f<=399?"http redirect":f>=400&&f<=499?"http client error":"http server error","string"==typeof e&&(e={msg:e}),e&&(e.reason=c),d.reject({data:e,status:f,headers:g,config:h})):d.reject(a),d.promise},d=function(b){var d,e=function(a){var b,d={};return a.indexOf("?")!==-1?(b=a.split("?")[1].split("&"),b.forEach(function(a){a=a.split("="),d[a[0]]=decodeURIComponent(a[1])}),c.info("zeus-http: GET params converted to params object",a,d)):c.info("zeus-http: GET request has no query params",a),d},f=function(a){return a.indexOf("?")!==-1?a.split("?")[0]:a},g=function(b){return Object.keys(b).map(function(c){var d=b[c];return d=d?a.isArray(d)?encodeURIComponent(d.join(",")):a.isObject(d)?g(d):encodeURIComponent(d.toString()).replace(/%20/g,"+"):"",encodeURIComponent(c)+"="+d}).join("&")};return b.zeus?(d={method:"POST",headers:{Accept:"application/json"}},a.extend(d,b),"get"===d.method.toLowerCase()&&(c.info("zeus-http: Changing GET request %s to POST",d.url),d.params?(c.info("zeus-http: Changing query params to form params %o",d.params),d.data=d.params,d.url=d.url,delete d.params,d.url.indexOf("?")!==-1&&c.error("zeus-http: request has params in the URL and in config.params. Some params will be dropped.")):(c.info("zeus-http: GET request uses config.params",b),d.data=e(d.url),d.url=f(d.url)),d.method="POST"),"post"===d.method.toLowerCase()&&(c.info("zeus-http: Changing content-type to application/x-www-form-urlencoded"),d.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8;",d.data=g(d.data))):d=b,d},e=function(a){var d,e=b.defer(),g=f;return d=function(a,b,d,f){var g=a,h="",i="";if(d("Content-Type")&&d("Content-Type").match(/text\/plain/g)&&"string"==typeof a&&(a.length>0&&(h=a.substr(0,1),i=a.substr(a.length-1,1)),h.match(/(\[|\{)/)&&i.match(/(\]|\})/)))try{g=JSON.parse(a)}catch(b){c.error('Unable to parse json "%o%',a)}g&&200===g.ret_code?e.resolve({data:g.data,status:b,headers:d,config:f}):"head"===f.method.toLowerCase()||"delete"===f.method.toLowerCase()?e.resolve({status:b,headers:d,config:f}):("string"==typeof a&&(a={msg:a}),a.reason="api error ["+a.ret_code+":"+a.err_msg+"]",e.reject({data:a,status:b,headers:d,config:f}))},a.config&&a.config.zeus?a.status<200||a.status>299?g(a.data,a.status,a.headers,a.config):d(a.data,a.status,a.headers,a.config):a.status<200||a.status>299?g(a.data,a.status,a.headers,a.config):e.resolve(a),e.promise},{response:e,request:d,responseError:f}}return["$q","$log",b]}),define("bb/util/storage",[],function(){"use strict";function a(a){var b="testStorage";try{return window[a].setItem(b,b),window[a].removeItem(b),!0}catch(a){return!1}}function b(a,b){function d(a){return c&&e&&"function"==typeof e[a]}var e;try{e=window[a]}catch(b){window.console.error('Cannot access Storage object "'+a+'"')}this.data={},this.getItem=function(a){return d("getItem")?e.getItem(a):this.data.hasOwnProperty(a)?this.data[a]:b},this.setItem=function(a,c){return d("setItem")?e.setItem(a,c):a?this.data[a]=String(c):b},this.removeItem=function(a){return d("removeItem")?e.removeItem(a):delete this.data[a]},this.key=function(a){return d("key")?e.key(a):Object.keys(this.data)[a]},this.clear=function(){return d("clear")?e.clear():void(this.data={})},this.length=function(){return c&&e&&"number"===e.length?e.length:Object.keys(this.data).length}}var c;return c=a("localStorage")&&a("sessionStorage"),{local:new b("localStorage"),session:new b("sessionStorage"),hasStorage:function(){return c}}}),define("bb/util/is-jasmine",[],function(){"use strict";function a(){if(window.jasmine&&window.expect&&window.it&&window.describe)return!0}return a}),define("bb/ui/services/csrf/csrf-service",["angular","bb/util/storage","bb/util/browser/get-meta","bb/util/is-jasmine"],function(a,b,c,d){"use strict";function e(a,e){var f={isRunning:!1,requests:[]},g={storageKey:"bbCSRF",storageDateKey:"bbCSRFDate",metaKey:"bb-csrf",token:null,set:function(a){a&&(this.token=a,b.session.setItem(this.storageKey,a),b.session.setItem(this.storageDateKey,new Date))},get:function(){var a=e.defer(),d=c(this.metaKey),f=b.session.getItem(this.storageKey);return this.isTooOld()&&this.clear(),this.token?a.resolve(this.token):d?(this.set(d),a.resolve(d)):f?(this.set(f),a.resolve(f)):this.fetchFromAPI().then(function(b){this.set(b),a.resolve(b)}.bind(g)).catch(a.reject),a.promise},hasToken:function(){return this.token},clear:function(){this.token=null,b.session.removeItem(this.storageKey),b.session.removeItem(this.storageDateKey)},isTooOld:function(){var a,c,d;return!(!b.session.getItem(this.storageDateKey)||!b.session.getItem(this.storageKey))&&(a=6e4,c=new Date,d=new Date(b.session.getItem(this.storageDateKey)),c-d>a)},fetchFromAPI:function(){var a,b,c="https://api.bodybuilding.com/wrapper/csrf",h=e.defer();return d()?(g.set("abc-123-xyz-789"),h.resolve()):(f.requests.push(h),f.isRunning||(f.isRunning=!0,a=new XMLHttpRequest,a.addEventListener("load",function(){b=JSON.parse(this.responseText).csrf,f.isRunning=!1,b?f.requests.forEach(function(a){a.resolve(b)}):f.requests.forEach(function(a){a.reject()}),f.requests=[]}),a.withCredentials=!0,a.open("POST",c),a.send())),h.promise}};return a.$on("login",function(a,b){g.set(b.success&&b.data&&b.data.csrfLoginToken&&b.data.csrfLoginToken.csrf)}),a.$on("logout",g.clear.bind(g)),{getCSRFToken:g.get.bind(g)}}return["$rootScope","$q",e]}),define("bb/ui/services/csrf/package",["angular","./csrf-service"],function(a,b){"use strict";return a.module("bb.ui.services.csrf",[]).service("csrfService",b)}),define("bb/ui/services/zeus-interceptor/package",["angular","./zeus-interceptor","bb/ui/services/csrf/package"],function(a,b){"use strict";return a.module("bb.ui.services.zeus-interceptor",["bb.ui.services.csrf"]).service("zeusInterceptor",b).config(["$httpProvider",function(a){a.interceptors.push("zeusInterceptor"),a.defaults.withCredentials=!0}])}),define("bb/ui/services/http-interceptor/http-interceptor",[],function(){"use strict";function a(){return document.cookie.split(";").some(function(a){return"lgn"===a.split("=")[0].trim()})}function b(b,c,d){function e(e){var f=c.defer(),g=e.url;return e.requiresCSRF||a()&&!e.zeus&&g.indexOf("bodybuilding.com")!==-1&&"https://api.bodybuilding.com/wrapper/csrf"!==g?b.getCSRFToken().then(function(a){e.headers["BB-CSRF"]=a,f.resolve(e)}).catch(function(a){d.warn("Unable to populate CSRF token for API call %s",g,a),f.resolve(e)}):f.resolve(e),f.promise}return{request:e}}return["csrfService","$q","$log",b]}),define("bb/ui/services/http-interceptor/package",["angular","./http-interceptor","bb/ui/services/csrf/package"],function(a,b){"use strict";return a.module("bb.ui.services.http-interceptor",["bb.ui.services.csrf"]).service("httpInterceptor",b).config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor"),a.defaults.withCredentials=!0}])}),define("bb/ui/services/user/user-module",["angular","angular-md5","angular-base64","bb/ui/services/zeus-interceptor/package","bb/ui/services/http-interceptor/package","angular-cookies"],function(a){"use strict";var b=a.module("bb.ui.services.user",["ngMd5","base64","bb.ui.services.zeus-interceptor","bb.ui.services.http-interceptor","ngCookies"]);return b.constant("bbUserServicesConfig",{api:{currentUser:{get:"//api.bodybuilding.com/api-proxy/rightsidebar/getinfo"}}}),b}),define("bb/util/enums/bodyspace-group",[],function(){"use strict";var a={names:{GUEST:1,REGISTERED_USER:2,UNACTIVATED:3,MODERATOR:7,SUPER_MODERATOR:5,ADMINISTRATOR:6,BANNED:8,MISERABLE_USERS:10,VIDEO_ADMIN:11},1:{name:"GUEST",title:"Unregistered / logged out",authorizations:[1]},2:{name:"REGISTERED_USER",title:"Registered",authorizations:[1,2]},3:{userTitle:"REGISTERED_USER",title:"Users awaiting email confirmation",authorizations:[1]},4:{userTitle:"REGISTERED_USER",title:"(COPPA) Users awaiting moderation",authorizations:[1]},5:{userTitle:"SUPER_MODERATOR",title:"Super moderators",authorizations:[1,2,5,7]},6:{userTitle:"ADMINISTRATOR",title:"Administrators",authorizations:[1,2,5,6,7,11]},7:{userTitle:"MODERATOR",title:"Moderators",authorizations:[1,2,7]},8:{userTitle:"BANNED",title:"Banned by moderators",authorizations:[1,8]},9:{userTitle:"IFBB Pro Bodybuilder",title:"IFBB Pro Bodybuilders",authorizations:[1,2,9]},10:{userTitle:"MISERABLE_USERS",title:"Miserable users",authorizations:[1]},11:{userTitle:"VIDEO_ADMIN",title:"Video administrators",authorizations:[1,2,11]}};return a.forId=function(b){return a[b]},a.isAuthorized=function(b,c){var d,e;return b?(e=a[b],d=e?e.authorizations.indexOf(c)>-1:1===c):d=1===c,d},a.isModerator=function(b){return a.isAuthorized(b,a.names.MODERATOR)},a.isSuperModerator=function(b){return a.isAuthorized(b,a.names.SUPER_MODERATOR)},a.isAdmin=function(b){return a.isAuthorized(b,a.names.ADMINISTRATOR)},a.isRegisteredUser=function(b){return a.isAuthorized(b,a.names.REGISTERED_USER)},a.isBanned=function(b){return a.names.BANNED===b},a.isUnactivated=function(b){return a.names.UNACTIVATED===b},a}),define("lodash/internal/baseToString",[],function(){function a(a){return null==a?"":a+""}return a}),define("lodash/utility/uniqueId",["../internal/baseToString"],function(a){function b(b){var d=++c;return a(b)+d}var c=0;return b}),define("bb/ui/services/user/current-user",["angular","./user-module","bb/util/enums/bodyspace-group","bb/util/storage","lodash/utility/uniqueId"],function(a,b,c,d,e){"use strict";function f(b,f,k,l,m,n,o){function p(){function b(a){var b={store:[],my:[]};return b.store=a.links[h].links,b.my=a.links[i].links,b}var c,d;c=r._currentUser?r._currentUser.user:{},a.equals(s,c)||(s=c,l.info("CurrentUserService#syncRootScope",c),n.currentUser=c,n.loggedIn=r.isLoggedIn(),c&&c.userId&&(d={},d.store=[],d.my=[],d.store.push({href:"https://www.bodybuilding.com/store/account/order-history",label:"Order History",key:"myStore.orderHistory"}),d.store.push({href:"https://www.bodybuilding.com/store/account/quick-reorder.jsp",label:"Quick Reorder",key:"myStore.quickReorder"}),d.store.push({href:"http://reviews.bodybuilding.com/my-reviews",label:"Reviews",key:"myStore.reviews"}),d.store.push({href:"https://www.bodybuilding.com/store/account/",label:"Manage Account",key:"myStore.manageAccount"}),d.store.push({href:"https://www.bodybuilding.com/store/account/wish-list.jsp",label:"Wish List",key:"myStore.wishList"}),d.my.push({href:"https://my.bodybuilding.com/community/my-bodyspace/",label:"Dashboard",key:"myBodyspace.dashboard"}),d.my.push({href:"https://bodyspace.bodybuilding.com/community/goal",label:"Goal",key:"myBodyspace.goal"}),d.my.push({href:"https://bodyspace.bodybuilding.com/community/plan",label:"Plan",key:"myBodyspace.plan"}),d.my.push({href:"https://bodyspace.bodybuilding.com/community/track",label:"Track",key:"myBodyspace.track"}),d.my.push({href:"https://bodyspace.bodybuilding.com/community/motivation",label:"Motivation",key:"myBodyspace.motivation"}),d.my.push({href:"https://my.bodybuilding.com/friends/"+c.slug,label:"Friends",key:"myBodyspace.friends"}),d.my.push({href:"https://my.bodybuilding.com/followers/"+c.slug,label:"Followers",key:"myBodyspace.followers"}),d.my.push({href:"https://my.bodybuilding.com/alerts/"+c.slug+"?tab=actionitems",label:"Notifications",key:"myBodyspace.notifications"}),r._currentUser&&r._currentUser.navigationLinks?a.isArray(r._currentUser.navigationLinks.links)?n.profileLinks=b(r._currentUser.navigationLinks):(l.warn("Expected profile menu links to be an array not an object!"),n.profileLinks=d):n.profileLinks=d),n.$emit(g,n.currentUser))}var q,r,s,t="currentUser";return n.currentUser={},q={saveToLocalStorage:function(){try{d.local.setItem(t,JSON.stringify(r._currentUser)),l.debug("CurrentUserService#saveToLocalStorage: Current user saved to localStorage")}catch(a){l.error("Unable to save to local storage:\n%o",a)}},removeFromLocalStorage:function(){d.local.removeItem(t)},isValueInLocalStorage:function(){var a,b;return a=d.local.getItem(t),b=a&&"null"!==a&&"undefined"!==a},load:function(a){r._currentUser=this.loadFromLocalStorage(),p(),r._currentUser&&(l.debug("CurrentUserService#load: Loaded current user from localStorage",r._currentUser),a.notify("user loaded from localStorage"),
a.resolve(r._currentUser)),this.loadFromServer(a)},loadFromServer:function(a){var c={needsuser:1};o.user&&(c.userid=o.user),"debug"===l.level&&!function(){var b=e("currentUserService-");l.time(b),a.promise.then(function(){l.timeEnd(b)})}(),j.requests.push(a),j.isRunning||(j.isRunning=!0,b.get(k.api.currentUser.get,{params:c,zeus:!0}).then(function(a){var b=a.data;j.isRunning=!1,r._currentUser=b,q.saveToLocalStorage(),p(),j.requests.forEach(function(a){a.resolve(r._currentUser)}),j.requests=[]}).catch(function(a){var b=a.data;j.isRunning=!1,j.requests.forEach(function(a){l.error("CurrentUserService#loadFromServer: Unable to load user from server",b),a.reject(b)}),j.requests=[]}))},loadFromLocalStorage:function(){return q.isValueInLocalStorage()?JSON.parse(d.local.getItem(t)):null}},r={_currentUser:null,_email:null,get:function(a){var b=f.defer();return a||this.isLoggedIn()?this._currentUser?b.resolve(this._currentUser):q.load(b):b.resolve({}),b.promise},getEmail:function(){var a=f.defer();return this._email?a.resolve(this._email):r.reload().then(function(c){return c.user?b.get("//api.bodybuilding.com/profile/"+c.user.userId+"/email"):a.reject("NO_USER_DATA")}).then(function(b){b&&b.data.userEmails?a.resolve(b.data.userEmails):a.reject("NO_EMAIL_DATA")}).catch(a.reject),a.promise},flush:function(){q.saveToLocalStorage()},reload:function(){var a=f.defer();return q.loadFromServer(a),a.promise},isLoggedIn:function(){return!!m.lgn},getUnitOfMeasure:function(){var a="imperial";return this._currentUser&&this._currentUser.user&&(a=this._currentUser.user.unitOfMeasure),a},isBanned:function(){return!(!this._currentUser||!this._currentUser.user)&&c.isBanned(this._currentUser.user.groupId)},isUnactivated:function(){return!(!this._currentUser||!this._currentUser.user)&&c.isUnactivated(this._currentUser.user.groupId)},isInactive:function(){return!(!this._currentUser||!this._currentUser.user)&&(!this._currentUser.user.activated&&!this.isUnactivated())},isAdminOrModerator:function(){if(this._currentUser&&this._currentUser.user){var a=this._currentUser.user.groupId;return c.isModerator(a)||c.isAdmin(a)}return!1},hasUnreadNotifs:function(){var a,b;return b=this._currentUser,!(!b||!b.user)&&(a=[b.unreadAlertsCount,b.actionItemCount,b.requestsCount,b.unreadMessageCount].reduce(function(a,b){return a+b}),a>0)}},n.loggedIn=r.isLoggedIn(),n.$on("login",function(a,b){b.success&&(q.removeFromLocalStorage(),r.reload())}),n.$on("logout",function(){q.removeFromLocalStorage(),r.get()}),n.loggedIn||(q.removeFromLocalStorage(),r._currentUser=null),r}var g,h=0,i=1,j={isRunning:!1,requests:[]};return g="currentUser.changed",b.service("currentUserService",["$http","$q","bbUserServicesConfig","$log","$cookies","$rootScope","$window",f]),f}),define("bb/ui/services/tracking/omniture-service",["angular","bb/util/browser/get-meta"],function(a,b){"use strict";function c(b,c,d){function g(a){var b,c;c=d.body,b=d.createElement("span"),b.innerHTML=a,c.appendChild(a)}function h(a){var c;return"function"==typeof a.t?c=a.t():b.warn("Unable to track omniture data. typeof s.t was %s. Data:%o",a.t,a),c&&(b.info("omniture tracking returned %o",c),g(c)),c}function i(){var a;return c.s||(b.warn('Unable to find omniture "s" global var! Setting up stub'),c.s={}),a=c.s}function j(){return c.s_omni||(c.s_omni={}),c.s_omni}function k(d,e,f){var g=a.extend(i(),f);g.referrer=e,c.s_omni&&(c.s_omni.pageName=f.pageName,c.s_omni.eVar55=f.eVar55),b.debug('fauxView "%s" %o',d,f),h(g)}var l={};return l.sOmni=e?f:j,l.fauxView=e?f:k,l}var d,e,f=function(){};return d=b("bb:legacy-scode-disabled"),e=d&&"disabled"===d,["$log","$window","$document",c]}),define("bb/ui/services/tracking/tracking-service",["angular","bb/util/module-info","@bbcom/bb-analytics"],function(a,b,c){"use strict";function d(a){function b(a,b,d,e,f,g){"object"==typeof a&&(b=a.action,d=a.label,e=a.category,f=a.value,a=a.name),e=e||"modal",g=g||{},d||(d="Modal "+a+" "+b),c.pushEvent(a,b,d,e,f,g)}var d={};return d.reset=function(){var b=(new Error).stack;a.warn('TrackingService: Call to deprecated tracking service function "reset()"\n%cStack Trace:\n%s',"font-weight:bold;",b)},d.customEvent=function(b){a.warn('TrackingService: Call to deprecated tracking service function "customEvent(%j)"\n%cStack Trace:\n%s',b,"font-weight:bold;",(new Error).stack)},d.flush=function(){a.warn('TrackingService: Call to deprecated tracking service function "flush()"\n%cStack Trace:\n%s',"font-weight:bold;",(new Error).stack)},d.modalOpen=function(a){var c;"string"==typeof a?c={name:a,action:"open"}:(c=a,c.action||(c.action="open")),b(c)},d.modalClose=function(a){var c;"string"==typeof a?c={name:a,action:"close"}:(c=a,c.action||(c.action="close")),b(c)},d.setProp=function(b,c){a.warn('TrackingService: Call to deprecated tracking service function "setProp(%s, %s)! Use dataLayer.push({%s:%s}}\n%cStack Trace:\n%s',b,c,b,c,"font-weight:bold;",(new Error).stack)},d}return["$log",d]}),define("bb/ui/services/tracking/omniture-listener",["angular","bb/util/browser/get-meta"],function(a,b){"use strict";function c(){function b(b,c,d,h){function i(a){function b(){var a;return a=window.location.host.match(g)?"bbprod":"bbexttrfc"}function d(){return c.s_account||"bbdev"}var e;switch(a){case"prod":e=b();break;case"stage":e="bbstage";break;case"dev":e="bbdev";break;default:e=d()}return e}function j(b){function e(){var a,c,d=h.events;a=b.events.custom.join(","),c=(d?d+",":"")+a||"",h.events=c}function f(){Object.keys(b.props).forEach(function(a){h[a]=b.props[a]}),h.selector=h.selector||b.taxonomyKey,h.pageName=h.pageName||d.get(0).title,b.client.name?h.versionID=b.client.name+":"+b.client.version:b.server&&(h.versionID=b.server.name+":"+b.server.version)}var g=a.copy(c.s_omni||{}),h={};return a.extend(h,g),e(),f(),h}function k(a){var b=d.get(0),c=b.createElement("script");"async"in c?(c.async=!0,c.readyState?c.onreadystatechange=function(){"loaded"===c.readyState&&h.debug("OmnitureListener: Loaded s_code.js"),"function"==typeof a&&a()}:(c.onload=function(){h.debug("OmnitureListener: Loaded s_code.js %o",arguments),"function"==typeof a&&a()},c.onerror=function(a){h.error("OmnitureListener: Unable to load s_code.js %o",a)})):c.defer=!0,c.src="//assets.bodybuilding.com/clientscript/s_code.js",b.getElementsByTagName("head")[0].appendChild(c)}function l(a){h.debug("OmnitureListener: sending tracking data %o",c.s_omni),c.s.t(),c.s_omni=a}function m(a){var b=c.s_code||{},d=c.s_account||i(a.env),e=j(a);d!==c.s_account&&(h.debug("OmnitureListener: Changing s_account from:%s to:%s",c.s_account,d),c.s_account=d),c.s_omni=e;try{h.debug("OmnitureListener: Sending omniture data to account %s with data %o",e),c.s&&"function"==typeof c.s.t?p._internalSend(b):(h.debug("OmnitureListener: s_code.js not on page, loading..."),k(function(){p._internalSend(b)}))}catch(a){h.error("OmnitureListener: Error sending omniture data! %o",a)}}function n(a){a.name&&"open"===a.action&&p._internalTrackEvent(a.name)}function o(a){if(a&&"string"==typeof a&&""!==a){if("function"==typeof c.OmniturePageSpoof)try{c.OmniturePageSpoof(a)}catch(b){h.warn('OmnitureListener: Unable to track "%s" with omniture.',a,b)}}else h.warn('OmnitureListener: trackingId "%s" not tracked.',a)}var p={};return p._internalAccount=e?f:i,p._internalMapToOmnitureData=e?f:j,c.s&&"function"==typeof c.s.t||e||(h.debug("OmnitureListener: s_code.js not on page, loading..."),k()),p._internalSend=e?f:l,p._internalFlush=e?f:m,p._internalTrackModal=e?f:n,p._internalTrackEvent=e?f:o,this.trackPageLoaded&&b.$on("trackingPageLoaded",function(a,b){p._internalFlush(b)}),this.trackModal&&b.$on("trackingModal",function(a,b){p._internalTrackModal(b)}),this.trackEvent&&b.$on("trackingEvent",function(a,b){p._internalTrackEvent(b)}),p}this.trackPageLoaded=!1,this.trackModal=!1,this.trackEvent=!1,this.$get=["$rootScope","$window","$document","$log",b]}var d,e,f=function(){},g=/(bodybuilding.com|bodybuilders.com|teenbodybuilding.com|wheycheap.com)$/i;return d=b("bb:legacy-scode-disabled"),e=d&&"disabled"===d,c}),define("bb/ui/services/tracking/package",["angular","./omniture-service","./tracking-service","./omniture-listener"],function(a,b,c,d){"use strict";return a.module("bb.ui.services.tracking",[]).service("omnitureService",b).service("trackingService",c).provider("omnitureListener",d).run(["omnitureListener",function(){}])}),define("bb/ui/util/device-service",[],function(){"use strict";function a(a,b){return{min:a,max:b}}function b(a,b,e){function f(){var b,c=a.device.breakpoint;b=d.desktopWide.matches?"desktop-wide":d.desktop.matches?"desktop":d.tablet.matches?"tablet":"mobile",b!==c&&a.$apply(function(){e.debug("DeviceService#updateDeviceSize: breakpoint is now %s",b),a.device.breakpoint=b,a.$emit("device.breakpoint.changed",b,c)})}function g(){var a=j.getDevice();return a.usesTouchEvents||"mobile"===a.breakpoint||"tablet"===a.breakpoint}function h(){return!g()}function i(a,b,c){var d=a+":",e=document.createElement("test"),f=e.style;return c?f.cssText=d+b:f.cssText=d+["-webkit-","-moz-","-ms-","-o-",""].join(b+";"+d)+b+";",f[a]}var j={};return a.device={},d.mobile=b.matchMedia("(max-width: "+c.mobile.max+"px)"),d.tablet=b.matchMedia("(min-width: "+c.tablet.min+"px)"),d.desktop=b.matchMedia("(min-width: "+c.desktop.min+"px)"),d.desktopWide=b.matchMedia("(min-width: "+c.desktopWide.min+"px)"),j.mediaQueries=d,j.bindScreenSize=function(){f(),b.onresize=function(){f()}},j.getDevice=function(){return a.device},j.USES_TOUCH_EVENTS="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,a.device.usesTouchEvents=j.USES_TOUCH_EVENTS,e.debug("DeviceService.USES_TOUCH_EVENTS is %s",j.USES_TOUCH_EVENTS),j.looksLikeMobile=g,j.looksLikeDesktop=h,j.cssFeatureTest=i,j}var c={mobile:a(0,767),tablet:a(768,991),desktop:a(992,1199),desktopWide:a(1200,Number.MAX_VALUE)},d={};return b}),define("bb/ui/util/ua-service",[],function(){"use strict";function a(){var a={},b=navigator.userAgent,c=b.match(/(Android);?[\s\/]+([\d.]+)?/),d=b.match(/(iPad).*OS\s([\d_]+)/),e=b.match(/(iPod)(.*OS\s([\d_]+))?/),f=b.match(/Trident\/7/),g=b.match(/Edge\//),h=!d&&b.match(/(iPhone\sOS)\s([\d_]+)/),i=document.documentElement,j=i.className,k=j.indexOf("is-ie10")!==-1;return c&&(a.android=!0,a.version=c[2]),h&&!e&&(a.ios=a.iphone=!0,a.version=h[2].replace(/_/g,".")),d&&(a.ios=a.ipad=!0,a.version=d[2].replace(/_/g,".")),e&&(a.ios=a.ipod=!0,a.version=e[3]?e[3].replace(/_/g,"."):null),g&&(a.edge=!0,i.className=i.className+" is-edge"),f&&(a.ie11=!0,i.className=i.className+" is-ie11"),k&&(a.ie10=!0,a.oldIE=!0),a.version&&(a.version=parseFloat(a.version)),a.supportsFixedPositioning=function(){return!0},a}return a}),define("bb/ui/util/package",["angular","bb/ui/util/device-service","bb/ui/util/ua-service"],function(a,b,c){"use strict";var d=a.module("bb.ui.util",[]);return d.service("deviceService",["$rootScope","$window","$log",b]).service("uaService",[c]),d.run(["deviceService",function(a){a.bindScreenSize()}]),d}),define("bb/ui/signup/signup-service",[],function(){"use strict";function a(a,b){function c(a,c){var d,e;e=encodeURIComponent(c&&c.redirectURL||location.href),d="https://www.bodybuilding.com/profile/signup?referrer="+e,b.assign(d)}function d(){a.$on("signup.show",c)}return{init:d}}return["$rootScope","locationService",a]}),define("bb/ui/flash-message/views",[],{init:function(a){"use strict";a.put("bb/ui/flash-message/flash-message.ng.html","<div class=FlashMessage ng-class=\"{'FlashMessage-opened': open}\" ng-show=message>{{ message }}</div>")}}),define("bb/ui/flash-message/flash-message-directive",[],function(){"use strict";function a(a,b){function c(a,c){function d(){c.remove()}b(function(){a.open=!0,b(function(){a.open=!1,b(d,1e3)},5e3)},500)}var d={restrict:"E",templateUrl:"bb/ui/flash-message/flash-message.ng.html",scope:{message:"@"},link:c};return d}return["flashMessageService","$timeout",a]}),define("bb/ui/flash-message/flash-message-service",["angular"],function(a){"use strict";function b(b,c,d){function e(){var a=d.get(h);return f(),"undefined"===a&&(a=void 0),a}function f(){d.set({name:h,value:"",path:"/",domain:".bodybuilding.com",end:new Date(new Date-9999)})}var g={},h="bb-ui-flash-message";return g.set=function(a){d.set({name:h,value:a,path:"/",domain:".bodybuilding.com",end:new Date+2e4})},g.init=function(){var d,f=e();f&&(d=b('<bb-flash-message message="'+f+'"></bb-flash-message>')(c.$new()),a.element(document.body).prepend(d))},g}return["$compile","$rootScope","cookieService",b]}),define("bb/ui/services/cookies/cookie-service",[],function(){"use strict";function a(a,b){function c(a,c,d,e,f,g){var h,i="";if(a&&!/^(?:expires|max-age|path|domain|secure)$/i.test(a)){if(f)switch(f.constructor){case Number:i=f===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+f;break;case String:f.match(/(\w|\s|:|-|\(|\))+/g)?i=";expires="+f:b.warn('Unable to set expires for cookie to "%s". Found unknown characters.',f);break;case Date:i=";expires="+f.toUTCString()}"string"!=typeof a&&(c=a.value||c,f=a.end||f,d=a.path||d,e=a.domain||e,g=a.secure||g,a=a.name||a),h=encodeURIComponent(a)+"="+encodeURIComponent(c)+i+(e?";domain="+e:"")+(d?";path="+d:"")+(g?";secure":""),document.cookie=h}}function d(b){return a[b]}var e={};return e.set=c,e.get=d,e}return["$cookies","$log",a]}),define("bb/ui/services/cookies/package",["angular","./cookie-service","angular-cookies"],function(a,b){return a.module("bb.ui.services.cookies",["ngCookies"]).service("cookieService",b)}),define("bb/ui/flash-message/package",["angular","./views","./flash-message-directive","./flash-message-service","bb/ui/services/cookies/package"],function(a,b,c,d){"use strict";return a.module("bb.ui.flash-message",["bb.ui.services.cookies"]).service("flashMessageService",d).directive("bbFlashMessage",c).run(["$templateCache",b.init])}),define("bb/ui/services/utils/utils-module",["angular","bb/ui/flash-message/package"],function(a){"use strict";return a.module("bb.ui.services.utils",["bb.ui.flash-message"])}),define("bb/ui/services/utils/location-service",["./utils-module","bb/util/is-jasmine"],function(a,b){function c(a){function c(b){b&&a.set(b)}function d(a,d){b()||(c(d),location.assign(a))}function e(a,d){b()||(c(d),location.reload(!!a))}return{assign:d,reload:e}}a.service("locationService",["flashMessageService",c])}),define("bb/ui/signup/package",["angular","./signup-service","bb/ui/services/utils/location-service"],function(a,b){"use strict";return a.module("bb.ui.signup",["bb.ui.services.utils"]).service("bbUiSignupService",b).run(["bbUiSignupService",function(a){a.init()}])}),define("bb/ui/core/core-module",["bb/ui/ui-module","bb/ui/core/views","angular","bb/ui/core/run","bb/ui/services/user/current-user","bb/ui/services/tracking/package","bb/ui/util/package","bb/ui/signup/package"],function(a,b,c,d){"use strict";var e=c.module("bb.ui.core",["bb.ui","bb.ui.services.user","bb.ui.services.tracking","bb.ui.util","bb.ui.signup"]);return e.run(["$templateCache",d]),e}),define("bb/ui/core/dialog",["bb/ui/core/core-module","angular"],function(a,b){"use strict";var c,d,e,f,g,h,i;return h={require:"?^bbDialog",restrict:"EA",transclude:!0,link:function(a,b,c,d){d&&(a.dialogOpen=d.dialogOpen,a.dialogClose=d.dialogClose,a.$watch(d.getActions,function(b){a.actions=b}),a.$watch(d.getParams,function(b){a.params=b}))}},i=function(a,c,d,e,f){function g(a){return a.attr("tracking-name")}function h(a,b){var c=a.controller("bbDialog"),d=c.getScope();d.showDialog!==b&&d.$evalAsync(function(){d.showDialog=b})}var i={};return i.close=function(c){var d,i;return c?(d=c.hasClass("bb-dialog-mask")?c:c.parents(".bb-dialog-mask"),i=g(d),d.size()?d.hasClass("bb-hide")?a.debug("dialogService#close: dialog already closed"):(h(d,!1),e.addClass(d,"bb-hide").then(function(){b.element(document.body).removeClass("bb-lock-scroll")}),void(i&&f.modalClose({name:i,action:"close"}))):a.debug("dialogService#close: no dialog")):a.debug("dialogService#close: no elem")},i.open=function(c){var d,i;return c?(d=c.hasClass("bb-dialog-mask")?c:c.find(".bb-dialog-mask"),i=g(d),d.size()?void(d.find(".bb-dialog").length||(b.element(document.body).addClass("bb-lock-scroll"),e.removeClass(d,"bb-hide"),h(d,!0),i&&f.modalOpen({name:i,action:"open"}))):a.debug("dialogService#open: no dialog")):a.debug("dialogService#open: no elem")},i},e=function(){var a=b.extend({},{templateUrl:"bb/ui/core/dialog-header.html"},h);return a},f=function(){var a=b.extend({},{templateUrl:"bb/ui/core/dialog-footer.html"},h);return a},g=function(){var a=b.extend({},{templateUrl:"bb/ui/core/dialog-content.html"},h);return a},d=function(a){var c={restrict:"EA",link:function(c,d,e){d.on("click",function(){if(e.selector)return void a.open(b.element(e.selector));for(;0===d.find(".bb-dialog-mask").length;)d=d.parent();a.open(d.find(".bb-dialog-mask"))})}};return c},c=function(a){var c,d={templateUrl:"bb/ui/core/dialog.html",restrict:"EA",transclude:!0,scope:{type:"@",size:"@",trackingName:"@"}};return c=function(c,d,e,f,g){var h=this,i=d.dialogElem=e.find(".bb-dialog-mask"),j="bb-dialog--default";d.type&&"lightbox"===d.type.toLowerCase()&&(j="bb-dialog--lightbox"),i.parent().addClass(j),d.size&&i.parent().addClass("bb-dialog--"+d.size),d.actions={},d.params={},d.showDialog=!1,d.dialogClose=function(){d.params={},c.$emit("dialog.close",e),a.close(i)},d.dialogOpen=function(b){c.$emit("dialog.open",e),a.open(i),d.params=b||{}},this.getActions=function(){return d.actions},this.getParams=function(){return d.params},this.setAction=function(a,b){return f.debug("DialogController#setAction",a,b),d.actions[a]=b,d[a]=b,this},this.dialogClose=d.dialogClose,this.dialogOpen=d.dialogOpen,this.getScope=function(){return d},"clickToDismiss"in g&&e.on("click",function(a){var c=b.element(a.target);c.hasClass("bb-dialog-mask")&&h.dialogClose()})},d.controller=["$rootScope","$scope","$element","$log","$attrs",c],d},a.service("dialogService",["$log","$window","$timeout","$animate","trackingService",i]),a.directive("bbDialog",["dialogService",c]),a.directive("bbDialogTrigger",["dialogService",d]),a.directive("bbDialogHeader",[e]),a.directive("bbDialogFooter",[f]),a.directive("bbDialogContent",[g]),{DialogService:i,DialogTrigger:d,DialogHeader:e,DialogFooter:f,DialogContent:g,Dialog:c}}),define("bb/ui/core/visible",["bb/ui/core/core-module"],function(a){"use strict";a.directive("bbVisible",function(){return function(a,b,c){b.css("visibility","hidden"),a.$watch(c.bbVisible,function(a){a?b.css("visibility","visible"):b.css("visibility","hidden")})}})}),define("bb/ui/gdpr/package",["angular","./gdpr","./gdpr-modal","./views","bb/ui/services/gdpr/package","bb/ui/core/dialog","bb/ui/core/visible"],function(a,b,c,d,e){"use strict";return a.module("bb.ui.gdpr",[e.name,"bb.ui.core"]).directive("bbGdpr",b).directive("bbGdprModal",c).run(["$templateCache",d.init])}),define("bb/ui/core/avatar",["angular","bb/ui/core/core-module"],function(a,b){"use strict";var c="https://artifacts.bbcomcdn.com/bb-resources/2.0.0/img/avatar/Avatar-Unisex-Default_35x35.jpg";b.directive("fallbackSrc",function(){var a=c+"?fallback";return{restrict:"A",link:function(b,c,d){var e=d.fallbackSrc||a;d.ngSrc||d.src?c.one("error",function(){c.removeAttr("srcset"),d.$set("src",e)}):d.$set("src",e)}}})}),define("lodash/lang/isObject",[],function(){function a(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}return a}),define("lodash/lang/isFunction",["./isObject"],function(a){function b(b){return a(b)&&e.call(b)==c}var c="[object Function]",d=Object.prototype,e=d.toString;return b}),define("lodash/internal/isHostObject",[],function(){var a=function(){try{Object({toString:0}+"")}catch(a){return function(){return!1}}return function(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}}();return a}),define("lodash/internal/isObjectLike",[],function(){function a(a){return!!a&&"object"==typeof a}return a}),define("lodash/lang/isNative",["./isFunction","../internal/isHostObject","../internal/isObjectLike"],function(a,b,c){function d(d){return null!=d&&(a(d)?i.test(g.call(d)):c(d)&&(b(d)?i:e).test(d))}var e=/^\[object .+?Constructor\]$/,f=Object.prototype,g=Function.prototype.toString,h=f.hasOwnProperty,i=RegExp("^"+g.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return d}),define("lodash/internal/getNative",["../lang/isNative"],function(a){function b(b,d){var e=null==b?c:b[d];return a(e)?e:c}var c;return b}),define("lodash/date/now",["../internal/getNative"],function(a){var b=a(Date,"now"),c=b||function(){return(new Date).getTime()};return c}),define("lodash/function/debounce",["../lang/isObject","../date/now"],function(a,b){function c(c,g,h){function i(){s&&clearTimeout(s),o&&clearTimeout(o),u=0,o=s=t=d}function j(a,e){e&&clearTimeout(e),o=s=t=d,a&&(u=b(),p=c.apply(r,n),s||o||(n=r=d))}function k(){var a=g-(b()-q);a<=0||a>g?j(t,o):s=setTimeout(k,a)}function l(){j(w,s)}function m(){if(n=arguments,q=b(),r=this,t=w&&(s||!x),v===!1)var a=x&&!s;else{o||x||(u=q);var e=v-(q-u),f=e<=0||e>v;f?(o&&(o=clearTimeout(o)),u=q,p=c.apply(r,n)):o||(o=setTimeout(l,e))}return f&&s?s=clearTimeout(s):s||g===v||(s=setTimeout(k,g)),a&&(f=!0,p=c.apply(r,n)),!f||s||o||(n=r=d),p}var n,o,p,q,r,s,t,u=0,v=!1,w=!0;if("function"!=typeof c)throw new TypeError(e);if(g=g<0?0:+g||0,h===!0){var x=!0;w=!1}else a(h)&&(x=!!h.leading,v="maxWait"in h&&f(+h.maxWait||0,g),w="trailing"in h?!!h.trailing:w);return m.cancel=i,m}var d,e="Expected a function",f=Math.max;return c}),define("lodash/function/throttle",["./debounce","../lang/isObject"],function(a,b){function c(c,e,f){var g=!0,h=!0;if("function"!=typeof c)throw new TypeError(d);return f===!1?g=!1:b(f)&&(g="leading"in f?!!f.leading:g,h="trailing"in f?!!f.trailing:h),a(c,e,{leading:g,maxWait:+e,trailing:h})}var d="Expected a function";return c}),define("bb/ui/core/back-to-top",["angular","jquery","bb/ui/core/core-module","lodash/function/throttle"],function(a,b,c,d){"use strict";c.directive("bbBackToTop",["$window","$rootScope",function(c,e){return{restrict:"E",replace:!0,template:'<button class="BackToTop bb-btn--plain" data-bb-action="backToTop" data-bb-label="Back to top"></button>',link:function(f,g){function h(){k||g.addClass(n),k=!0}function i(){k&&g.removeClass(n),k=!1}function j(){g.removeClass(o),c.addthis&&"mobile"===e.device.breakpoint&&g.addClass(o)}var k,l,m=a.element(c),n="BackToTop--visible",o="BackToTop--move-up";l=d(function(){m.scrollTop()>400?h():i()},200),m.on("scroll",l),g.appendTo(document.body).on("click",function(){m.off("scroll",l),i(),b([document.body,document.documentElement]).stop().animate({scrollTop:0},600,function(){m.on("scroll",l)})}),l(),e.$on("device.breakpoint.changed",j),window.addEventListener&&document.body.addEventListener("AddThis.isReady",function(){c.addthis&&c.addthis.addEventListener("addthis.ready",j)}),j(),f.$on("$destroy",function(){m.off("scroll",l),g.remove()})}}}])}),define("bb/ui/core/debounce",["bb/ui/core/core-module"],function(a){"use strict";function b(a){function b(b,c,d,e){function f(){b.$apply(function(){var a=c.val().trim();e.$setViewValue(a)})}var g;"radio"!==d.type&&"checkbox"!==d.type&&c.unbind("input").bind("blur",function(){a(f)}).bind("input",function(){a.cancel(g),g=a(f,d.bbDebounce||666)})}var c={};return c={restrict:"A",priority:99,require:"ngModel",link:b}}a.directive("bbDebounce",["$timeout",b])}),define("bb/ui/core/select",["bb/ui/core/core-module"],function(a){"use strict";a.directive("select",function(){return{restrict:"E",require:"?ngModel",scope:!1,link:function(a,b,c,d){d&&b.bind("keyup",function(a){return!a.keyCode||(!(1!==a.keyCode&&9!==a.keyCode&&16!==a.keyCode&&!a.altKey&&!a.ctrlKey)||void b.triggerHandler("change"))})}}})}),!function(a){"use strict";function b(){var b=this;b.reads=[],b.writes=[],b.raf=i.bind(a),h("initialized",b)}function c(a){a.scheduled||(a.scheduled=!0,a.raf(d.bind(null,a)),h("flush scheduled"))}function d(a){h("flush");var b,d=a.writes,f=a.reads;try{h("flushing reads",f.length),e(f),h("flushing writes",d.length),e(d)}catch(a){b=a}if(a.scheduled=!1,(f.length||d.length)&&c(a),b){if(h("task errored",b.message),!a.catch)throw b;a.catch(b)}}function e(a){h("run tasks");for(var b;b=a.shift();)b()}function f(a,b){var c=a.indexOf(b);return!!~c&&!!a.splice(c,1)}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}var h=function(){},i=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,16)};b.prototype={constructor:b,measure:function(a,b){h("measure");var d=b?a.bind(b):a;return this.reads.push(d),c(this),d},mutate:function(a,b){h("mutate");var d=b?a.bind(b):a;return this.writes.push(d),c(this),d},clear:function(a){return h("clear",a),f(this.reads,a)||f(this.writes,a)},extend:function(a){if(h("extend",a),"object"!=typeof a)throw new Error("expected object");var b=Object.create(this);return g(b,a),b.fastdom=this,b.initialize&&b.initialize(),b},catch:null};var j=a.fastdom=a.fastdom||new b;"f"==(typeof define)[0]?define("fastdom",[],function(){return j}):"o"==(typeof module)[0]&&(module.exports=j)}("undefined"!=typeof window?window:this),function(a){function b(a){this.fastdom=a,this.tasks=[],e("initialized")}function c(a,b){e("clear all",a,b);for(var c=b.length;c--;)a.clear(b[c]),b.splice(c,1)}function d(a,b){var c=a.indexOf(b);return!!~c&&!!a.splice(c,1)}var e=function(){};a.sandbox=function(){return new b(this.fastdom)},b.prototype.measure=function(a,b){var c=this.tasks,d=this.fastdom.measure(function(){return c.splice(c.indexOf(d)),a.call(b)});return c.push(d),d},b.prototype.mutate=function(a,b){var c=this.tasks,d=this.fastdom.mutate(function(){return c.splice(c.indexOf(d)),a.call(b)});return this.tasks.push(d),d},b.prototype.clear=function(a){return arguments.length||c(this.fastdom,this.tasks),d(this.tasks,a),this.fastdom.clear(a)},"f"==(typeof define)[0]?define("fastdom-sandbox",[],function(){return a}):"o"==(typeof module)[0]?module.exports=a:window.fastdomSandbox=a}({}),define("bb/ui/core/sticky",["angular","bb/ui/core/core-module","bb/util/browser/get-meta","fastdom","fastdom-sandbox","bb/ui/util/device-service","bb/ui/util/ua-service"],function(a,b,c,d,e){"use strict";function f(a){return a[0].getBoundingClientRect()}b.directive("bbSticky",["$log","deviceService","uaService",function(b,g,h){function i(a){return j&&j.indexOf(a)!==-1}var j=(c("bb:sticky-disabled")||"").match(/\S+/g),k=!(!g.cssFeatureTest("position","sticky")||window.chrome&&navigator.userAgent.match(/\bChrome\/\d{2}/));return{restrict:"A",require:"bbSticky",scope:{bbSticky:"@",offset:"@",mediaQuery:"@",offsetsByWidth:"&?",disableOnIos:"@"},controller:["$scope","$element",function(a,c){this.isDisabled=function(){var d=!0;return i(a.bbSticky)?b.debug('bbSticky: [bb-sticky="%s"] disabled by bb:sticky-disabled meta tag',a.bbSticky):(a.disableOnIos||c.hasClass("Wr__header"))&&h.ios?b.debug("bbSticky: %s disabled on iOS",a.bbSticky):d=!1,this.isDisabled=function(){return d},d},this.isUsingStickyPositioning=function(){return k}}],link:function(c,g,h,i){function j(a){return window.matchMedia("("+a+")").matches}function l(){x=0,y=0,z=0,A=0,B.mutate(function(){g.removeAttr("style"),u.removeAttr("class").remove()})}function m(a){var b=f(g),c=g.attr("class"),d=b.width,e=b.height,h=b.left;x=d,y=e,z=h,A=a,B.mutate(function(){u.attr("class",c).css({height:e+"px"}),g.after(u).css({left:h+"px",top:a+"px",width:d+"px",position:"fixed"})})}function n(a){var b=f(g),c=f(u),d=c.width,e=b.height,h=c.left;A!==a&&(A=a,B.mutate(function(){g[0].style.top=a+"px"})),x!==d&&(x=d,B.mutate(function(){g[0].style.width=d+"px"})),z!==h&&(z=h,B.mutate(function(){g[0].style.left=h+"px"})),y!==e&&(y=e,B.mutate(function(){u[0].style.height=e+"px"}))}function o(){g.attr("style","position: -webkit-sticky; position: -moz-sticky; position: sticky;").css({top:v()+"px","-webkit-transform":"translateZ(0)"})}function p(){g.css("top",v()+"px")}function q(){B.clear(),B.measure(function(){var a,b,c=j(C),d=w?u:g;c&&(b=f(d).top,a=v()),c&&b<a?(w?n(a):m(a),w=!0):(w&&l(),w=!1)})}function r(){D.off("scroll",q).off("resize",q).off("resize",t)}function s(){k?(b.debug("bbSticky: using `position: sticky`"),function(){function a(a){a.matches?(b||o(),b=!0):(b&&g.removeAttr("style"),b=!1)}var b,d=window.matchMedia("("+C+")"),e=[];d.addListener(a),a(d),E.forEach(function(a){var b=window.matchMedia("(min-width:"+a.width+"px)");b.addListener(p),e.push(b)}),c.$on("$destroy",function(){d.removeListener(a),e.forEach(function(a){a.removeListener(p)})})}()):(b.debug("bbSticky: using `position: fixed`"),c.$on("$destroy",r),D.on("scroll",q).on("resize",q),setTimeout(q,4))}function t(){j(C)&&(D.off("resize",t),s())}if(!i.isDisabled()){var u,v,w,x,y,z,A,B=d.extend(e).sandbox(),C=c.mediaQuery||"min-width: 0",D=a.element(window),E=[];h.offsetsByWidth&&(E=c.offsetsByWidth()),u=a.element(document.createElement(g[0].tagName)).css({padding:0,borderWidth:0,visibility:"hidden"}),v=E.length?function(){for(var a,b=E.length;b--;)if(a=E[b],j("min-width:"+a.width+"px"))return a.offset;return parseFloat(c.offset)||0}:function(){return parseFloat(c.offset)||0},j(C)?s():(b.debug("bbSticky: Media query does not match. Disabling sticky"),D.on("resize",t))}}}}])}),define("bb/ui/core/underlay",["bb/ui/core/core-module"],function(a){"use strict";a.directive("bbUnderlay",["uaService",function(a){return{restrict:"AE",link:function(b,c){c.addClass("bb-underlay").css("position","fixed"),a.ios&&c.css("cursor","pointer")}}}])}),function(a){define("fontfaceonload",[],function(){return function(){return function(a,b){"use strict";var c="AxmTYklsjo190QW",d="sans-serif",e="serif",f={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal"},g=["display:block","position:absolute","top:-999px","left:-999px","font-size:48px","width:auto","height:auto","line-height:normal","margin:0","padding:0","font-variant:normal","white-space:nowrap"],h='<div style="%s">'+c+"</div>",i=function(){this.fontFamily="",this.appended=!1,this.serif=void 0,this.sansSerif=void 0,this.parent=void 0,this.options={}};i.prototype.getMeasurements=function(){return{sansSerif:{width:this.sansSerif.offsetWidth,height:this.sansSerif.offsetHeight},serif:{width:this.serif.offsetWidth,height:this.serif.offsetHeight}}},i.prototype.load=function(){function c(a){return g.concat(["font-weight:"+q.weight,"font-style:"+q.style]).concat("font-family:"+a).join(";")}function f(a,b,c){return Math.abs(a.width-b.offsetWidth)>c||Math.abs(a.height-b.offsetHeight)>c}function i(){return(new Date).getTime()-k.getTime()>q.timeout}var j,k=new Date,l=this,m=l.serif,n=l.sansSerif,o=l.parent,p=l.appended,q=l.options,r=q.reference,s=h.replace(/\%s/,c(d)),t=h.replace(/\%s/,c(e));o||(o=l.parent=b.createElement("div")),o.innerHTML=s+t,n=l.sansSerif=o.firstChild,m=l.serif=n.nextSibling,q.glyphs&&(n.innerHTML+=q.glyphs,m.innerHTML+=q.glyphs),function c(){r||(r=b.body),!p&&r&&(r.appendChild(o),p=l.appended=!0,j=l.getMeasurements(),n.style.fontFamily=l.fontFamily+", "+d,m.style.fontFamily=l.fontFamily+", "+e),p&&j&&(f(j.sansSerif,n,q.tolerance)||f(j.serif,m,q.tolerance))?q.success():i()?q.error():!p&&"requestAnimationFrame"in window?a.requestAnimationFrame(c):a.setTimeout(c,q.delay)}()},i.prototype.cleanFamilyName=function(a){return a.replace(/[\'\"]/g,"").toLowerCase()},i.prototype.cleanWeight=function(a){var b={normal:"400",bold:"700"};return""+(b[a]||a)},i.prototype.checkFontFaces=function(c){var d=this;b.fonts.forEach(function(b){d.cleanFamilyName(b.family)===d.cleanFamilyName(d.fontFamily)&&d.cleanWeight(b.weight)===d.cleanWeight(d.options.weight)&&b.style===d.options.style&&b.load().then(function(){d.options.success(),a.clearTimeout(c)})})},i.prototype.init=function(c,d){var e;for(var g in f)d.hasOwnProperty(g)||(d[g]=f[g]);this.options=d,this.fontFamily=c,!d.glyphs&&"fonts"in b?(d.timeout&&(e=a.setTimeout(function(){d.error()},d.timeout)),this.checkFontFaces(e)):this.load();
};var j=function(a,b){var c=new i;return c.init(a,b),c};a.FontFaceOnload=j}(this,this.document),a.FontFaceOnload=FontFaceOnload}.apply(a,arguments)})}(this),function(a,b){"function"==typeof define&&define.amd?define("jeffchan-truncate",["jquery"],b):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):a.Truncate=b(a.jQuery)}(this,function(a){function b(a){return a.replace(/\s*$/,"")}function c(a,b){if(a.innerText)a.innerText=b;else if(a.nodeValue)a.nodeValue=b;else{if(!a.textContent)return!1;a.textContent=b}}function d(a,b,d,e){var f,g=a.parent();a.remove();var i=d?d.length:0;if(g.contents().length>i)return f=g.contents().eq(-1-i),h(f,b,d,e);var j=g.prev();return f=j.contents().eq(-1),!!f.length&&(c(f[0],f.text()+e.ellipsis),g.remove(),d.length&&j.append(d),!0)}function e(a,e,f,g){for(var h,i,j=a[0],k=a.text(),l="",m=0,n=k.length;m<=n;)h=m+(n-m>>1),i=g.ellipsis+b(k.substr(h-1,k.length)),c(j,i),e.height()>g.maxHeight?m=h+1:(n=h-1,l=l.length>i.length?l:i);return l.length>0?(c(j,l),!0):d(a,e,f,g)}function f(a,e,f,g){for(var h,i,j=a[0],k=a.text(),l="",m=0,n=k.length;m<=n;)h=m+(n-m>>1),i=b(k.substr(0,h+1))+g.ellipsis,c(j,i),e.height()>g.maxHeight?n=h-1:(m=h+1,l=l.length>i.length?l:i);return l.length>0?(c(j,l),!0):d(a,e,f,g)}function g(a,e,f,g){for(var h,i,j=a[0],k=a.text(),l="",m=0,n=k.length,o=n>>1;m<=o;)h=m+(o-m>>1),i=b(k.substr(0,h))+g.ellipsis+k.substr(n-h,n-h),c(j,i),e.height()>g.maxHeight?o=h-1:(m=h+1,l=l.length>i.length?l:i);return l.length>0?(c(j,l),!0):d(a,e,f,g)}function h(a,b,c,d){return"end"===d.position?f(a,b,c,d):"start"===d.position?e(a,b,c,d):g(a,b,c,d)}function i(b,c,d,e){var f,g,i=b[0],j=b.contents(),l=j.length,n=l-1,o=!1;for(b.empty();n>=0&&!o;n--)f=j.eq(n),g=f[0],8!==g.nodeType&&(i.insertBefore(g,i.firstChild),d.length&&(a.inArray(i.tagName.toLowerCase(),m)>=0?b.after(d):b.append(d)),c.height()>e.maxHeight&&(o=3===g.nodeType?h(f,c,d,e):k(f,c,d,e)),!o&&d.length&&d.remove());return o}function j(b,c,d,e){var f,g,i=b[0],j=b.contents(),l=0,n=j.length,o=!1;for(b.empty();l<n&&!o;l++)f=j.eq(l),g=f[0],8!==g.nodeType&&(i.appendChild(g),d.length&&(a.inArray(i.tagName.toLowerCase(),m)>=0?b.after(d):b.append(d)),c.height()>e.maxHeight&&(o=3===g.nodeType?h(f,c,d,e):k(f,c,d,e)),!o&&d.length&&d.remove());return o}function k(a,b,c,d){return"end"===d.position?j(a,b,c,d):"start"===d.position?i(a,b,c,d):j(a,b,c,d)}function l(b,c){this.element=b,this.$element=a(b),this._name="truncate",this._defaults={lines:1,ellipsis:"",showMore:"",showLess:"",position:"end",lineHeight:"auto"},this.config(c),this.original=this.cached=b.innerHTML,this.isTruncated=!1,this.isCollapsed=!0,this.update()}var m=["table","thead","tbody","tfoot","tr","col","colgroup","object","embed","param","ol","ul","dl","blockquote","select","optgroup","option","textarea","script","style"];return l.prototype={config:function(b){if(this.options=a.extend({},this._defaults,b),"auto"===this.options.lineHeight){var c=this.$element.css("line-height"),d=18;"normal"!==c&&(d=parseInt(c,10)),this.options.lineHeight=d}void 0===this.options.maxHeight&&(this.options.maxHeight=parseInt(this.options.lines,10)*parseInt(this.options.lineHeight,10)),"start"!==this.options.position&&"middle"!==this.options.position&&"end"!==this.options.position&&(this.options.position="end"),this.$clipNode=a(a.parseHTML(this.options.showMore),this.$element),this.original&&this.update()},update:function(a){var b=!this.isCollapsed;"undefined"!=typeof a?this.original=this.element.innerHTML=a:this.isCollapsed&&this.element.innerHTML===this.cached&&(this.element.innerHTML=this.original);var c=this.$element.wrapInner("<div/>").children();c.css({border:"none",margin:0,padding:0,width:"auto",height:"auto","word-wrap":"break-word"}),this.isTruncated=!1,c.height()>this.options.maxHeight?(this.isTruncated=k(c,c,this.$clipNode,this.options),this.isExplicitlyCollapsed&&(this.isCollapsed=!0,b=!1)):this.isCollapsed=!1,c.replaceWith(c.contents()),this.cached=this.element.innerHTML,b&&(this.element.innerHTML=this.original)},expand:function(){var a=!0;this.isExplicitlyCollapsed&&(this.isExplicitlyCollapsed=!1,a=!1),this.isCollapsed&&(this.isCollapsed=!1,this.element.innerHTML=this.isTruncated?this.original+(a?this.options.showLess:""):this.original)},collapse:function(a){this.isExplicitlyCollapsed=!0,this.isCollapsed||(this.isCollapsed=!0,a=a||!1,a?this.update():this.element.innerHTML=this.cached)}},a.fn.truncate=function(b){var c=a.makeArray(arguments).slice(1);return this.each(function(){var d=a.data(this,"jquery-truncate");d?"function"==typeof d[b]&&d[b].apply(d,c):a.data(this,"jquery-truncate",new l(this,b))})},l}),define("bb/ui/core/truncate",["bb/ui/core/core-module","fontfaceonload","jeffchan-truncate"],function(a,b,c){"use strict";function d(a,b){return window.getComputedStyle(a)[b]}function e(a){return a.indexOf(",")!==-1?a.split(",")[0]:a}a.directive("bbTruncate",function(){return{required:"ngBindHtml",restrict:"A",priority:100,link:function(a,f,g){var h,i,j,k,l,m,n,o,p,q=0;f.addClass("bb-truncate-directive"),o=function(){function b(){var a=new c(f[0],{lines:j,lineHeight:k,maxHeight:Math.ceil(j*parseFloat(k,10)),showMore:l,showLess:m,ellipsis:"..."});f.on("click",".toggle-truncate",function(b){b.preventDefault(),a.isCollapsed?a.expand():a.collapse()})}""!==f.html()?setTimeout(b,0):a.$watch(f.html(),b)},p=function(a){function c(){q+=1,q>0&&o()}b(a,{success:c,error:c})},j=g.bbTruncateLines?parseFloat(g.bbTruncateLines):2,k=d(f[0],"lineHeight"),l=m="","bbTruncateToggle"in g&&(l=' <span class="toggle-truncate bb-link">View More</span>',m=' <span class="toggle-truncate bb-link">View Less</span>'),n=d(f[0],"fontFamily").toLowerCase().indexOf("proxima")!==-1,n?(h=e(d(f[0],"fontFamily")),i="normal"===d(f[0],"fontWeight")?"n4":"n7",p(h+":"+i)):o()}}})}),define("bb/ui/core/non-bindable",["bb/ui/core/core-module"],function(a){"use strict";a.directive("bbNonBindable",["$compile",function(a){var b;return b={priority:999,terminal:!0},b.compile=function(b){return function(c){var d;d=b[0].getElementsByClassName("bb-bindable"),Array.prototype.forEach.call(d,function(b){a(b)(c)})}},b}])}),define("bb/ui/core/emit",["bb/ui/core/core-module"],function(a){"use strict";function b(a,b){function c(c,d){d.on("click",function(){var d;c.eventParams&&(d=c.eventParams()),b(function(){a.$emit(c.eventName,d)})})}var d={};return d={restrict:"A",scope:{eventName:"@bbEmit",eventParams:"&?bbEmitParams"},link:c}}a.directive("bbEmit",["$rootScope","$timeout",b])}),define("bb/ui/core/package",["bb/ui/core/avatar","bb/ui/core/back-to-top","bb/ui/core/debounce","bb/ui/core/visible","bb/ui/core/dialog","bb/ui/core/select","bb/ui/core/sticky","bb/ui/core/underlay","bb/ui/core/truncate","bb/ui/core/non-bindable","bb/ui/core/emit"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";return{avatar:a,backToTop:b,debounce:c,visible:d,dialog:e,select:f,sticky:g,underlay:h,truncate:i,nonBindable:j,emit:k}}),define("bb/ui/ad/ad",[],function(){function a(a,b){function c(a){return a.match(b)}function d(c,d){return c[d.replace(b,"").toLowerCase()]=a[d],c}return Object.keys(a).filter(c).reduce(d,{})}function b(b,e,f,g,h){function i(b,e,i){function j(a){m=h.getGPT(),m.cmd.push(function(){var d,e,f,j;i.layout&&(e=c[i.layout],f=m.sizeMapping(),e&&e.length&&(e.forEach(function(a){f.addSize(a.viewport,a.adSize)}),j=[[290,110],[460,100]])),d=m.defineSlot(b.gptAdUnitPath||i.adUnitPath,b.gptSize||j,s),void 0!==b.gptSizeMapping&&d.defineSizeMapping(a[b.gptSizeMapping]),void 0!==b.gptTargetingKey&&void 0!==b.gptTargetingValue&&d.setTargeting(b.gptTargetingKey,b.gptTargetingValue),d.setTargeting("URL",g.absUrl()),i.clickUrl&&d.setClickUrl(i.clickUrl),i.layout&&d.defineSizeMapping(f.build()),Object.keys(o).forEach(function(a){d.setTargeting(a,o[a])}),Object.keys(p).forEach(function(a){d.set(a,p[a])}),Object.keys(q).forEach(function(a){d.set(a,q[a])}),d.setCollapseEmptyDiv(!0,!1),d.addService(m.pubads()),h.addSlot(d)})}function k(){m.cmd.push(function(){m.display(s)})}var l,m,n,o,p,q,r,s;b.gptDivId||(r="bb-gpt-"+d++,e.attr("id",r),s=r),s=b.gptDivId||r,h.addSlotId(s).then(k),h.getMappings().then(j),n=e.data(),o=a(n,/^(targeting)/),p=a(n,/^(key)/),q=a(n,/^(categoryExclusions)/),f.$on("gpt.renderEnded",function(){var a;a=e.find("iframe").contents().find("a").size(),a&&!l&&(e.find("iframe").contents().find("a").on("click",function(){f.$emit("trackingEvent","googlead"+s)}),l=!0)})}var j;return j={restrict:"A",link:i,scope:{gptAdUnitPath:"@",gptSize:"=",gptDivId:"@id",gptTargetingKey:"@",gptTargetingValue:"=",gptSizeMapping:"@"}}}var c,d;return d=1,c={RSB:[{viewport:[992,0],adSize:[160,600]},{viewport:[991,0],adSize:[]}],RESPONSIVE_LANDSCAPE:[{viewport:[991,0],adSize:[460,100]},{viewport:[0,0],adSize:[290,110]}]},["$log","$window","$rootScope","$location","gptService","omnitureService",b]}),define("bb/ui/ad/gpt-service",[],function(){"use strict";function a(a,c,d,e){function f(){var a,b,c,d;b=h.sizeMapping().addSize([1024,500],[[728,90],[970,90]]).addSize([768,400],[728,90]).addSize([470,400],[[320,100],[320,50]]).addSize([360,400],[[320,100],[320,50]]).addSize([0,0],[320,50]).build(),c=h.sizeMapping().addSize([1024,500],[160,600]).addSize([0,0],[]).build(),d=h.sizeMapping().addSize([1024,500],[]).addSize([768,400],[300,250]).addSize([470,400],[300,250]).addSize([360,400],[300,250]).addSize([0,0],[300,250]).build(),a={mapping1:b,mapping2:c,mapping3:d},m.resolve(a)}function g(){h.pubads().enableAsyncRendering(),h.pubads().enableSingleRequest(),h.enableServices(),h.pubads().addEventListener("slotRenderEnded",function(){e.$emit("gpt.renderEnded")}),l.resolve()}var h,i,j,k={},l=a.defer(),m=a.defer(),n=[],o=[];return d.googletag||j||(j=!0,i=document.createElement("script"),i.async=!0,i.src=b,document.getElementsByTagName("head")[0].appendChild(i)),d.googletag=d.googletag||{},h=d.googletag,h.cmd=h.cmd||[],h.cmd.push(f),k.getGPT=function(){return h},k.getMappings=function(){return m.promise},k.addSlotId=function(a){return n.push(a),l.promise},k.addSlot=function(a){o.push(a),n.length===o.length&&h.cmd.push(g)},k}var b="https://www.googletagservices.com/tag/js/gpt.js";return["$q","$log","$window","$rootScope",a]}),define("bb/ui/ad/krux",["bb/util/browser/get-meta"],function(a){"use strict";function b(b){function c(){d.init=function(){};var c,e,f,g,h,i,j=console;c=a("bb:krux-enabled"),c&&"disabled"===c?(j.debug("Krux script disabled"),e=!1):e=!0,e&&(window.Krux||(window.Krux=function(){window.Krux.q.push(arguments)},window.Krux.q=[]),f=document.createElement("script"),f.async=!0,g=location.href.match(/\bkxsrc=([^&]+)/),h=g&&decodeURIComponent(g[1]),/^https?:\/\/([a-z0-9_\-.]+\.)?krxd\.net(:\d{1,5})?\/controltag\//i.test(h)?f.src=h:"disable"===h?(f.src="",j.debug("Krux script disabled")):location.protocol.match(/^http/)?(j.debug("Krux script enabled"),f.src=location.protocol+"//cdn.krxd.net/controltag?confid=qwl07xk6i"):j.debug("Skipping Krux script. Protocol %s not supported.",location.protocol),f.src&&(j.debug("Adding Krux script %s",f.src),i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(f,i)),function(){function a(a){var b,c,d="kxbodybuilding_"+a;return c=function(){try{return window.localStorage}catch(a){return null}}(),c?c[d]||"":navigator.cookieEnabled?(b=document.cookie.match(d+"=([^;]*)"),b&&unescape(b[1])||""):""}var c;window.Krux.user=a("user"),window.Krux.segments=a("segs")?a("segs").split(","):[],c=b.getGPT(),c.cmd.push(function(){c.pubads().setTargeting("ksg",window.Krux.segments).setTargeting("kuid",window.Krux.user)})}())}var d={init:c};return d}return["gptService",b]}),define("bb/ui/ad/package",["angular","bb/ui/ad/ad","bb/ui/ad/gpt-service","bb/ui/ad/krux","bb/ui/services/tracking/package"],function(a,b,c,d){"use strict";var e=a.module("bb.ui.ad",["bb.ui.services.tracking"]);e.service("gptService",c),e.service("kruxService",d),e.directive("bbGpt",b)}),define("bb/ui/cart/views",[],{init:function(a){"use strict";a.put("bb/ui/cart/mini-cart.html",'<a ng-href="{{cartHref || \'https://www.bodybuilding.com/store/commerce/cart.jsp?track=fallback\'}}" data-bb-action=view-cart data-bb-label="View Cart" rel="cart nofollow" class=MiniCart__link><span ng-if=cart.count class=MiniCart__count>{{cart.count}} </span><span class="MiniCart__icon Icon-cart"></span></a>')}}),define("bb/ui/cart/mini-cart",[],function(){"use strict";function a(a){return{restrict:"E",scope:{cartHref:"@"},templateUrl:"bb/ui/cart/mini-cart.html",controller:["$scope",function(b){b.cart=a.cart}]}}return["miniCartService",a]}),define("bb/ui/cart/mini-cart-service",[],function(){"use strict";function a(a){var b={cart:{count:0,items:[]}};return void 0!==a.commerceItemCount&&(b.cart.count=a.commerceItemCount),b}return["$cookies",a]}),define("bb/ui/cart/package",["angular","bb/ui/cart/views","bb/ui/cart/mini-cart","bb/ui/cart/mini-cart-service","angular-cookies"],function(a,b,c,d){"use strict";var e=a.module("bb.ui.cart",["ngCookies"]);return e.run(["$templateCache",b.init]),e.directive("bbMiniCart",c),e.service("miniCartService",d),e}),define("bb/ui/country-select/views",[],{init:function(a){"use strict";a.put("bb/ui/country-select/country-select-content.ng.html",'<div class=country-select><div ng-if=!isLoading><strong>Quick Links</strong><ul class=country-select__countries><li class="country-select__country country-select__country--suggested" ng-if=countries.suggestedCountry.selectUrl><a href ng-click=changeCountry(countries.suggestedCountry) data-bb-action=change-country data-bb-label="Select suggested country"><img ng-src="{{ countries.suggestedCountry.flagUrl }}" class=country-select__country-flag height=20 width=30> {{ countries.suggestedCountry.name }}</a></li><li class="country-select__country country-select__country--preferred" ng-if="countries.preferredCountry.selectUrl && !countries.suggestedCountry.selectUrl"><a href ng-click=changeCountry(countries.preferredCountry) data-bb-action=change-country data-bb-label="Select preferred country"><img ng-src="{{ countries.preferredCountry.flagUrl }}" class=country-select__country-flag height=20 width=30> {{ countries.preferredCountry.name }}</a></li><li class="country-select__country country-select__country--popular" ng-repeat="country in countries.popularCountries track by country.name"><a href ng-click=changeCountry(country) data-bb-action=change-country data-bb-label="Select country"><img ng-src="{{ country.flagUrl }}" class=country-select__country-flag height=20 width=30> {{ country.name }}</a></li></ul><strong>All Countries</strong><div ng-repeat="(letter, countries) in countries.allCountries track by letter">{{ letter }}<ul class="country-select__countries country-select__countries--all"><li class="country-select__country country-select__country--all" ng-repeat="country in countries track by country.name"><a href ng-click=changeCountry(country) data-bb-action=change-country data-bb-label="Select country">{{ country.name }}</a></li></ul></div></div><div class=country-select__loading ng-if=isLoading>Loading&hellip;</div></div>'),a.put("bb/ui/country-select/country-select-dialog.ng.html","<bb-dialog type=lightbox size=large tracking-name=countrySelectDialog click-to-dismiss><bb-dialog-header><div class=bb-dialog__title>Select Country</div></bb-dialog-header><bb-dialog-content><bb-country-select-content></bb-country-select-content></bb-dialog-content></bb-dialog>")}}),define("lodash/lang/isString",["../internal/isObjectLike"],function(a){function b(b){return"string"==typeof b||a(b)&&e.call(b)==c}var c="[object String]",d=Object.prototype,e=d.toString;return b}),define("lodash/support",[],function(){var a=Array.prototype,b=Error.prototype,c=Object.prototype,d=c.propertyIsEnumerable,e=a.splice,f={};return function(a){var c=function(){this.x=a},g={0:a,length:a},h=[];c.prototype={valueOf:a,y:a};for(var i in new c)h.push(i);f.enumErrorProps=d.call(b,"message")||d.call(b,"name"),f.enumPrototypes=d.call(c,"prototype"),f.nonEnumShadows=!/valueOf/.test(h),f.ownLast="x"!=h[0],f.spliceObjects=(e.call(g,0,1),!g[0]),f.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),f}),define("lodash/internal/toObject",["../lang/isObject","../lang/isString","../support"],function(a,b,c){function d(d){if(c.unindexedChars&&b(d)){for(var e=-1,f=d.length,g=Object(d);++e<f;)g[e]=d.charAt(e);return g}return a(d)?d:Object(d)}return d}),define("lodash/internal/baseGet",["./toObject"],function(a){function b(b,d,e){if(null!=b){b=a(b),e!==c&&e in b&&(d=[e]);for(var f=0,g=d.length;null!=b&&f<g;)b=a(b)[d[f++]];return f&&f==g?b:c}}var c;return b}),define("lodash/internal/isLength",[],function(){function a(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=b}var b=9007199254740991;return a}),define("lodash/lang/isArray",["../internal/getNative","../internal/isLength","../internal/isObjectLike"],function(a,b,c){var d="[object Array]",e=Object.prototype,f=e.toString,g=a(Array,"isArray"),h=g||function(a){return c(a)&&b(a.length)&&f.call(a)==d};return h}),define("lodash/internal/toPath",["./baseToString","../lang/isArray"],function(a,b){function c(c){if(b(c))return c;var f=[];return a(c).replace(d,function(a,b,c,d){f.push(c?d.replace(e,"$1"):b||a)}),f}var d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,e=/\\(\\)?/g;return c}),define("lodash/object/get",["../internal/baseGet","../internal/toPath"],function(a,b){function c(c,e,f){var g=null==c?d:a(c,b(e),e+"");return g===d?f:g}var d;return c}),define("lodash/internal/arraySome",[],function(){function a(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}return a}),define("lodash/internal/equalArrays",["./arraySome"],function(a){function b(b,d,e,f,g,h,i){var j=-1,k=b.length,l=d.length;if(k!=l&&!(g&&l>k))return!1;for(;++j<k;){var m=b[j],n=d[j],o=f?f(g?n:m,g?m:n,j):c;if(o!==c){if(o)continue;return!1}if(g){if(!a(d,function(a){return m===a||e(m,a,f,g,h,i)}))return!1}else if(m!==n&&!e(m,n,f,g,h,i))return!1}return!0}var c;return b}),define("lodash/internal/equalByTag",[],function(){function a(a,h,i){switch(i){case b:case c:return+a==+h;case d:return a.name==h.name&&a.message==h.message;case e:return a!=+a?h!=+h:a==+h;case f:case g:return a==h+""}return!1}var b="[object Boolean]",c="[object Date]",d="[object Error]",e="[object Number]",f="[object RegExp]",g="[object String]";return a}),define("lodash/internal/baseProperty",["./toObject"],function(a){function b(b){return function(d){return null==d?c:a(d)[b]}}var c;return b}),define("lodash/internal/getLength",["./baseProperty"],function(a){var b=a("length");return b}),define("lodash/internal/isArrayLike",["./getLength","./isLength"],function(a,b){function c(c){return null!=c&&b(a(c))}return c}),define("lodash/lang/isArguments",["../internal/isArrayLike","../internal/isObjectLike"],function(a,b){function c(c){return b(c)&&a(c)&&e.call(c,"callee")&&!f.call(c,"callee")}var d=Object.prototype,e=d.hasOwnProperty,f=d.propertyIsEnumerable;return c}),define("lodash/internal/isIndex",[],function(){function a(a,d){return a="number"==typeof a||b.test(a)?+a:-1,d=null==d?c:d,a>-1&&a%1==0&&a<d}var b=/^\d+$/,c=9007199254740991;return a}),define("lodash/internal/arrayEach",[],function(){function a(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}return a}),define("lodash/object/keysIn",["../internal/arrayEach","../lang/isArguments","../lang/isArray","../lang/isFunction","../internal/isIndex","../internal/isLength","../lang/isObject","../lang/isString","../support"],function(a,b,c,d,e,f,g,h,i){function j(a){if(null==a)return[];g(a)||(a=Object(a));var j=a.length;j=j&&f(j)&&(c(a)||b(a)||h(a))&&j||0;for(var k=a.constructor,l=-1,m=d(k)&&k.prototype||v,o=m===a,p=Array(j),r=j>0,A=i.enumErrorProps&&(a===u||a instanceof Error),B=i.enumPrototypes&&d(a);++l<j;)p[l]=l+"";for(var C in a)B&&"prototype"==C||A&&("message"==C||"name"==C)||r&&e(C,j)||"constructor"==C&&(o||!x.call(a,C))||p.push(C);if(i.nonEnumShadows&&a!==v){var D=a===w?s:a===u?n:y.call(a),E=z[D]||z[q];for(D==q&&(m=v),j=t.length;j--;){C=t[j];var F=E[C];o&&F||(F?!x.call(a,C):a[C]===m[C])||p.push(C)}}return p}var k="[object Array]",l="[object Boolean]",m="[object Date]",n="[object Error]",o="[object Function]",p="[object Number]",q="[object Object]",r="[object RegExp]",s="[object String]",t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],u=Error.prototype,v=Object.prototype,w=String.prototype,x=v.hasOwnProperty,y=v.toString,z={};return z[k]=z[m]=z[p]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},z[l]=z[s]={constructor:!0,toString:!0,valueOf:!0},z[n]=z[o]=z[r]={constructor:!0,toString:!0},z[q]={constructor:!0},a(t,function(a){for(var b in z)if(x.call(z,b)){var c=z[b];c[a]=x.call(c,a)}}),j}),define("lodash/internal/shimKeys",["../lang/isArguments","../lang/isArray","./isIndex","./isLength","../lang/isString","../object/keysIn"],function(a,b,c,d,e,f){function g(g){for(var h=f(g),j=h.length,k=j&&g.length,l=!!k&&d(k)&&(b(g)||a(g)||e(g)),m=-1,n=[];++m<j;){var o=h[m];(l&&c(o,k)||i.call(g,o))&&n.push(o)}return n}var h=Object.prototype,i=h.hasOwnProperty;return g}),define("lodash/object/keys",["../internal/getNative","../internal/isArrayLike","../lang/isObject","../internal/shimKeys","../support"],function(a,b,c,d,e){var f,g=a(Object,"keys"),h=g?function(a){var h=null==a?f:a.constructor;return"function"==typeof h&&h.prototype===a||("function"==typeof a?e.enumPrototypes:b(a))?d(a):c(a)?g(a):[]}:d;return h}),define("lodash/internal/equalObjects",["../object/keys"],function(a){function b(b,d,f,g,h,i,j){var k=a(b),l=k.length,m=a(d),n=m.length;if(l!=n&&!h)return!1;for(var o=l;o--;){var p=k[o];if(!(h?p in d:e.call(d,p)))return!1}for(var q=h;++o<l;){p=k[o];var r=b[p],s=d[p],t=g?g(h?s:r,h?r:s,p):c;if(!(t===c?f(r,s,g,h,i,j):t))return!1;q||(q="constructor"==p)}if(!q){var u=b.constructor,v=d.constructor;if(u!=v&&"constructor"in b&&"constructor"in d&&!("function"==typeof u&&u instanceof u&&"function"==typeof v&&v instanceof v))return!1}return!0}var c,d=Object.prototype,e=d.hasOwnProperty;return b}),define("lodash/lang/isTypedArray",["../internal/isLength","../internal/isObjectLike"],function(a,b){function c(c){return b(c)&&a(c.length)&&!!A[C.call(c)]}var d="[object Arguments]",e="[object Array]",f="[object Boolean]",g="[object Date]",h="[object Error]",i="[object Function]",j="[object Map]",k="[object Number]",l="[object Object]",m="[object RegExp]",n="[object Set]",o="[object String]",p="[object WeakMap]",q="[object ArrayBuffer]",r="[object Float32Array]",s="[object Float64Array]",t="[object Int8Array]",u="[object Int16Array]",v="[object Int32Array]",w="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",z="[object Uint32Array]",A={};A[r]=A[s]=A[t]=A[u]=A[v]=A[w]=A[x]=A[y]=A[z]=!0,A[d]=A[e]=A[q]=A[f]=A[g]=A[h]=A[i]=A[j]=A[k]=A[l]=A[m]=A[n]=A[o]=A[p]=!1;var B=Object.prototype,C=B.toString;return c}),define("lodash/internal/baseIsEqualDeep",["./equalArrays","./equalByTag","./equalObjects","../lang/isArray","./isHostObject","../lang/isTypedArray"],function(a,b,c,d,e,f){function g(g,k,n,o,p,q,r){var s=d(g),t=d(k),u=i,v=i;s||(u=m.call(g),u==h?u=j:u!=j&&(s=f(g))),t||(v=m.call(k),v==h?v=j:v!=j&&(t=f(k)));var w=u==j&&!e(g),x=v==j&&!e(k),y=u==v;if(y&&!s&&!w)return b(g,k,u);if(!p){var z=w&&l.call(g,"__wrapped__"),A=x&&l.call(k,"__wrapped__");if(z||A)return n(z?g.value():g,A?k.value():k,o,p,q,r)}if(!y)return!1;q||(q=[]),r||(r=[]);for(var B=q.length;B--;)if(q[B]==g)return r[B]==k;q.push(g),r.push(k);var C=(s?a:c)(g,k,n,o,p,q,r);return q.pop(),r.pop(),C}var h="[object Arguments]",i="[object Array]",j="[object Object]",k=Object.prototype,l=k.hasOwnProperty,m=k.toString;return g}),define("lodash/internal/baseIsEqual",["./baseIsEqualDeep","../lang/isObject","./isObjectLike"],function(a,b,c){function d(e,f,g,h,i,j){return e===f||(null==e||null==f||!b(e)&&!c(f)?e!==e&&f!==f:a(e,f,d,g,h,i,j))}return d}),define("lodash/internal/baseIsMatch",["./baseIsEqual","./toObject"],function(a,b){function c(c,e,f){var g=e.length,h=g,i=!f;if(null==c)return!h;for(c=b(c);g--;){var j=e[g];if(i&&j[2]?j[1]!==c[j[0]]:!(j[0]in c))return!1}for(;++g<h;){j=e[g];var k=j[0],l=c[k],m=j[1];if(i&&j[2]){if(l===d&&!(k in c))return!1}else{var n=f?f(l,m,k):d;if(!(n===d?a(m,l,f,!0):n))return!1}}return!0}var d;return c}),define("lodash/internal/isStrictComparable",["../lang/isObject"],function(a){function b(b){return b===b&&!a(b)}return b}),define("lodash/object/pairs",["./keys","../internal/toObject"],function(a,b){function c(c){c=b(c);for(var d=-1,e=a(c),f=e.length,g=Array(f);++d<f;){var h=e[d];g[d]=[h,c[h]]}return g}return c}),define("lodash/internal/getMatchData",["./isStrictComparable","../object/pairs"],function(a,b){function c(c){for(var d=b(c),e=d.length;e--;)d[e][2]=a(d[e][1]);return d}return c}),define("lodash/internal/baseMatches",["./baseIsMatch","./getMatchData","./toObject"],function(a,b,c){function d(d){var f=b(d);if(1==f.length&&f[0][2]){var g=f[0][0],h=f[0][1];return function(a){return null!=a&&(a=c(a),a[g]===h&&(h!==e||g in a))}}return function(b){return a(b,f)}}var e;return d}),define("lodash/internal/baseSlice",[],function(){function a(a,c,d){var e=-1,f=a.length;c=null==c?0:+c||0,c<0&&(c=-c>f?0:f+c),d=d===b||d>f?f:+d||0,d<0&&(d+=f),f=c>d?0:d-c>>>0,c>>>=0;for(var g=Array(f);++e<f;)g[e]=a[e+c];return g}var b;return a}),define("lodash/internal/isKey",["../lang/isArray","./toObject"],function(a,b){function c(c,f){var g=typeof c;if("string"==g&&e.test(c)||"number"==g)return!0;if(a(c))return!1;var h=!d.test(c);return h||null!=f&&c in b(f)}var d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,e=/^\w*$/;return c}),define("lodash/array/last",[],function(){function a(a){var c=a?a.length:0;return c?a[c-1]:b}var b;return a}),define("lodash/internal/baseMatchesProperty",["./baseGet","./baseIsEqual","./baseSlice","../lang/isArray","./isKey","./isStrictComparable","../array/last","./toObject","./toPath"],function(a,b,c,d,e,f,g,h,i){function j(j,l){var m=d(j),n=e(j)&&f(l),o=j+"";return j=i(j),function(d){if(null==d)return!1;var e=o;if(d=h(d),(m||!n)&&!(e in d)){if(d=1==j.length?d:a(d,c(j,0,-1)),null==d)return!1;e=g(j),d=h(d)}return d[e]===l?l!==k||e in d:b(l,d[e],k,!0)}}var k;return j}),define("lodash/utility/identity",[],function(){function a(a){return a}return a}),define("lodash/internal/bindCallback",["../utility/identity"],function(a){function b(b,d,e){if("function"!=typeof b)return a;if(d===c)return b;switch(e){case 1:return function(a){return b.call(d,a)};case 3:return function(a,c,e){return b.call(d,a,c,e)};case 4:return function(a,c,e,f){return b.call(d,a,c,e,f)};case 5:return function(a,c,e,f,g){return b.call(d,a,c,e,f,g)}}return function(){return b.apply(d,arguments)}}var c;return b}),define("lodash/internal/basePropertyDeep",["./baseGet","./toPath"],function(a,b){function c(c){var d=c+"";return c=b(c),function(b){return a(b,c,d)}}return c}),define("lodash/utility/property",["../internal/baseProperty","../internal/basePropertyDeep","../internal/isKey"],function(a,b,c){function d(d){return c(d)?a(d):b(d)}return d}),define("lodash/internal/baseCallback",["./baseMatches","./baseMatchesProperty","./bindCallback","../utility/identity","../utility/property"],function(a,b,c,d,e){function f(f,h,i){var j=typeof f;return"function"==j?h===g?f:c(f,h,i):null==f?d:"object"==j?a(f):h===g?e(f):b(f,h)}var g;return f}),define("lodash/internal/createBaseFor",["./toObject"],function(a){function b(b){return function(c,d,e){for(var f=a(c),g=e(c),h=g.length,i=b?h:-1;b?i--:++i<h;){var j=g[i];if(d(f[j],j,f)===!1)break}return c}}return b}),define("lodash/internal/baseFor",["./createBaseFor"],function(a){var b=a();return b}),define("lodash/internal/baseForOwn",["./baseFor","../object/keys"],function(a,b){function c(c,d){return a(c,d,b)}return c}),define("lodash/internal/createBaseEach",["./getLength","./isLength","./toObject"],function(a,b,c){function d(d,e){return function(f,g){var h=f?a(f):0;if(!b(h))return d(f,g);for(var i=e?h:-1,j=c(f);(e?i--:++i<h)&&g(j[i],i,j)!==!1;);return f}}return d}),define("lodash/internal/baseEach",["./baseForOwn","./createBaseEach"],function(a,b){var c=b(a);return c}),define("lodash/internal/createAggregator",["./baseCallback","./baseEach","../lang/isArray"],function(a,b,c){function d(d,e){return function(f,g,h){var i=e?e():{};if(g=a(g,h,3),c(f))for(var j=-1,k=f.length;++j<k;){var l=f[j];d(i,l,g(l,j,f),f)}else b(f,function(a,b,c){d(i,a,g(a,b,c),c)});return i}}return d}),define("lodash/collection/groupBy",["../internal/createAggregator"],function(a){var b=Object.prototype,c=b.hasOwnProperty,d=a(function(a,b,d){c.call(a,d)?a[d].push(b):a[d]=[b]});return d}),define("bb/ui/country-select/country-select-service",["lodash/object/get","lodash/collection/groupBy"],function(a,b){"use strict";function c(c,d,e,f,g){function h(){return g.getPopularCountries().then(l)}function i(){return g.getPreferredCountry().then(l,function(){return null})}function j(){return g.getSuggestedCountry().then(l,function(){return null})}function k(){return g.getAllCountries().then(function(a){return b(l(a),function(a){return a.name.charAt(0).toUpperCase()})})}function l(a){return Array.isArray(a)?a.map(m):m(a)}function m(b){return{name:b.name,code:b.iso3166Code,flagUrl:a(b,'_links["bb:image-flag"][0].href',""),selectUrl:a(b,'_links["bb:select"].href',"")}}var n={};return n.setHeaders=function(a){g.setHeaders(a)},n.getCountries=function(){return c.all({popularCountries:h(),preferredCountry:i(),suggestedCountry:j(),allCountries:k()})},n.changeCountry=function(a){return f.getNewCsrf().then(function(b){var c=e.parse(a,{CSRF:b});return d.post(c)})},n}return["$q","$http","URITemplate","storeCsrfService","storeCountryService",c]}),define("bb/ui/country-select/country-select-dialog",[],function(){"use strict";function a(a){function b(b,c){var d=c.find("bb-dialog");a.$on("country-select.show",function(){d.controller("bbDialog").dialogOpen()}),a.$on("country-select.hide",function(){d.controller("bbDialog").dialogClose()})}var c={};return c={restrict:"E",templateUrl:"bb/ui/country-select/country-select-dialog.ng.html",scope:{},link:b}}return["$rootScope",a]}),define("bb/ui/country-select/country-select-content",[],function(){"use strict";function a(a,b,c,d){var e;return e={restrict:"E",templateUrl:"bb/ui/country-select/country-select-content.ng.html",scope:{}},e.link=function(a){a.isLoading=!0,a.countries={},c.getCountries().then(function(b){a.isLoading=!1,a.countries=b}),a.changeCountry=function(a){var e=a.code,f=a.selectUrl,g=b.ie11||b.ie10;c.changeCountry(f).then(function(){var a;g?(a=(location.search?"&":"?")+"reload="+e,d.assign(location.href+a)):d.reload(!0)})}},e}return["$window","uaService","countrySelectService","locationService",a]}),define("bb/ui/country-select/country-select-trigger",[],function(){"use strict";function a(a,b){function c(){var a=b.location.hostname.search(/(.*\.)?bodybuilding\.com/)>-1;return a}function d(b,d){d.on("click",function(d){c()&&(d.preventDefault(),b.$apply(function(){a.$emit("country-select.show")}))})}var e={};return e={restrict:"CA",link:d}}return["$rootScope","$window",a]}),define("bb/ui/country-select/country-service",["angular"],function(a){"use strict";function b(b,c){function d(){return k("bb:store-preferred")}function e(){return k("bb:store-suggested")}function f(){return k("bb:store-popular")}function g(){return k("bb:stores").then(function(a){return a.embedded("item")})}function h(b){a.extend(l,b)}function i(){return l}function j(){return m=m||new c(b({method:"GET",url:n,headers:l,cache:!0}))}function k(a){var b={cache:!0,headers:l};return j().then(function(d){return d.follow([{rel:"bb:preference",config:b,filter:c.filter.on("name","preferred-store")},{rel:a,config:b}])})}var l,m,n="https://store.bodybuilding.com/wrapper",o={};return l={"BB-App":"wrapper-app, 1.1.1",Accept:"application/hal+json;q=.9,text/html;q=.5"},o.getPreferredCountry=d,o.getSuggestedCountry=e,o.getPopularCountries=f,o.getAllCountries=g,o.setHeaders=h,o.getHeaders=i,o}return["$http","HALResource",b]}),define("bb/ui/country-select/csrf-service",[],function(){
"use strict";function a(a,b,c){function d(){return f=f||new c(a({method:"GET",url:g,headers:e,cache:!0}))}var e,f,g="https://store.bodybuilding.com/wrapper",h={};return e={"BB-App":"wrapper-app, 1.1.1",Accept:"application/hal+json;q=.9,text/html;q=.5"},h.getCsrf=function(){var a=h.csrf;return a?b.when(a):h.getNewCsrf()},h.getNewCsrf=function(){var a={rel:"bb:csrf",config:{headers:e}};return d().then(function(b){return b.follow(a)}).then(function(a){var c=a&&a.csrf;return c?(h.csrf=c,c):b.reject({})})},h}return["$http","$q","HALResource",a]}),define("bb/ui/services/hal/hal-resource",["angular"],function(a){"use strict";function b(b,e,f,g){function h(b,c){var d,e=new g(b),f=a.copy(c);for(d in f)e.requires(d)&&delete c[d];return e.expand(f)}function i(b){function d(b){function g(b){var c,e;return o._embedded&&(e="string"==typeof b?o._embedded[b]:o._embedded[b.rel],"function"==typeof b.filter&&a.isArray(e)?(e=e.filter(b.filter),1===e.length?(e=e[0],c=new d(e)):c=e.map(function(a){return new d(a)})):c=a.isArray(e)?e.map(function(a){return new d(a)}):new d(e)),c}function j(b){var c,d;return d="string"==typeof b?o._links[b]:o._links[b.rel],"function"==typeof b.filter&&a.isArray(d)?(d=d.filter(b.filter),c=1===d.length?d[0]:d):c=d,c}function k(b){var c,d,f;return c=j(b),d=c.templated?h(c.href,b.config.params):c.href,f={url:d},a.extend(f,b.config||{}),new i(e(f))}function l(a){var b=f.defer();return b.reject({msg:"rel ["+a.rel+"] not found!",rel:a}),new i(b.promise)}function m(b,d){function e(a){b.length>0?a.follow(b,d):d.resolve(a)}function h(a){d.reject(a)}var i;return d||(d=f.defer()),i=b.shift(),"string"==typeof i&&(i={rel:i,config:a.extend({},{headers:c})}),o.hasEmbedded(i.rel)?e(g(i)):o.hasLink(i.rel)?k(i).then(e).catch(h):d.reject(l(i)),d.promise}var n={loaded:!1,err:!1},o=this;return o._state=n,a.extend(o,b),o.hasEmbedded=function(a){return o._embedded&&o._embedded[a]},o.hasLink=function(a){return o._links&&o._links[a]},o.embedded=g,o.link=j,o.selfLink=function(){return o.link("self")},o.follow=function(b,c){var d;return a.isArray(b)?d=m(b,c):"object"==typeof b?d=m([b],c):"string"==typeof b&&(d=m([{rel:b}],c)),d},o}var g,j=f.defer();return b.then(function(a){return g=new d(a.data),g._state.loaded=!0,g._state.response=a,j.resolve(g),g}).catch(function(a){return g=new d(a),g._state.err=a,j.reject(g),g}),j.promise}function j(b,d){var f=a.extend({url:b},d);return f.headers=a.extend({},c,f.headers),new i(e(f))}return i.APP_HAL_JSON=d,i.DEFAULT_HEADERS=c,i.fromRoot=function(a,b,c){var d,e,g;return d=j(a,c),b?(g=f.defer(),d.then(function(a){g.resolve(a.follow(b))}).catch(function(a){g.reject(a)}),e=g.promise):e=d,e},i.filter={on:function(b,c){return function(d){var e;return e=a.isArray(c)&&c?c.indexOf(d[b])>-1:d[b]===c}},onName:function(){var a=Array.prototype.slice.call(arguments);return i.filter.on("name",a)}},i}var c,d="application/hal+json";return c={accept:d},["$log","$http","$q","URITemplate",b]}),define("bb/ui/services/uri-template/uri-template",[],function(){"use strict";function a(a){function b(b){this.uri=b,this.parsed=a.parse(b)}return b.parse=function(a,c){var d=new b(a);return c?d.expand(c):d},b.prototype.expand=function(a){return this.parsed.expand(a)},b.prototype.requires=function(a){var b=this.parsed._expressions||[];return b.some(function(b){var c=b.components;if(c)return c.some(function(b){return b.name===a})})},b}return["UriTemplate",a]}),function(a){define("angular-uri-templates",["angular"],function(){return function(){angular.module("uri-template",[]).service("UriTemplate",function(){function a(a){this.string=a}function b(a){this.string=a,e.indexOf(a.charAt(0))!==-1&&(this.operator=a.charAt(0),a=a.substring(1)),this.components=[],angular.forEach(a.split(","),function(a){this.components.push(new c(a,this.operator))},this)}function c(a,b){this.operator=b;var c=a.split(":",-2);c.length>1?(this.name=c[0],this.limit=parseInt(c[1],10)):this.name=a,"*"==this.name.charAt(this.name.length-1)&&(this.name=this.name.substring(0,this.name.length-1),this.splat=!0)}function d(c){this.string=c;var d=this._expressions=[];angular.forEach(c.split("{"),function(c,e){c.indexOf("}")!==-1?(c=c.split("}",2),new b(c[0]).append(d),new a(c[1]).append(d)):new a(c).append(d)})}var e=["+","#",".","/",";","?","&"],f={append:function(a){this.string.length>0&&a.push(this)},isUnfulfillable:function(a){return!1},score:function(a){return 0}};a.prototype=Object.create(f),a.prototype.constructor=a,a.prototype.expand=function(){return this.string},b.prototype=Object.create(f),b.prototype.constructor=b,b.prototype.expand=function(a){var b=[];return angular.forEach(this.components,function(c){var d=c.expand(a);c.splat?angular.forEach(d,function(a,c){angular.isArray(a)?angular.forEach(a,function(a){";"===this.operator||"?"===this.operator||"&"===this.operator?b.push(c+"="+a):b.push(a)},this):b.push(c+"="+a)},this):";"==this.operator||"?"==this.operator||"&"==this.operator?angular.forEach(d,function(a,c){";"==this.operator&&("undefined"==typeof a||a.toString().length<1)?b.push(c):(b.length||"undefined"!=typeof a&&a.toString().length>=1)&&b.push(c+"="+a)},this):angular.forEach(d,function(a){b.push(a)})},this),b.join("").length?(b="."==this.operator||"/"==this.operator||";"==this.operator||"&"==this.operator?b.join(this.operator):"?"==this.operator?b.join("&"):b.join(","),"undefined"!=typeof this.operator&&"+"!==this.operator&&(b=this.operator+b),b):""},b.prototype.score=function(a){var b=0;return angular.forEach(this.components,function(c){b+=c.score(a)}),b},b.prototype.isUnfulfillable=function(a){if("+"!==this.operator&&"undefined"!=typeof this.operator)return!1;var b=!1;return angular.forEach(this.components,function(c){!b&&c.score(a)>0&&(b=!0)}),!b},c.prototype.expand=function(a){var b={};if("undefined"!=typeof a[this.name]){var c=this.limited(a[this.name]),d=!1;this.splat&&!angular.isArray(c)||(d=!0,b[this.name]=[]),angular.forEach(c,function(a,c){d?b[this.name][c]=this.escape(a):b[c]=this.escape(a)},this)}return b},c.prototype.escape=function(a){return"+"==this.operator||"#"==this.operator?encodeURI(a):encodeURIComponent(a).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},c.prototype.limited=function(a){if(a.length>this.limit)return[a.substring(0,this.limit)];if(angular.isArray(a))return a;if(!this.splat&&angular.isObject(a)){var b=[];return angular.forEach(a,function(a,c){b.push(c),b.push(a)}),b}return angular.isObject(a)?a:[a]},c.prototype.score=function(a){return"undefined"!=typeof a[this.name]?1:0},d.prototype.expand=function(a){var b=[],c=!1;return a=a||{},angular.forEach(this._expressions,function(d){c||(d.isUnfulfillable(a)?c=!0:b.push(d.expand(a)))}),c?void 0:b.join("")},d.prototype.score=function(a){var b=0;a=a||{},angular.forEach(this._expressions,function(c){b!=-1&&(c.isUnfulfillable(a)?b=-1:b+=c.score(a))});var c=0;return angular.forEach(a,function(){c+=1}),c=Math.min(c,2*b),b-.1*(c-b)},d.prototype.toString=function(){return this.string},this.parse=function(a){return new d(a)}})}.apply(a,arguments)})}(this),define("bb/ui/services/uri-template/package",["angular","./uri-template","angular-uri-templates"],function(a,b){"use strict";return a.module("bb.ui.services.uri-template",["uri-template"]).factory("URITemplate",b)}),define("bb/ui/services/hal/package",["angular","./hal-resource","bb/ui/services/uri-template/package"],function(a,b){"use strict";return a.module("bb.ui.services.hal",["bb.ui.services.uri-template"]).factory("HALResource",b)}),define("bb/ui/country-select/package",["angular","./views","./country-select-service","./country-select-dialog","./country-select-content","./country-select-trigger","./country-service","./csrf-service","bb/ui/services/hal/package","bb/ui/core/dialog","bb/ui/util/package"],function(a,b,c,d,e,f,g,h){"use strict";var i=a.module("bb.ui.country-select",["bb.ui.util","bb.ui.core","bb.ui.services.hal"]);return i.factory("countrySelectService",c),i.directive("bbCountrySelectDialog",d),i.directive("bbCountrySelectContent",e),i.directive("storeSelectorModal",f),i.service("storeCsrfService",h),i.service("storeCountryService",g),i.run(["$templateCache",b.init]),i}),define("bb/ui/geoip/views",[],{init:function(a){"use strict";a.put("bb/ui/geoip/geoip-content.ng.html",'<div class="goip-modal rounded3"><div><div class=goip-modal__row><img ng-src={{suggestedCountry.flagUrl}}></div><div class="goip-modal__row goip-modal__currentStoreTag">Are you in {{suggestedCountry.name}}?</div><div class=goip-modal__row><button ng-click=changeCountry(suggestedCountry) class="bb-flat-btn bb-flat-btn--wider goip-modal__makeMyStoreButton">YES</button></div><div class=goip-modal__row><a href=https://www.bodybuilding.com/store/common/store/change-store.jsp store-selector-modal data-url="https://www.bodybuilding.com/store/common/ajax/catalog/modal-store-selector.jsp?redirect=/store/&amp;geoIpPersistence=true" ng-click=closeGeoipModal()>No - Choose a different country</a></div></div></div>'),a.put("bb/ui/geoip/geoip-dialog.ng.html","<bb-dialog tracking-name=geoipDialog><bb-dialog-header><div class=bb-dialog__title>SELECT YOUR COUNTRY</div></bb-dialog-header><bb-dialog-content><bb-geoip-content countries=geoipScope.countries></bb-geoip-content></bb-dialog-content><bb-dialog-footer><div class=goip-modal__actions><a class=goip-modal__goipModalNoThanks href=# ng-click=dialogClose()>No Thanks</a></div></bb-dialog-footer></bb-dialog>")}}),define("bb/ui/geoip/geoip-dialog",["angular"],function(a){"use strict";function b(){function b(b,c,d,e,f){function g(b){a.extend(h,i,b)}var h,i,j=c.find("bb-dialog");h={},i={countries:null},b.geoipScope=h,d.$on("geoip.show",function(a,b){g(b),j.controller("bbDialog").dialogOpen()}),d.$on("geoip.hide",function(){j.controller("bbDialog").dialogClose()}),f.start()}var c={restrict:"EA",templateUrl:"bb/ui/geoip/geoip-dialog.ng.html"};return c.controller=["$scope","$element","$rootScope","$window","geoipLoadService",b],c}return b}),define("bb/ui/geoip/geoip-content",[],function(){"use strict";function a(a,b,c,d,e){var f;return f={restrict:"E",templateUrl:"bb/ui/geoip/geoip-content.ng.html",scope:{countries:"="}},f.link=function(f){f.suggestedCountry=f.countries&&f.countries.suggestedCountry,f.changeCountry=function(b){var f=b.code,g=b.selectUrl,h=c.ie11||c.ie10;d.changeCountry(g).then(function(){var b;h?(b=(a.location.search?"&":"?")+"reload="+f,e.assign(a.location.href+b)):e.reload(!0)})},f.closeGeoipModal=function(){b.$emit("geoip.hide")}},f}return["$window","$rootScope","uaService","countrySelectService","locationService",a]}),define("bb/util/objects",[],function(){"use strict";var a,b={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isString:function(a){return"string"==typeof a},isDate:function(a){return"[object Date]"===Object.prototype.toString.call(a)},isNumber:function(a){return"number"==typeof a}};return a=window.angular?window.angular.equals:window._&&window._.equals?window._.equals:window.jQuery?window.jQuery.equals:function(b,c){var d=!0;return b!==c&&(d=Object.prototype.toString.call(b)===Object.prototype.toString.call(c),d&&!function(){var e=Object.keys(b),f=Object.keys(c);d=e.length===f.length,d&&!function(){for(var f,g=e.length;g--&&(f=e[g],d=a(b[f],c[f]),d););}()}()),d},b.equals=a,b}),define("bb/util/strings",["bb/util/objects"],function(a){"use strict";function b(a){var b,c;return c=a.indexOf("?"),b=c>-1?a.substring(c+1):""}function c(b){var c,d={};return b&&(c=b.split("&"),c.forEach(function(b){var c,e,f;c=b.split("="),e=c[0],c.length>1?(f=decodeURIComponent(c[1]),d[e]?(a.isArray(d[e])||(d[e]=[d[e]]),d[e].push(f)):d[e]=f):d[e]=!0})),d}var d={};return d.parseQueryString=function(a){var d,e;return e=b(a),d=c(e)},d.getQueryParam=function(a,b){var c=d.parseQueryString(b);return c[a]},d.format=function(a,b){var c=/\{[^\|}]+\}/g,d=Array.prototype.slice;return"undefined"==typeof b?a:((arguments.length>2||"object"!=typeof b)&&(b=d.call(arguments),a=b.shift()),a.replace(c,function(a){var c=a.substring(1,a.length-1);return"function"==typeof b[c]?b[c]():b[c]}))},d}),define("bb/ui/geoip/geoip-load",["bb/util/strings"],function(a){"use strict";function b(b,c,d,e,f){function g(d){var g=a.getQueryParam("geo_ip_address",e.location.href);g&&b.setHeaders({GHryY5UJTGFhy:g}),d&&d.headers&&b.setHeaders(d.headers),b.getCountries().then(function(a){a.suggestedCountry?c.$emit("geoip.show",{countries:a}):f.debug("bbGeoip: suggested country not found in countrySelectService")})}var h={};return h.start=function(){var a,b;e.addEventListener&&e.addEventListener("geoipTrigger",g),b=d.get(0).querySelector('meta[name="bb:geoip-load"]'),a=b?b.getAttribute("content"):"false","true"===a&&g()},h}return["countrySelectService","$rootScope","$document","$window","$log",b]}),define("bb/ui/geoip/package",["angular","./views","./geoip-dialog","./geoip-content","./geoip-load","bb/ui/country-select/package","bb/ui/core/dialog","bb/ui/util/package"],function(a,b,c,d,e){"use strict";var f=a.module("bb.ui.geoip",["bb.ui.util","bb.ui.core","bb.ui.country-select"]);return f.directive("bbGeoipDialog",c),f.directive("bbGeoipContent",d),f.service("geoipLoadService",e),f.run(["$templateCache",b.init]),f}),define("bb/ui/login/views",[],{init:function(a){"use strict";a.put("bb/ui/login/facebook-button.ng.html",'<div class=Login__fb><button ng-click=fbBtnScope.onClick() class="bb-btn--facebook bb-btn--stretch bb-spinner-btn" data-bb-label="login with facebook" data-bb-action=login.facebook data-component=bb/ui/login/facebook-button><span bb-visible=!fbBtnScope.busy class=FacebookButton__text>{{ fbBtnScope.label }} </span><span bb-visible=fbBtnScope.busy class=bb-spinner-btn__spinner>{{ fbBtnScope.label }}</span></button><div class=Login__fb-error-msg ng-if="error.key == \'NO_ASSOCIATED_BSPACE_ACCOUNT\'">Your Facebook account is not associated with a BodySpace account. <span class=bb-link bb-emit=login.show bb-emit-params="{ \'hideFacebook\': true, \'hideSignin\': true }">Log in </span>to an existing BodySpace account or <span class=bb-link bb-emit=signup.show>create a new BodySpace account </span>.</div><div class="Login__fb-error-msg bb-form-msg--error" ng-if="error.key == \'USER_CANCELLED\'">The login did not complete. You may have clicked cancel, or your popup blocker may have blocked the Facebook login dialog. Check your popup blocker and try again.</div><div class="Login__fb-error-msg bb-form-msg--error" ng-if="error.key == \'INVALID_DATA\'">There was an error logging you in with Facebook. Try again later.</div></div>'),a.put("bb/ui/login/login.ng.html",'<div class=Login><h2 class=Login__heading>Log in to Your Account</h2><bb-facebook-button type=login redirect-url="{{ redirectURL }}" ng-hide=hideFacebook></bb-facebook-button><div ng-hide=hideFacebook class=bb-hr-with-label><div class=bb-hr-with-label__label ng-class="{ \'bb-hr-with-label__label--in-dialog\': loginScope.isInDialog }">or</div></div><div class=js-bb-login__container><div class=bb-inputs-wrap><div class=bb-input-wrap><input class="bb-input bb-input--stretch Login__username" placeholder="Email Address or Username" name=username ng-model=loginScope.credentials.username autofocus autocorrect=off autocapitalize=off></div><div class=bb-input-wrap><input class="bb-input bb-input--stretch bb-input--has-forgot-password" placeholder=Password type=password name=password ng-model=loginScope.credentials.password></div></div><div class=bb-inputs-wrap><div class="Grid-row Grid-row--valign-center"><div class="Grid-unit Grid-unit--stretch"><a class=js-forgot-password-link data-bb-action=forgot-password data-bb-label="Forgot password" href=https://www.bodybuilding.com/profile/forgot-password>Forgot your password?</a></div><div class=Grid-unit><button class="bb-flat-btn bb-flat-btn--size-md bb-spinner-btn js-login" data-bb-action=login data-bb-label=login data-component=bb/ui/login/login ng-click=loginScope.login()><span class=bb-spinner-btn__spinner bb-visible=loginScope.busyPosting>Logging In&hellip; </span><span bb-visible=!loginScope.busyPosting>Log In</span></button></div></div></div></div><div class=bb-form-msg--error ng-if=loginScope.errMsg><p ng-if="loginScope.errMsg === \'PASSWORD\'">Password is required.</p><p ng-if="loginScope.errMsg === \'USERNAME\'">Username is required.</p><p ng-if="loginScope.errMsg === \'INCORRECT\'">The username or password is incorrect.</p><p ng-if="loginScope.errMsg === \'MAYBE_OFFLINE\'">The server was not reachable. Check your network connection.</p><p ng-if="loginScope.errMsg === \'INCORRECT\'" class=bb-form-msg--info>Have you <a href=https://www.bodybuilding.com/profile/forgot-password>forgotten your username or password?</a></p></div><div ng-hide=hideSignin class="bb-well Login__well">New to Bodybuilding.com? <button class="bb-btn--plain bb-link js-signup Login__signup-link" data-bb-action=signup ng-click=loginScope.signup()>Sign up now</button></div></div>'),a.put("bb/ui/login/modal.ng.html","<bb-dialog tracking-name=login><bb-dialog-header><div class=bb-dialog__title ng-if=header.title>{{ header.title }}</div><div class=bb-dialog__subtitle ng-if=header.subtitle>{{ header.subtitle }}</div></bb-dialog-header><bb-dialog-content><bb-login reload={{reload}} redirect-url={{redirectURL}} redirect-label={{redirectLabel}} dispatch={{dispatch}} emit={{emit}} hide-facebook={{hideFacebook}} hide-signin={{hideSignin}}></bb-login></bb-dialog-content></bb-dialog>")}}),define("bb/ui/login/login-service",[],function(){"use strict";function a(a,b,c){var d={};return d.showLogin=function(a){b.$emit("login.show",a)},d.authenticationRequired=function(){var a;return a=c.isLoggedIn(),a||d.showLogin(),a},b.loginService=d,d}return["$log","$rootScope","profileService",a]}),define("bb/util/keys",[],function(){"use strict";var a={};return a.backspace=8,a.tab=9,a.enter=13,a.shift=16,a.ctrl=17,a.alt=18,a.pauseBreak=19,a.capsLock=20,a.escape=27,a.space=32,a.pageIp=33,a.pageDown=34,a.end=35,a.home=36,a.leftArrow=37,a.upArrow=38,a.rightArrow=39,a.downArrow=40,a.arrow={left:a.leftArrow,right:a.rightArrow,up:a.upArrow,down:a.downArrow},a.arrows=[a.leftArrow,a.rightArrow,a.upArrow,a.downArrow],a.insert=45,a.delete=46,a[0]=48,a[1]=49,a[2]=50,a[3]=51,a[4]=52,a[5]=53,a[6]=54,a[7]=55,a[8]=56,a[9]=57,a.a=65,a.b=66,a.c=67,a.d=68,a.e=69,a.f=70,a.g=71,a.h=72,a.i=73,a.j=74,a.k=75,a.l=76,a.m=77,a.n=78,a.o=79,a.p=80,a.q=81,a.r=82,a.s=83,a.t=84,a.u=85,a.v=86,a.w=87,a.x=88,a.y=89,a.z=90,a.leftWindowKey=91,a.rightWindowKey=92,a.selectKey=93,a.numpad0=96,a.numpad1=97,a.numpad2=98,a.numpad3=99,a.numpad4=100,a.numpad5=101,a.numpad6=102,a.numpad7=103,a.numpad8=104,a.numpad9=105,a.multiply=106,a.add=107,a.subtract=109,a.decimalPoint=110,a.divide=111,a.f1=112,a.f2=113,a.f3=114,a.f4=115,a.f5=116,a.f6=117,a.f7=118,a.f8=119,a.f9=120,a.f10=121,a.f11=122,a.f12=123,a.numLock=144,a.scrollLock=145,a.semiColon=186,a.equalSign=187,a.comma=188,a.dash=189,a.period=190,a.forwardSlash=191,a.graveAccent=192,a.openBracket=219,a.backSlash=220,a.closeBraket=221,a.singleQuote=222,a}),define("bb/ui/login/login",["angular","bb/util/keys","bb/util/strings","@bbcom/bb-analytics"],function(a,b,c,d){"use strict";function e(a,e,f,g,h){function i(i,j,k,l){function m(){q=i.redirectURL;var a=c.getQueryParam("referrer",location.href);a&&(q=decodeURIComponent(a)),"isStandaloneLoginPage"in k&&g.isLoggedIn()&&h.assign(q||"https://www.bodybuilding.com","Youre already logged in!"),j.find(".js-bb-login__container").on("keydown",function(a){a.which===b.enter&&i.$apply(p.login)}),p.isInDialog&&j.find(".Login__username").first().focus()}function n(){e.$emit("signup.show",{redirectURL:q})}function o(){function b(){var a;p.errMsg=null,g.get().then(function(b){if(d.populateProfile(b),d.loginStateChanged(!0,"logged in",l?"login-dialog":"login-page",{component:"bb/ui/login/login"}),"true"===i.dispatch){try{a=new Event("loginSuccess")}catch(b){a=document.createEvent("Event"),a.initEvent("loginSuccess",!0,!0)}a.user=b,g.getEmail().then(function(b){a.email=b[0].emailAddress,window.dispatchEvent(a)}),p.busyPosting=!1}else"true"===i.reload?h.reload(!0):q?h.assign(q):"true"===i.emit?e.$emit("login.success"):p.isInDialog||h.assign("https://www.bodybuilding.com")})}function c(b,c){var e={component:"bb/ui/login/login"};a.error("bb-login: Failed login - status:%s ::err:%o",c,b),0===c?p.errMsg="MAYBE_OFFLINE":p.errMsg="INCORRECT",p.busyPosting=!1,d.validationError("loginStateChanged","login.failed","login failed",void 0,e)}p.credentials.username?p.credentials.password?(p.busyPosting=!0,f.login(p.credentials).then(b,c)):p.errMsg="PASSWORD":p.errMsg="USERNAME"}var p,q;p={},i.loginScope=p,p.isInDialog=l,p.credentials={username:"",password:""},p.login=o,p.signup=n,m()}var j={restrict:"EA",templateUrl:"bb/ui/login/login.ng.html",scope:{hideFacebook:"@?hideFacebook",hideSignin:"@?hideSignin",reload:"@?reload",redirectURL:"@?redirectUrl",redirectLabel:"@?redirectLabel",dispatch:"@?dispatch",emit:"@?emit"},require:"?^bbDialog"};return j.link=i,j}return["$log","$rootScope","loginResource","currentUserService","locationService",e]}),define("bb/ui/login/modal",[],function(){"use strict";function a(){function a(a,b,c,d){function e(b){var c={headerTitle:b.headerTitle,headerSubtitle:b.headerSubtitle,reload:b.reload};a.$emit("login.show",c)}var f;f=c.find("bb-dialog"),d.addEventListener("loginShow",e),a.$on("login.show",function(c,d){b.header={},b.reload="true",d&&(b.header.title=d.headerTitle,b.header.subtitle=d.headerSubtitle,b.reload=d.reload||b.reload,b.redirectURL=d.redirectURL,b.redirectLabel=d.redirectLabel,b.dispatch=d.dispatch,b.emit=d.emit,b.hideFacebook=d.hideFacebook,b.hideSignin=d.hideSignin),f.controller("bbDialog").dialogOpen(),a.$emit("facebook.needsSDKInjected")}),a.$on("login",function(a,b){b.success&&f.controller("bbDialog").dialogClose()})}var b={restrict:"EA",templateUrl:"bb/ui/login/modal.ng.html",scope:{}};return b.controller=["$rootScope","$scope","$element","$window",a],b}return[a]}),define("bb/ui/login/facebook-button",["@bbcom/bb-analytics"],function(a){"use strict";function b(b,c,d,e){var f={restrict:"EA",templateUrl:"bb/ui/login/facebook-button.ng.html",scope:{type:"@",label:"@",redirectURL:"@?redirectUrl"},require:"?^bbDialog"};return f.link=function(f,g,h,i){function j(b){var d={component:"bb/ui/login/facebook-button"};b&&401===b.status?(d.message="Facebook account not linked",f.error={key:"NO_ASSOCIATED_BSPACE_ACCOUNT"}):f.error=b,c.error("FacebookButton#loginAction: Error logging in.",b),a.validationError("loginStateChanged","login.facebook.failed","facebook login failed",void 0,d)}var k,l;f.fbBtnScope=l={},k={login:{onClick:function(){l.busy=!0,b.login().then(function(){a.loginStateChanged(!0,null,i?"login-dialog.facebook":"login-page.facebook",{component:"bb/ui/login/facebook-button"}),i?e.reload(!0):e.assign(f.redirectURL||"https://www.bodybuilding.com")}).catch(j).finally(function(){l.busy=!1})},label:"Log in with Facebook"},signup:{onClick:function(){l.busy=!0,b.getDataForSignUp().then(function(a){d.$emit("bbFacebookButton:signupData",a)}).catch(function(a){d.$emit("bbFacebookButton:signupData",a)}).finally(function(){l.busy=!1})},label:"Sign up with Facebook"},connect:{onClick:function(){l.busy=!0,b.connect().catch(j).finally(function(){l.busy=!1})},label:"Connect with Facebook"}},f.type=f.type||"login",l.onClick=k[f.type].onClick,l.label=f.label||k[f.type].label},f}return["facebookService","$log","$rootScope","locationService",b]}),define("bb/ui/login/login-required",[],function(){"use strict";function a(a,b,c,d,e){var f={restrict:"A",scope:{loginParams:"&?bbLoginParams"},link:function(a,f){function g(){d.reload().then(function(a){j=a,d.getEmail().then(function(a){k=a[0].emailAddress,i()}).catch(i)})}function h(){var d=a.loginParams?a.loginParams():{};d.reload===!1&&(d.reload="false"),d.emit=!0,c(function(){b.$emit("login.show",d)})}function i(){var a;try{a=new Event("loginSuccess")}catch(b){a=document.createEvent("Event"),a.initEvent("loginSuccess",!0,!0)}a.user=j,a.email=k,f[0].dispatchEvent(a)}var j,k;f.on("click",function(){b.loggedIn?g():h()}),b.$on("login.success",function(a,b){b&&b.user&&b.email?(j=b.user,k=b.email,i()):g()}),a.logOut=e.logout}};return f}return["$log","$rootScope","$timeout","currentUserService","loginResource",a]}),function(){"use strict";function a(a,b){b?(l[0]=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0,this.blocks=l):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=a}var b="object"==typeof window?window:{},c=!b.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;c&&(b=global);var d=!b.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,e="function"==typeof define&&define.amd,f="undefined"!=typeof ArrayBuffer,g="0123456789abcdef".split(""),h=[-2147483648,8388608,32768,128],i=[24,16,8,0],j=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],k=["hex","array","digest","arrayBuffer"],l=[],m=function(b,c){return function(d){return new a(c,!0).update(d)[b]()}},n=function(b){var d=m("hex",b);c&&(d=o(d,b)),d.create=function(){return new a(b)},d.update=function(a){return d.create().update(a)};for(var e=0;e<k.length;++e){var f=k[e];d[f]=m(f,b)}return d},o=function(a,b){var c=require("crypto"),d=require("buffer").Buffer,e=b?"sha224":"sha256",g=function(b){if("string"==typeof b)return c.createHash(e).update(b,"utf8").digest("hex");if(f&&b instanceof ArrayBuffer)b=new Uint8Array(b);else if(void 0===b.length)return a(b);return c.createHash(e).update(new d(b)).digest("hex")};return g};a.prototype.update=function(a){if(!this.finalized){var c="string"!=typeof a;c&&f&&a instanceof b.ArrayBuffer&&(a=new Uint8Array(a));for(var d,e,g=0,h=a.length||0,j=this.blocks;g<h;){if(this.hashed&&(this.hashed=!1,j[0]=this.block,j[16]=j[1]=j[2]=j[3]=j[4]=j[5]=j[6]=j[7]=j[8]=j[9]=j[10]=j[11]=j[12]=j[13]=j[14]=j[15]=0),c)for(e=this.start;g<h&&e<64;++g)j[e>>2]|=a[g]<<i[3&e++];else for(e=this.start;g<h&&e<64;++g)d=a.charCodeAt(g),d<128?j[e>>2]|=d<<i[3&e++]:d<2048?(j[e>>2]|=(192|d>>6)<<i[3&e++],j[e>>2]|=(128|63&d)<<i[3&e++]):d<55296||d>=57344?(j[e>>2]|=(224|d>>12)<<i[3&e++],j[e>>2]|=(128|d>>6&63)<<i[3&e++],j[e>>2]|=(128|63&d)<<i[3&e++]):(d=65536+((1023&d)<<10|1023&a.charCodeAt(++g)),j[e>>2]|=(240|d>>18)<<i[3&e++],j[e>>2]|=(128|d>>12&63)<<i[3&e++],j[e>>2]|=(128|d>>6&63)<<i[3&e++],j[e>>2]|=(128|63&d)<<i[3&e++]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.block=j[16],this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this}},a.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[16]=this.block,a[b>>2]|=h[3&b],this.block=a[16],b>=56&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[15]=this.bytes<<3,this.hash()}},a.prototype.hash=function(){var a,b,c,d,e,f,g,h,i,k,l,m=this.h0,n=this.h1,o=this.h2,p=this.h3,q=this.h4,r=this.h5,s=this.h6,t=this.h7,u=this.blocks;for(a=16;a<64;++a)e=u[a-15],b=(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3,e=u[a-2],c=(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10,u[a]=u[a-16]+b+u[a-7]+c<<0;for(l=n&o,a=0;a<64;a+=4)this.first?(this.is224?(h=300032,e=u[0]-1413257819,t=e-150054599<<0,p=e+24177077<<0):(h=704751109,e=u[0]-210244248,t=e-1521486534<<0,p=e+143694565<<0),this.first=!1):(b=(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10),c=(q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7),h=m&n,d=h^m&o^l,g=q&r^~q&s,e=t+c+g+j[a]+u[a],f=b+d,t=p+e<<0,p=e+f<<0),b=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),c=(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7),i=p&m,d=i^p&n^h,g=t&q^~t&r,e=s+c+g+j[a+1]+u[a+1],f=b+d,s=o+e<<0,o=e+f<<0,b=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),c=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),k=o&p,d=k^o&m^i,g=s&t^~s&q,e=r+c+g+j[a+2]+u[a+2],f=b+d,r=n+e<<0,n=e+f<<0,b=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),c=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),l=n&o,d=l^n&p^k,g=r&s^~r&t,e=q+c+g+j[a+3]+u[a+3],f=b+d,q=m+e<<0,m=e+f<<0;this.h0=this.h0+m<<0,this.h1=this.h1+n<<0,this.h2=this.h2+o<<0,this.h3=this.h3+p<<0,this.h4=this.h4+q<<0,this.h5=this.h5+r<<0,this.h6=this.h6+s<<0,this.h7=this.h7+t<<0},a.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3,e=this.h4,f=this.h5,h=this.h6,i=this.h7,j=g[a>>28&15]+g[a>>24&15]+g[a>>20&15]+g[a>>16&15]+g[a>>12&15]+g[a>>8&15]+g[a>>4&15]+g[15&a]+g[b>>28&15]+g[b>>24&15]+g[b>>20&15]+g[b>>16&15]+g[b>>12&15]+g[b>>8&15]+g[b>>4&15]+g[15&b]+g[c>>28&15]+g[c>>24&15]+g[c>>20&15]+g[c>>16&15]+g[c>>12&15]+g[c>>8&15]+g[c>>4&15]+g[15&c]+g[d>>28&15]+g[d>>24&15]+g[d>>20&15]+g[d>>16&15]+g[d>>12&15]+g[d>>8&15]+g[d>>4&15]+g[15&d]+g[e>>28&15]+g[e>>24&15]+g[e>>20&15]+g[e>>16&15]+g[e>>12&15]+g[e>>8&15]+g[e>>4&15]+g[15&e]+g[f>>28&15]+g[f>>24&15]+g[f>>20&15]+g[f>>16&15]+g[f>>12&15]+g[f>>8&15]+g[f>>4&15]+g[15&f]+g[h>>28&15]+g[h>>24&15]+g[h>>20&15]+g[h>>16&15]+g[h>>12&15]+g[h>>8&15]+g[h>>4&15]+g[15&h];return this.is224||(j+=g[i>>28&15]+g[i>>24&15]+g[i>>20&15]+g[i>>16&15]+g[i>>12&15]+g[i>>8&15]+g[i>>4&15]+g[15&i]),j},a.prototype.toString=a.prototype.hex,a.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3,e=this.h4,f=this.h5,g=this.h6,h=this.h7,i=[a>>24&255,a>>16&255,a>>8&255,255&a,b>>24&255,b>>16&255,b>>8&255,255&b,c>>24&255,c>>16&255,c>>8&255,255&c,d>>24&255,d>>16&255,d>>8&255,255&d,e>>24&255,e>>16&255,e>>8&255,255&e,f>>24&255,f>>16&255,f>>8&255,255&f,g>>24&255,g>>16&255,g>>8&255,255&g];return this.is224||i.push(h>>24&255,h>>16&255,h>>8&255,255&h),i},a.prototype.array=a.prototype.digest,a.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(this.is224?28:32),b=new DataView(a);return b.setUint32(0,this.h0),b.setUint32(4,this.h1),b.setUint32(8,this.h2),b.setUint32(12,this.h3),b.setUint32(16,this.h4),b.setUint32(20,this.h5),b.setUint32(24,this.h6),this.is224||b.setUint32(28,this.h7),a};var p=n();p.sha256=p,p.sha224=n(!0),d?module.exports=p:(b.sha256=p.sha256,b.sha224=p.sha224,e&&define("sha256",[],function(){return p}))}(),define("bb/ui/services/user/login-resource",["./user-module","bb/util/module-info","bb/util/is-jasmine","sha256","@bbcom/bb-analytics"],function(a,b,c,d,e){"use strict";function f(a,b,f,g,h){var i={},j={login:[],logout:[]};return i.URL="https://api.bodybuilding.com/login/web",i._doLogout=function(){var a,b,d=location.hostname,f="https://www.bodybuilding.com";a="my.bodybuilding.com"===d?null:"www.teenbodybuilding.com"===d?f:"www.bodybuilding.com"===d&&location.pathname.length<=1?f:location.href,c()?i._redirectUrl_=a:(b=document.createElement("form"),b.action="https://api.bodybuilding.com/logout"+(a?"?callback="+h.encode(a):""),b.method="POST",b.name="BBCOM_LOGOUT_FORM",b.style.display="none",document.body.appendChild(b),document.forms.BBCOM_LOGOUT_FORM.submit()),e.loginStateChanged(!1)},i.registerLogoutObserver=function(a){j.logout.push(a)},i.registerLoginObserver=function(a){j.login.push(a)},i.login=function(c){function e(a){var c,e,f=a.data,i={},j=f.dataToHash;for(c="md5"===f.hashMethod?g.createHash:"sha256"===f.hashMethod?d:g.createHash,
e=0;e<f.iterations;e++)j=c(j);i.challenge=f,i.hashResult=j,b.post(f.verificationUrl,i,{withCredentials:!0}).then(h,k)}function h(b){f.all(j.login.map(function(a){return a()})).finally(function(){a.$emit("login",{success:!0,data:b.data}),l.resolve()})}function k(){a.$emit("login",{success:!1}),l.reject()}var l=f.defer(),m={};return m.username=c.username||"",m.password=g.createHash(c.password||""),b.post(i.URL,m,{withCredentials:!0}).then(e,k),l.promise},i.logout=function(){a.$emit("logout"),f.all(j.logout.map(function(a){return a()})).finally(i._doLogout)},i}return a.service("loginResource",["$rootScope","$http","$q","md5","$base64",f]),f}),define("lodash/object/has",["../internal/baseGet","../internal/baseSlice","../lang/isArguments","../lang/isArray","../internal/isIndex","../internal/isKey","../internal/isLength","../lang/isString","../array/last","../internal/toPath"],function(a,b,c,d,e,f,g,h,i,j){function k(k,l){if(null==k)return!1;var n=m.call(k,l);if(!n&&!f(l)){if(l=j(l),k=1==l.length?k:a(k,b(l,0,-1)),null==k)return!1;l=i(l),n=m.call(k,l)}return n||g(k.length)&&e(l,k.length)&&(d(k)||c(k)||h(k))}var l=Object.prototype,m=l.hasOwnProperty;return k}),function(a){define("angular-facebook",["angular"],function(){return function(){!function(a,b){"use strict";function c(b){var c,g,h;return c=b.defer(),"success"===f.injectState?(c.resolve(),c.promise):("progress"===f.injectState&&d.promise.then(function(){return c.resolve(),c.promise}),g="//connect.facebook.net/"+e.locale+"/sdk.js",h=document.createElement("script"),h.id="facebook-jssdk",h.async=!0,c=b.defer(),a.location.protocol.indexOf("file:")!==-1&&(g="https:"+g),h.onload=function(){f.sdk=!0,f.injectState="success",d.promise.then(c.resolve)},h.onerror=function(){f.injectState="error",c.reject()},h.src=g,document.getElementsByTagName("head")[0].appendChild(h),c.promise)}var d,e={},f={sdk:!1,injectState:null,ready:!1};b.module("facebook",[]).value("settings",e).value("flags",f).provider("Facebook",[function(){e.appId=null,this.setAppId=function(a){e.appId=a},this.getAppId=function(){return e.appId},e.locale="en_US",this.setLocale=function(a){e.locale=a},this.getLocale=function(){return e.locale},e.status=!0,this.setStatus=function(a){e.status=a},this.getStatus=function(){return e.status},e.channelUrl=null,this.setChannel=function(a){e.channelUrl=a},this.getChannel=function(){return e.channelUrl},e.cookie=!0,this.setCookie=function(a){e.cookie=a},this.getCookie=function(){return e.cookie},e.xfbml=!0,this.setXfbml=function(a){e.xfbml=a},this.getXfbml=function(){return e.xfbml},this.setAuthResponse=function(a){e.authResponse=a||!0},this.getAuthResponse=function(){return e.authResponse},e.frictionlessRequests=!1,this.setFrictionlessRequests=function(a){e.frictionlessRequests=a},this.getFrictionlessRequests=function(){return e.frictionlessRequests},e.hideFlashCallback=null,this.setHideFlashCallback=function(a){e.hideFlashCallback=a||null},this.getHideFlashCallback=function(){return e.hideFlashCallback},this.setInitCustomOption=function(a,c){return!!b.isString(a)&&(e[a]=c,e[a])},this.getInitOption=function(a){return!(!b.isString(a)||!e.hasOwnProperty(a))&&e[a]},e.loadSDK=!0,this.setLoadSDK=function(a){e.loadSDK=!!a},this.getLoadSDK=function(){return e.loadSDK},e.version="v2.0",this.setSdkVersion=function(a){e.version=a},this.getSdkVersion=function(){return e.version},this.init=function(a,c){b.isString(a)&&(e.appId=a),b.isNumber(a)&&(e.appId=a.toString()),b.isObject(a)&&b.extend(e,a),b.isDefined(c)&&(e.loadSDK=!!c)},this.$get=["$q","$rootScope","$window",function(a,g,h){function i(){this.appId=e.appId}return i.prototype.isReady=function(){return f.ready},i.prototype.injectSDK=function(){return c(a)},i.prototype.login=function(){var c,e,f=a.defer(),h=Array.prototype.slice.call(arguments);return b.forEach(h,function(a,d){b.isFunction(a)&&(c=a,e=d)}),b.isFunction(c)&&b.isNumber(e)&&h.splice(e,1,function(a){g.$evalAsync(function(){a&&b.isUndefined(a.error)?f.resolve(a):f.reject(a),b.isFunction(c)&&c(a)})}),d.promise.then(function(a){a.login.apply(a,h)}),f.promise},b.forEach(["logout","api","ui","getLoginStatus"],function(c){i.prototype[c]=function(){var e,f,i=a.defer(),j=Array.prototype.slice.call(arguments);return b.forEach(j,function(a,c){b.isFunction(a)&&(e=a,f=c)}),b.isFunction(e)&&b.isNumber(f)&&j.splice(f,1,function(a){g.$evalAsync(function(){a&&b.isUndefined(a.error)?i.resolve(a):i.reject(a),b.isFunction(e)&&e(a)})}),d.promise.then(function(){h.FB[c].apply(FB,j)}),i.promise}}),i.prototype.parseXFBML=function(){var b=a.defer();return d.promise.then(function(){h.FB.XFBML.parse(),b.resolve()}),b.promise},b.forEach(["subscribe","unsubscribe"],function(c){i.prototype[c]=function(){var e,f,i=a.defer(),j=Array.prototype.slice.call(arguments);return b.forEach(j,function(a,c){b.isFunction(a)&&(e=a,f=c)}),b.isFunction(e)&&b.isNumber(f)&&j.splice(f,1,function(a){g.$evalAsync(function(){a&&b.isUndefined(a.error)?i.resolve(a):i.reject(a),b.isFunction(e)&&e(a)})}),d.promise.then(function(){h.FB.Event[c].apply(FB,j)}),i.promise}}),new i}]}]).run(["$rootScope","$q","$window",function(a,g,h){d=g.defer();var i=e.loadSDK;delete e.loadSDK,h.fbAsyncInit=function(){a.$evalAsync(function(){if(!e.appId)throw"Missing appId setting.";FB.init(e),f.ready=!0,b.forEach({"auth.login":"login","auth.logout":"logout","auth.prompt":"prompt","auth.sessionChange":"sessionChange","auth.statusChange":"statusChange","auth.authResponseChange":"authResponseChange","xfbml.render":"xfbmlRender","edge.create":"like","edge.remove":"unlike","comment.create":"comment","comment.remove":"uncomment"},function(b,c){FB.Event.subscribe(c,function(c){a.$evalAsync(function(){a.$broadcast("Facebook:"+b,c)})})}),a.$broadcast("Facebook:load"),d.resolve(FB)})},function(){var a=document.getElementById("fb-root");return a||(a=document.createElement("div"),a.id="fb-root",document.body.insertBefore(a,document.body.childNodes[0])),a}(),i&&c(g)}])}(window,angular)}.apply(a,arguments)})}(this),define("bb/ui/facebook/facebook-module",["angular","bb/util/browser/get-meta","angular-facebook","bb/ui/services/http-interceptor/package"],function(a,b){"use strict";var c=a.module("bb.ui.facebook",["facebook","bb.ui.core","bb.ui.services.http-interceptor"]);return c.config(["FacebookProvider",function(a){var c;c="disabled"!==b("bb:facebook-sdk"),a.init({loadSDK:c,version:"v2.8",appId:"197335844169"})}]),c.constant("facebookServiceConfig",{api:{login:"https://api.bodybuilding.com/login/facebook"}}),c}),define("bb/ui/facebook/facebook-service",["angular","lodash/object/has","./facebook-module"],function(a,b,c){"use strict";function d(a,c,d,e,f,g,h){function i(a){return b(a,"socialMediaCategoryList.authorizationMap.FACEBOOK")&&a.socialMediaCategoryList.authorizationMap.FACEBOOK}function j(a,b){var c,e;return e={socialUserId:a,accessToken:b},c=g.api.login,d.post(c,e,{cache:!1})}function k(){function b(a){"connected"===a.status?a.authResponse?c.resolve(a.authResponse):c.reject({key:"INVALID_DATA",message:"Invalid data returned by Facebook SDK"}):c.reject({key:"USER_CANCELLED",message:"User cancelled login"})}var c=a.defer();return h.login(b),c.promise}return e.$on("facebook.needsSDKInjected",h.injectSDK),{isReady:function(){return h.isReady()},login:function(){function b(){k().then(function(a){return j(a.userID,a.accessToken)},c.reject).then(function(a){e.$emit("login",{success:!0,data:a}),c.resolve(a)},function(a){"object"!=typeof a&&c.resolve(null),c.reject(a)})}var c=a.defer();return h.injectSDK().then(b),c.promise},getDataForSignUp:function(){function b(){h.api("/me",{fields:d.join(",")},function(a){a.error?f.reject(a):f.resolve(a)})}function c(){k().then(function(a){e.$emit("FacebookService:authResponse",a),b()},function(a){f.reject(a)})}var d,f=a.defer();return d=["id","first_name","last_name","name","email","birthday","gender"],h.injectSDK().then(c),f.promise},connect:function(){function b(){k().then(c.resolve,c.reject)}var c=a.defer();return h.injectSDK().then(b),c.promise},isBodyspaceAccountConnectedToFacebook:function(){var b=a.defer();return f.get().then(function(a){i(a)?b.resolve("BODYSPACE_ACCOUNT_IS_CONNECTED"):b.reject({key:"BODYSPACE_ACCOUNT_IS_NOT_CONNECTED",message:"Bodyspace account is not connected"})},function(){b.reject({key:"FAILED_TO_GET_USER",message:"Could not retrieve current user"})}),b.promise},getFacebookSharingPreferences:function(b){var c=a.defer();return f.get().then(function(a){var d,e;i(a)||c.reject({key:"BODYSPACE_ACCOUNT_NOT_CONNECTED",message:"Bodyspace account is not connected to a Facebook account"}),d=a.socialMediaCategoryList.socialMediaCategories[0].socialPreferenceList.socialPreferences,e={},e.weight=d[0].map.FACEBOOK,e.bodyfat=d[1].map.FACEBOOK,e.bodystat=d[2].map.FACEBOOK,b?c.resolve(e[b]):c.resolve()},function(){c.reject({key:"FAILED_TO_GET_USER",message:"Could not retrieve current user"})}),c.promise}}}c.factory("facebookService",["$q","$log","$http","$rootScope","currentUserService","facebookServiceConfig","Facebook",d])}),define("bb/ui/login/package",["angular","./views","./login-service","./login","./modal","./facebook-button","./login-required","bb/ui/services/utils/location-service","bb/ui/services/user/current-user","bb/ui/services/user/login-resource","bb/ui/core/dialog","bb/ui/core/emit","bb/ui/core/visible","bb/ui/facebook/facebook-service","bb/ui/signup/package","bb/ui/flash-message/package"],function(a,b,c,d,e,f,g){"use strict";var h=a.module("bb.ui.login",["bb.ui.services.user","bb.ui.services.utils","bb.ui.core","bb.ui.facebook","bb.ui.signup","bb.ui.flash-message"]);return h.run(["$rootScope","$templateCache",function(a,c){b.init(c),a.loginModal=function(){a.emit("loginModal")}}]),h.service("loginService",c),h.directive("bbLogin",d),h.directive("bbLoginModal",e),h.directive("bbFacebookButton",f),h.directive("bbLoginRequired",g),h}),define("bb/ui/navigation/site-nav-intent",["angular"],function(a){"use strict";function b(b,d,e,f,g){return{restrict:"A",scope:!1,require:"^^bbSiteNav",link:function(b,e,h,i){var j,k,l=parseInt(h.hoverTimeout)||100,m=h.bbSiteNavIntent;(f.ios||f.android)&&(l=0),b.$watch("nav.selectedNavMenu",function(a){e.toggleClass("hoverIntentSelected",a===m)}),k=function(b){var c=a.element(b);c.on({"mousemove.hoverIntent click.hoverIntent":function(){d.cancel(j),j=d(function(){i.openDesktopNav(m,c),c.off(".hoverIntent")},l)},mouseout:function(){d.cancel(j),c.off("mouseout .hoverIntent")}})},e.on({mouseenter:function(a){g.mediaQueries[c].matches&&k(a.target)},click:function(a){var d=!g.mediaQueries[c].matches;e.hasClass("hoverIntentSelected")===!1&&((f.ios||f.android||d)&&a.preventDefault(),d&&b.$evalAsync(function(){i.openMobileSubNav(e.text(),m)}))}})}}}var c="desktop";return["$log","$timeout","$rootScope","uaService","deviceService",b]}),define("bb/ui/navigation/site-nav",["angular","bb/util/module-info","@bbcom/bb-analytics"],function(a,b,c){"use strict";function d(d,f,g,h){function i(a,c,d,e){var f,g,h=b.settings||b,i="#header__site-nav--desktop__newNav",j={store:"390024",training:"390025",find:"390026",nutrition:"390027",women:"390028",videos:"400116",apps:"390030"};"string"==typeof h.siteSection&&(f=h.siteSection.toLowerCase().split(" ")[0],f in j&&(g=c.find(i+j[f]).addClass("Wr__nav-menu__current-site-section"),e.siteSectionTitle=g.text(),e.siteSectionSelector=g.attr("bb-site-nav-intent")))}function j(b,i){function j(){o.state.isOpen||(o.state.isOpen=!0,p.element=i.find(".snav__menu"),p.element.slideDown("fast"),g.$emit("siteNav.openState",{open:!0}))}function k(){!o.state.mouseIn&&o.state.isOpen&&l()}function l(){c.pushEvent("nav.flyout","navigation","nav.close",o.selectedNavMenuEventLabel||"unavailable",{bbZone1:"header",bbZone2:"top-nav"}),a.element([document.body,document.documentElement]).off("touchstart.navigationOut"),i.off("mouseenter.navMouseEnter").off("mouseleave.navMouseLeave").off("touchstart.navElementTouch"),p.element.slideUp("fast",function(){p.element={},b.$apply(function(){o.state.isOpen=!1,o.state.mouseIn=!1,o.selectedNavMenu=null}),g.$emit("siteNav.openState",{open:!1})})}function m(){a.element([document.body,document.documentElement]).on("touchstart.navigationOut",l),i.on("mouseenter.navMouseEnter",function(){h.mediaQueries[e].matches&&(o.state.mouseIn=!0)}),i.on("mouseleave.navMouseLeave",function(){h.mediaQueries[e].matches&&(o.state.mouseIn=!1,d(k,250))}),i.on("touchstart.navElementTouch",function(a){a.stopPropagation()})}var n=this,o={controls:{},selected:{},state:{mouseIn:!1,isOpen:!1},selectedNavMenu:null},p={element:{}},q=a.element(f);b.nav=o,b.subNav=p,n.openDesktopNav=function(a,d){var f=!o.selectedNavMenu&&a;h.mediaQueries[e].matches&&(b.$apply(function(){d&&d.context&&d.context.dataset&&(o.selectedNavMenuEventLabel=d.context.dataset.bbLabel),o.selectedNavMenuEventLabel||(o.selectedNavMenuEventLabel="unavailable"),o.selectedNavMenu=a,c.pushEvent("nav.flyout","navigation","nav.open",o.selectedNavMenuEventLabel,{bbZone1:"header",bbZone2:"top-nav"})}),f&&(j(),m()))},n.openMobileSubNav=function(a,b){h.mediaQueries[e].matches||(o.selectedNavMenu=b,o.selectedNavTitle=a)},o.controls.openMobile=function(){o.state.open=!0,n.siteSectionTitle&&n.siteSectionSelector&&n.openMobileSubNav(n.siteSectionTitle,n.siteSectionSelector),a.element(document.body).addClass("snav-mob__menu--body-open"),a.element([document.body,document.documentElement]).addClass("snav-lock-scroll"),q.on("resize.mobileNav",function(){h.mediaQueries[e].matches&&b.$apply(function(){o.controls.closeMobile(!0)})})},o.controls.closeMobile=function(b){var c=b?0:500;o.state.open=!1,o.selectedNavMenu=null,a.element(document.body).removeClass("snav-mob__menu--body-open"),q.off("resize.mobileNav"),d(function(){a.element([document.body,document.documentElement]).removeClass("snav-lock-scroll"),o.controls.closeMobileSubNav()},c)},o.controls.closeMobileSubNav=function(){o.selectedNavMenu=null,o.selectedNavTitle=null},b.$on("$destroy",function(){q.off("resize.mobileNav"),a.element([document.body,document.documentElement]).removeClass("snav-lock-scroll snav-mob__menu--body-open").off("touchstart.navigationOut")})}var k={restrict:"A",scope:!0,require:"bbSiteNav",controller:["$scope","$element",j],link:i};return k}var e="desktop";return["$timeout","$window","$rootScope","deviceService",d]}),define("bb/ui/navigation/package",["angular","bb/util/module-info","bb/ui/navigation/site-nav-intent","bb/ui/navigation/site-nav","bb/ui/util/package"],function(a,b,c,d){"use strict";function e(a){b.settings.taxonomyKey&&(a.taxonomyKey=b.settings.taxonomyKey)}var f=a.module("bb.ui.navigation",["bb.ui.util"]);return f.run(["$rootScope",e]),f.directive("bbSiteNav",d),f.directive("bbSiteNavIntent",c),f}),define("bb/ui/services/simple-signup/simple-signup-service",["angular"],function(a){"use strict";function b(b,c,d){function e(c){var d=[],e=5;return a.forEach(c,function(a,c){var f={name:c,value:a};d.length<e?d.push(f):b.warn("SimpleSignupService#mapCustomFields: Max fields exceeded. Could not add: %o",f)}),d}var f={},g="bbcom";return f.setUserStatus=function(a){var f={};return a.email&&a.source&&a.optIn?["OPT_IN","OPT_OUT"].indexOf(a.optIn)===-1?d.reject("INVALID_OPT-IN_VALUE"):(f.property=g,f.email=a.email,f.source=a.source,f.optIn=a.optIn,a.custom&&(f.customFields=e(a.custom)),c({method:"POST",data:f,url:"https://simple-signup.bodybuilding.com/simplesignup/",withCredentials:!0}).catch(function(a){return b.warn("SimpleSignupService#setUserStatus: An error occurred %o",a),d.reject(a)})):d.reject("REQUIRED_PARAM_MISSING")},f.getUserStatus=function(a){return c({method:"GET",url:"https://simple-signup.bodybuilding.com/simplesignup/"+g+"/"+a,dataType:"json",withCredentials:!0}).catch(function(a){return b.warn("SimpleSignupService#getUserStatus: An error occurred %o",a),d.reject(a)})},f}return["$log","$http","$q",b]}),define("bb/ui/services/simple-signup/package",["angular","./simple-signup-service"],function(a,b){"use strict";return a.module("bb.ui.services.simple-signup",[]).service("simpleSignupService",b)}),define("bb/ui/newsletter/module",["angular","bb/ui/core/visible","bb/ui/services/simple-signup/package"],function(a){"use strict";var b=a.module("bb.ui.newsletter",["bb.ui.services.simple-signup","bb.ui.core"]);return b}),define("bb/ui/newsletter/newsletter-form",["./module","@bbcom/bb-analytics","bb/util/keys"],function(a,b,c){"use strict";function d(a,d,e){var f={restrict:"E",scope:{inputText:"@",btnText:"@"},templateUrl:"bb/ui/newsletter/newsletter-form.ng.html"};return f.link=function(f,g,h){f.newsletter=f.newsletter||{},f.inputText=f.inputText||"Your Email Address",f.btnText=f.btnText||"Send",f.id=h.id,f.isVerified=!1,f.haveError=!1,g.on("keypress",function(a){a.which===c.enter&&f.$apply(f.signUp)}),f.signUp=function(){function c(){return b.pushEvent("newsletter","user","signup","Newsletter Signup"),d.location.pathname.indexOf("_SpecRunner.html")!==-1?void a.debug("Disabling newsletter signup success redirect during tests"):void(d.location.href="https://www.bodybuilding.com/fun/emailsignup-deals-sucess.html")}var g,h=f.newsletter.email;if(!f.isSettingUserStatus){if(f.haveError=!1,f.isVerified=!1,!h)return f.haveError=!0,f.errorKey="INVALID-EMAIL",a.error("You clicked send with an invalid email: %o",h);f.isSettingUserStatus=!0,g=f.newsletter,g.source="footer",g.optIn="OPT_IN",e.setUserStatus(g).then(function(){f.haveError=!1,f.isVerified=!0,c()},function(a){f.haveError=!0,f.isVerified=!1,f.errorKey=a.statusText.toUpperCase()}).finally(function(){f.isSettingUserStatus=!1})}}},f}return a.directive("bbNewsletterForm",["$log","$window","simpleSignupService",d])}),define("bb/ui/newsletter/views",[],{init:function(a){"use strict";a.put("bb/ui/newsletter/newsletter-form.ng.html",'<div class=NewsletterForm ng-class="{ \'NewsletterForm--pending\': isSettingUserStatus }"><div class="Grid-row Grid-row--centered"><div class="Grid-unit--stretch Grid-row"><input id={{id}}__SignupInput class="bb-input bb-input--stretch NewsletterForm-input" name=email type=email ng-model=newsletter.email ng-pattern=/^[a-zA-Z0-9\\._%+-]+@[a-zA-Z0-9\\.-]+\\.[a-zA-Z]+$/ ng-maxlength=128 debounce=750 placeholder={{inputText}}></div><div class=Grid-row><button class="bb-flat-btn NewsletterForm-btn bb-spinner-btn" ng-click=signUp() id={{id}}__SignupButton data-bb-category=newsletter data-bb-action=signup ng-disabled=isSettingUserStatus><span class=NewsletterForm-btn__label bb-visible=!isSettingUserStatus>{{btnText}} </span><span class=bb-spinner-btn__spinner bb-visible=isSettingUserStatus></span></button></div></div><div class=NewsletterForm__success-message ng-if=isVerified><span>You&rsquo;re all signed up! Thank you!</span></div><div class=NewsletterForm__error-message ng-if=haveError ng-switch=errorKey><span class=NewsletterForm__error-message--conflict ng-switch-when=CONFLICT>Sorry, it looks like you&rsquo;ve already signed up. </span><span class=NewsletterForm__error-message--invalid ng-switch-when=INVALID-EMAIL>Please enter a valid email address. </span><span class=NewsletterForm__error-message--default ng-switch-default>Sorry, there was an error registering your email.</span></div></div>')}}),define("bb/ui/newsletter/package",["angular","./module","bb/ui/newsletter/newsletter-form","bb/ui/newsletter/views"],function(a,b,c,d){"use strict";return b.run(["$templateCache",d.init]),{module:b}}),define("lodash/internal/escapeHtmlChar",[],function(){function a(a){return b[a]}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return a}),define("lodash/string/escape",["../internal/baseToString","../internal/escapeHtmlChar"],function(a,b){function c(c){return c=a(c),c&&e.test(c)?c.replace(d,b):c}var d=/[&<>"'`]/g,e=RegExp(d.source);return c}),define("bb/ui/typeahead/typeahead",["angular","lodash/string/escape","@bbcom/bb-analytics","bb/util/browser/get-meta"],function(a,b,c,d){"use strict";function e(){function a(a,e,f,g,h,i,j,k,l,m){f(a,function(a,f){function n(a){var c;return a.map(function(a,d){return c={query:a},i.storeOrigin&&(c.storeOrigin=i.storeOrigin),{selected:0===d,label:b(a),href:m.parse(i.typeaheadUrl,c)}})}e.append(a);var o=0,p={9:1,13:1,27:1,38:1,40:1},q="Search articles, products, brands";f.query=i.query,f.suggestions=[],f.recentSearches=[],f.storeResults=[],f.videoResults=[],f.articleResults=[],f.isTypeaheadOpen=l.isTypeaheadOpen=!1,f.placeholder=q,i.loadFromLocalStorage(),f.recentSearches=n(i.recentSearches),f.suggestions=n(i.suggestions),f.onFocus=function(){f.query&&f.search(f.query),f.isTypeaheadOpen=f.showResults=l.isTypeaheadOpen=!0,f.placeholder="mobile"===l.device.breakpoint?"Search":q},f.onBlur=function(){f.isTypeaheadOpen=l.isTypeaheadOpen=!1,f.placeholder=q,f.close()},f.clear=function(a){a.preventDefault(),e.find("input[type=text]")[0].focus(),f.query="",f.suggestions=n(i.suggestions)},f.submit=function(a,b){if(h.debug("TypeaheadController#submit: Query being submit: ",a),b&&(j.set({name:"v62",value:"header_search",path:"/",domain:".bodybuilding.com"}),j.set({name:"v63",value:b,path:"/",domain:".bodybuilding.com"})),i.saveToLocalStorage(a),a){var c=d("bb:search-context");void 0===c?c="all":h.debug("TypeaheadController#submit: search context: ",c);var e={query:a,context:c};i.storeOrigin&&(e.storeOrigin=i.storeOrigin),g.location.href=m.parse(i.href,e)}},f.close=function(){o=0,f.showResults=!1},f.focus=function(a){var b=f.suggestions.length-1,c=o;0===o&&a===-1?o=b:o===b&&1===a?o=0:o+=a,f.suggestions[c]&&(f.suggestions[c].selected=!1),f.suggestions[o]&&(f.suggestions[o].selected=!0)},f.search=function(a,d){var e;a?(e=new c.PerformanceMeasure("search","typeahead").start("request.start",!0),i.getResults(a).then(function(g){e.measure("request.duration"),d||(f.suggestions=g.suggestions,f.suggestions.unshift({label:b(f.query),href:g.url,selected:!0})),f.storeResults=g.storeResults,f.videoResults=g.videoResults,f.articleResults=g.articleResults,c.pushEvent("typeahead","search","query","query results",0,{suggestionCount:g.suggestions?g.suggestions.length:0,resultCount:[g.storeResults,g.videoResults,g.articleResults].filter(function(a){return a}).map(function(a){return a.length}).reduce(function(a,b){return a+b}),query:a})})):(h.debug("failed to get results"),d||(f.suggestions=n(i.suggestions)),f.storeResults=[],f.videoResults=[],f.articleResults=[],c.pushException(""))},f.setFocus=function(a){var b=f.suggestions[a];b&&(b.selected=!0),f.suggestions[o]&&(f.suggestions[o].selected=!1),o=a,f.query&&f.search(b.label,!0)},f.onClick=function(a,b){b&&(j.set({name:"v62",value:"header_search",path:"/",domain:".bodybuilding.com"}),j.set({name:"v63",value:b,path:"/",domain:".bodybuilding.com"})),g.location.href=a},f.onChange=k(f.onFocus,500),f.onKeydown=function(a){var b=a.which||a.keyCode,c=a.shiftKey;b in p&&((f.showResults||9!==b)&&a.preventDefault(),f.showResults&&(9===b&&(b=c?38:40),27===b?f.close():38===b?(f.focus(-1),f.query&&f.search(f.suggestions[o].label,!0)):40===b&&(f.focus(1),f.query&&f.search(f.suggestions[o].label,!0))),13===b&&(f.query&&f.suggestions[0].label!==f.query?f.submit(f.query,"typeahead-enter"):f.submit(f.suggestions[o].label,"typeahead-enter")))}})}var e;return e={restrict:"E",scope:{},transclude:!0,template:"",controller:["$scope","$element","$transclude","$window","$log","typeaheadService","cookieService","debounce","$rootScope","URITemplate",a]}}return e}),define("bb/ui/typeahead/hover-intent",["angular"],function(a){"use strict";function b(b,c){return{restrict:"A",scope:{setFocus:"&"},link:function(d,e){var f,g;g=function(c){var e=a.element(c);e.on({"mousemove.hoverIntent":function(){b.cancel(f),f=b(function(){d.setFocus(),e.off(".hoverIntent")},100)},"mouseleave.hoverIntent":function(){b.cancel(f),e.off(".hoverIntent")}})},e.on({mouseenter:function(a){c.mediaQueries.desktop.matches&&g(a.target)}})}}}return["$timeout","deviceService",b]}),define("bb/ui/typeahead/typeahead-highlight-filter",[],function(){"use strict";function a(a,b){function c(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}var d='<span class="typeahead-flyout__result--heavy">$&</span>',e=' <span class="typeahead-flyout__result--highlight">$1</span>',f=/(.*)$/;return function(g,h){var i,j=new RegExp(c(h),"i");return i=g.label.replace(j,d),g.context&&(i+=g.context.replace(f,e)),a.trustAsHtml(b(i))}}return["$sce","$sanitize",a]}),define("lodash/internal/indexOfNaN",[],function(){function a(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}return a}),define("lodash/internal/baseIndexOf",["./indexOfNaN"],function(a){function b(b,c,d){if(c!==c)return a(b,d);for(var e=d-1,f=b.length;++e<f;)if(b[e]===c)return e;return-1}return b}),define("lodash/internal/isIterateeCall",["./isArrayLike","./isIndex","../lang/isObject"],function(a,b,c){function d(d,e,f){if(!c(f))return!1;var g=typeof e;if("number"==g?a(f)&&b(e,f.length):"string"==g&&e in f){var h=f[e];return d===d?d===h:h!==h}return!1}return d}),define("lodash/internal/baseValues",[],function(){function a(a,b){for(var c=-1,d=b.length,e=Array(d);++c<d;)e[c]=a[b[c]];return e}return a}),define("lodash/object/values",["../internal/baseValues","./keys"],function(a,b){function c(c){return a(c,b(c))}return c}),define("lodash/collection/includes",["../internal/baseIndexOf","../internal/getLength","../lang/isArray","../internal/isIterateeCall","../internal/isLength","../lang/isString","../object/values"],function(a,b,c,d,e,f,g){function h(h,j,k,l){var m=h?b(h):0;return e(m)||(h=g(h),m=h.length),k="number"!=typeof k||l&&d(j,k,l)?0:k<0?i(m+k,0):k||0,"string"==typeof h||!c(h)&&f(h)?k<=m&&h.indexOf(j,k)>-1:!!m&&a(h,j,k)>-1}var i=Math.max;return h}),define("bb/ui/typeahead/typeahead-service",["lodash/collection/includes","bb/util/storage"],function(a,b){"use strict";function c(c,d,e,f){function g(b){var c=e.location.host;return a(c,b)}function h(a,b){return(a._embedded[b]||[]).map(function(a){var b;return a.href=a._links["bb:target"].href,a.imageUrl=a._links["bb:imageUrl"].href,b=a._links["bb:b-elite-badge"],b&&b.forEach(function(b){"vector"===b.name&&(a.beliteVectorBadge=b.href)}),a})}function i(){var a,c;return a=b.local.getItem(k.recentSearchKey),c=a&&"null"!==a&&"undefined"!==a}var j,k={};return k.recentSearchKey="recentSearches",k.suggestions=["BCAA","CREATINE","JYM","PRE WORKOUT","C4","KRIS GETHIN","TESTOSTERONE BOOSTER","PROTEIN","OPTIMUM NUTRITION","CLA"],k.recentSearches=[],k.query="",k.storeOrigin="",g("csr-store.body.stage")||g("csrsearch.body.stage")?(j="//csrsearch.body.stage/csrsearch",k.storeOrigin=e.location.protocol+"//"+e.location.hostname):g("csr-store.body.prod")||g("csrsearch.body.prod")?(j="//csrsearch.body.prod/csrsearch",k.storeOrigin=e.location.protocol+"//"+e.location.hostname):j="https://search.bodybuilding.com",k.href=j+"/slp/full{?context,query,storeOrigin}",k.typeaheadUrl=j+"/typeahead/rich{?query}{&storeOrigin}",k.getResults=function(a){var b,d={query:a};return k.query=a,k.storeOrigin&&(d.storeOrigin=k.storeOrigin),b=f.parse(k.typeaheadUrl,d),c({method:"GET",url:b,withCredentials:!0}).then(function(a){return{url:b,suggestions:(a.data._links["bb:typeahead"]||[]).map(function(a){return a.label=a.title,a}),storeResults:h(a.data,"bb:store-result"),videoResults:h(a.data,"bb:video-result"),articleResults:h(a.data,"bb:article-result")}})},k.saveToLocalStorage=function(c){if(a(k.recentSearches,c)){var e=k.recentSearches.indexOf(c);d.debug("TypeaheadController#saveToLocalStorage: moving item to the top",e),e>0&&(k.recentSearches.splice(e,1),k.recentSearches.unshift(c))}else k.recentSearches.unshift(c),k.recentSearches.length>10&&k.recentSearches.splice(10,1);try{b.local.setItem(k.recentSearchKey,JSON.stringify(k.recentSearches)),d.debug("TypeaheadController#saveToLocalStorage: Recent searches saved to localStorage")}catch(a){d.error("Unable to save to local storage:\n%o",a)}},k.loadFromLocalStorage=function(){i()&&(k.recentSearches=JSON.parse(b.local.getItem(k.recentSearchKey)))},k}return["$http","$log","$window","URITemplate",c]}),function(a){define("angular-animate",["angular"],function(){return function(){!function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){b(c.offsetWidth)})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==q)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j,k=b.noop,l=b.forEach,m=e.$$selectors,n=b.isArray,o=b.isString,p=b.isObject,q=1,r="$$ngAnimateState",s="$$ngAnimateChildren",t="ng-animate",u={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(a,c,d,q,v,w,x,y,z,A){function B(a,b){var c=a.data(r)||{};return b&&(c.running=!0,c.structural=!0,a.data(r,c)),c.disabled||c.running&&c.structural}function C(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},x.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function D(a){if(p(a))return a.tempClasses&&o(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a}function E(a,b,c){c=c||{};var d={};l(c,function(a,b){l(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);l((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return l(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};a===!1?(c||"addClass"==h.event)&&g.push(b):a===!0&&(c&&"removeClass"!=h.event||f.push(b))}),f.length+g.length>0&&[f.join(" "),g.join(" ")]}function F(a){if(a){var b=[],c={},e=a.substr(1).split(".");(q.transitions||q.animations)&&b.push(d.get(m[""]));for(var f=0;f<e.length;f++){var g=e[f],h=m[g];h&&!c[g]&&(b.push(d.get(h)),c[g]=!0)}return b}}function G(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];if(c||d)return"leave"==b&&(d=c,c=null),w.push({event:b,fn:c}),t.push({event:b,fn:d}),!0}function g(b,c,f){function g(a){if(c){if((c[a]||k)(),++m<h.length)return;c=null}f()}var h=[];l(b,function(a){a.fn&&h.push(a)});var m=0;l(h,function(b,f){var h=function(){g(f)};switch(b.event){case"setClass":c.push(b.fn(a,i,j,h,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,h));break;case"addClass":c.push(b.fn(a,i||d,h,e));break;case"removeClass":c.push(b.fn(a,j||d,h,e));break;default:c.push(b.fn(a,h,e))}}),c&&0===c.length&&f()}var h=a[0];if(h){e&&(e.to=e.to||{},e.from=e.from||{});var i,j;n(d)&&(i=d[0],j=d[1],i?j?d=i+" "+j:(d=i,c="addClass"):(d=j,c="removeClass"));var m="setClass"==c,o=m||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class"),q=p+" "+d;if(O(q)){var r=k,s=[],t=[],u=k,v=[],w=[],x=(" "+q).replace(/\s+/g,".");return l(F(x),function(a){var b=f(a,c);!b&&m&&(f(a,"addClass"),f(a,"removeClass"))}),{node:h,event:c,className:d,isClassBased:o,isSetClassOperation:m,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){r=a,g(t,s,function(){r=k,a()})},after:function(a){u=a,g(w,v,function(){u=k,a()})},cancel:function(){s&&(l(s,function(a){(a||k)(!0)}),r(!0)),v&&(l(v,function(a){(a||k)(!0)}),u(!0))}}}}}function H(a,c,d,e,f,g,h,i){function m(b){var e="$animate:"+b;x&&x[e]&&x[e].length>0&&w(function(){d.triggerHandler(e,{event:a,className:c})})}function n(){m("before")}function o(){m("after")}function p(){m("close"),i()}function q(){q.hasBeenRun||(q.hasBeenRun=!0,g())}function s(){if(!s.hasBeenRun){v&&v.applyStyles(),s.hasBeenRun=!0,h&&h.tempClasses&&l(h.tempClasses,function(a){j.removeClass(d,a)});var b=d.data(r);b&&(v&&v.isClassBased?J(d,c):(w(function(){var b=d.data(r)||{};H==b.index&&J(d,c,a)}),d.data(r,b))),p()}}var u=k,v=G(d,a,c,h);if(!v)return q(),n(),o(),s(),u;a=v.event,c=v.className;var x=b.element._data(v.node);
if(x=x&&x.events,e||(e=f?f.parent():d.parent()),K(d,e))return q(),n(),o(),s(),u;var y=d.data(r)||{},z=y.active||{},A=y.totalActive||0,B=y.last,C=!1;if(A>0){var D=[];if(v.isClassBased){if("setClass"==B.event)D.push(B),J(d,c);else if(z[c]){var E=z[c];E.event==a?C=!0:(D.push(E),J(d,c))}}else if("leave"==a&&z["ng-leave"])C=!0;else{for(var F in z)D.push(z[F]);y={},J(d,!0)}D.length>0&&l(D,function(a){a.cancel()})}if(!v.isClassBased||v.isSetClassOperation||"animate"==a||C||(C="addClass"==a==d.hasClass(c)),C)return q(),n(),o(),p(),u;z=y.active||{},A=y.totalActive||0,"leave"==a&&d.one("$destroy",function(a){var c=b.element(this),d=c.data(r);if(d){var e=d.active["ng-leave"];e&&(e.cancel(),J(c,"ng-leave"))}}),j.addClass(d,t),h&&h.tempClasses&&l(h.tempClasses,function(a){j.addClass(d,a)});var H=M++;return A++,z[c]=v,d.data(r,{last:v,active:z,index:H,totalActive:A}),n(),v.before(function(b){var e=d.data(r);b=b||!e||!e.active[c]||v.isClassBased&&e.active[c].event!=a,q(),b===!0?s():(o(),v.after(s))}),v.cancel}function I(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(t):c.querySelectorAll("."+t);l(d,function(a){a=b.element(a);var c=a.data(r);c&&c.active&&l(c.active,function(a){a.cancel()})})}}function J(a,b){if(i(a,v))u.disabled||(u.running=!1,u.structural=!1);else if(b){var c=a.data(r)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),!d&&c.totalActive||(j.removeClass(a,t),a.removeData(r))}}function K(a,c){if(u.disabled)return!0;if(i(a,v))return u.running;var d,e,f;do{if(0===c.length)break;var g=i(c,v),h=g?u:c.data(r)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(s);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}j=A,v.data(r,u);var L=x.$watch(function(){return z.totalPendingRequests},function(a,b){0===a&&(L(),x.$$postDigest(function(){x.$$postDigest(function(){u.running=!1})}))}),M=0,N=e.classNameFilter(),O=N?function(a){return N.test(a)}:function(){return!0};return{animate:function(a,b,c,d,e){return d=d||"ng-inline-animate",e=D(e)||{},e.from=c?b:null,e.to=c?c:b,C(function(b){return H("animate",d,h(a),null,null,k,e,b)})},enter:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),B(c,!0),a.enter(c,d,e),C(function(a){return H("enter","ng-enter",h(c),d,e,k,f,a)})},leave:function(c,d){return d=D(d),c=b.element(c),I(c),B(c,!0),C(function(b){return H("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),I(c),B(c,!0),a.move(c,d,e),C(function(a){return H("move","ng-move",h(c),d,e,k,f,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){g=D(g);var i="$$animateClasses";if(c=b.element(c),c=h(c),B(c))return a.$$setClassImmediately(c,d,e,g);var j,k=c.data(i),m=!!k;return k||(k={},k.classes={}),j=k.classes,d=n(d)?d:d.split(" "),l(d,function(a){a&&a.length&&(j[a]=!0)}),e=n(e)?e:e.split(" "),l(e,function(a){a&&a.length&&(j[a]=!1)}),m?(g&&k.options&&(k.options=b.extend(k.options||{},g)),k.promise):(c.data(i,k={classes:j,options:g}),k.promise=C(function(b){var d,e,g,h=f(c);if(h&&(d=c.data(i),c.removeData(i),g=c.parent(),e=h.parentNode),!e||e.$$NG_REMOVED||h.$$NG_REMOVED)return void b();var j=c.data(r)||{},k=E(c,d,j.active);return k?H("setClass",k,c,g,null,function(){k[0]&&a.$$addClassImmediately(c,k[0]),k[1]&&a.$$removeClassImmediately(c,k[1])},d.options,b):b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)J(b);else{var c=b.data(r)||{};c.disabled=!0,b.data(r,c)}break;case 1:u.disabled=!a;break;default:a=!u.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){J||(J=h(function(){W=[],J=null,U={}}))}function m(a,b){J&&J(),W.push(b),J=h(function(){l(W,function(a){a()}),W=[],J=null,U={}})}function p(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;e<=Y||(g.cancel(X),Y=e,X=g(function(){r(Z),Z=[]},c,!1))}function r(a){l(a,function(a){var b=a.data(Q);b&&l(b.closeAnimationFns,function(a){a()})})}function s(a,b){var c=b?U[b]:null;if(!c){var e=0,f=0,g=0,h=0;l(a,function(a){if(a.nodeType==q){var b=d.getComputedStyle(a)||{},c=b[E+K];e=Math.max(t(c),e);var i=b[E+M];f=Math.max(t(i),f);b[G+M];h=Math.max(t(b[G+M]),h);var j=t(b[G+K]);j>0&&(j*=parseInt(b[G+N],10)||1),g=Math.max(j,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(U[b]=c)}return c}function t(a){var b=0,c=o(a)?a.split(/\s*,\s*/):[];return l(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function u(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++V),c=V),c+"-"+f(a).getAttribute("class")}function v(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0,g=u(b),h=g+" "+c,i=U[h]?++U[h].total:0,k={};if(i>0){var l=c+"-stagger",m=g+" "+l,n=!U[m];n&&j.addClass(b,l),k=s(b,m),n&&j.removeClass(b,l)}j.addClass(b,c);var o=b.data(Q)||{},p=s(b,h),q=p.transitionDuration,r=p.animationDuration;if(e&&0===q&&0===r)return j.removeClass(b,c),!1;var t=d||e&&q>0,v=r>0&&k.animationDelay>0&&0===k.animationDuration,w=o.closeAnimationFns||[];b.data(Q,{stagger:k,cacheKey:h,running:o.running||0,itemIndex:i,blockTransition:t,closeAnimationFns:w});var z=f(b);return t&&(x(z,!0),d&&b.css(d)),v&&y(z,!0),!0}function w(a,b,c,d,e){function h(){b.off(M,i),j.removeClass(b,n),j.removeClass(b,o),K&&g.cancel(K),C(b,c);var a=f(b);for(var d in r)a.style.removeProperty(r[d])}function i(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-L,0)>=G&&e>=D&&d()}var k=f(b),m=b.data(Q);if(k.getAttribute("class").indexOf(c)==-1||!m)return void d();var n="",o="";l(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;n+=c+"-active",o+=c+"-pending"});var q="",r=[],t=m.itemIndex,u=m.stagger,v=0;if(t>0){var w=0;u.transitionDelay>0&&0===u.transitionDuration&&(w=u.transitionDelay*t);var z=0;u.animationDelay>0&&0===u.animationDuration&&(z=u.animationDelay*t,r.push(I+"animation-play-state")),v=Math.round(100*Math.max(w,z))/100}v||(j.addClass(b,n),m.blockTransition&&x(k,!1));var A=m.cacheKey+" "+n,B=s(b,A),D=Math.max(B.transitionDuration,B.animationDuration);if(0===D)return j.removeClass(b,n),C(b,c),void d();!v&&e&&Object.keys(e).length>0&&(B.transitionDuration||(b.css("transition",B.animationDuration+"s linear all"),r.push("transition")),b.css(e));var E=Math.max(B.transitionDelay,B.animationDelay),G=E*T;if(r.length>0){var J=k.getAttribute("style")||"";";"!==J.charAt(J.length-1)&&(J+=";"),k.setAttribute("style",J+" "+q)}var K,L=Date.now(),M=H+" "+F,N=(E+D)*S,O=(v+N)*T;return v>0&&(j.addClass(b,o),K=g(function(){K=null,B.transitionDuration>0&&x(k,!1),B.animationDuration>0&&y(k,!1),j.addClass(b,n),j.removeClass(b,o),e&&(0===B.transitionDuration&&b.css("transition",B.animationDuration+"s linear all"),b.css(e),r.push("transition"))},v*T,!1)),b.on(M,i),m.closeAnimationFns.push(function(){h(),d()}),m.running++,p(b,O),h}function x(a,b){a.style[E+L]=b?"none":""}function y(a,b){a.style[G+O]=b?"paused":""}function z(a,b,c,d){if(v(a,b,c,d))return function(a){a&&C(b,c)}}function A(a,b,c,d,e){return b.data(Q)?w(a,b,c,d,e):(C(b,c),void d())}function B(a,b,c,d,e){var f=z(a,b,c,e.from);if(!f)return i(),void d();var g=f;return m(b,function(){g=A(a,b,c,d,e.to)}),function(a){(g||k)(a)}}function C(a,b){j.removeClass(a,b);var c=a.data(Q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(Q))}function D(a,b){var c="";return a=n(a)?a:a.split(/\s+/),l(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="PlayState",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,B("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},B("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},B("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},B("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=D(c,"-remove")+" "+D(b,"-add"),g=z("setClass",a,f,e.from);return g?(m(a,d),g):(i(),void d())},beforeAddClass:function(a,b,c,d){d=d||{};var e=z("addClass",a,D(b,"-add"),d.from);return e?(m(a,c),e):(i(),void c())},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=z("removeClass",a,D(b,"-remove"),d.from);return e?(m(a,c),e):(i(),void c())},setClass:function(a,b,c,d,e){e=e||{},c=D(c,"-remove"),b=D(b,"-add");var f=c+" "+b;return A("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){return d=d||{},A("addClass",a,D(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},A("removeClass",a,D(b,"-remove"),c,d.to)}}}])}])}(window,window.angular)}.apply(a,arguments)})}(this),function(a){define("angular-sanitize",["angular"],function(){return function(){!function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return g(b,j(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=j(c,b.noop);return d.chars(a),c.join("")}function f(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),z[d])for(;t.last()&&A[t.last()];)e("",t.last());y[d]&&t.last()==d&&e("",d),g=v[d]||!!g,g||t.push(d);var i={};f.replace(n,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,t=[],u=a;for(t.last=function(){return t[t.length-1]};a;){if(j="",g=!0,t.last()&&C[t.last()]?(a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(q,"$1").replace(s,"$1"),c.chars&&c.chars(h(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1)):r.test(a)?(i=a.match(r),i&&(a=a.replace(i[0],""),g=!1)):p.test(a)?(i=a.match(m),i&&(a=a.substring(i[0].length),i[0].replace(m,e),g=!1)):o.test(a)&&(i=a.match(l),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(l,d)),g=!1):(j+="<",a=a.substring(1))),g&&(f=a.indexOf("<"),j+=f<0?a:a.substring(0,f),a=f<0?"":a.substring(f),c.chars&&c.chars(h(j)))),a==u)throw k("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function h(a){return a?(I.innerHTML=a.replace(/</g,"&lt;"),I.textContent):""}function i(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&C[a]&&(d=a),d||D[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),h="img"===a&&"src"===g||"background"===g;H[g]!==!0||E[g]===!0&&!c(d,h)||(e(" "),e(f),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||D[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var k=b.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,m=/^<\/\s*([\w:-]+)[^>]*>/,n=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,o=/^</,p=/^<\//,q=/<!--(.*?)-->/g,r=/<!DOCTYPE([^>]*?)>/i,s=/<!\[CDATA\[(.*?)]]>/g,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~| |!])/g,v=f("area,br,col,hr,img,wbr"),w=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=f("rp,rt"),y=b.extend({},x,w),z=b.extend({},w,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),A=b.extend({},x,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=f("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),C=f("script,style"),D=b.extend({},v,z,A,y,B),E=f("background,cite,href,longdesc,src,usemap,xlink:href"),F=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),G=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),H=b.extend({},E,G,F),I=document.createElement("pre");b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/i,d=/^mailto:/i;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}.apply(a,arguments)})}(this),function(a){define("angular-debounce",["angular"],function(){return function(){"use strict";angular.module("debounce",[]).service("debounce",["$timeout",function(a){return function(b,c,d,e){function f(){i=this,h=arguments;var f=function(){g=null,d||(j=b.apply(i,h))},k=d&&!g;return g&&a.cancel(g),g=a(f,c,e),k&&(j=b.apply(i,h)),j}var g,h,i,j;return f.cancel=function(){a.cancel(g),g=null},f}}]).directive("debounce",["debounce","$parse",function(a,b){return{require:"ngModel",priority:999,link:function(c,d,e,f){var g,h,i=b(e.debounce)(c),j=!!b(e.immediate)(c),k=f.$render.bind(f),l=a(function(a){h=!0,f.$$lastCommittedViewValue=g,f.$setViewValue(a),h=!1},parseInt(i,10),j);f.$render=function(){k(),l.cancel(),g=this.$viewValue},f.$parsers.unshift(function(a){return h?(g=a,a):(l(f.$viewValue),g)})}}}])}.apply(a,arguments)})}(this),define("bb/ui/typeahead/package",["angular","bb/ui/typeahead/typeahead","bb/ui/typeahead/hover-intent","bb/ui/typeahead/typeahead-highlight-filter","bb/ui/typeahead/typeahead-service","bb/ui/util/package","angular-animate","angular-sanitize","angular-debounce","bb/ui/services/cookies/package","bb/ui/services/uri-template/package"],function(a,b,c,d,e){"use strict";var f=a.module("bb.ui.typeahead",["ngAnimate","ngSanitize","debounce","bb.ui.services.cookies","bb.ui.services.uri-template","bb.ui.util"]);return f.service("typeaheadService",e),f.filter("typeaheadHilightResult",d),f.directive("bbSearchTypeahead",b),f.directive("bbHoverIntent",c),f}),define("bb/ui/user-menu/views",[],{init:function(a){"use strict";a.put("bb/ui/user-menu/links.ng.html",'<div class="Grid-row UserMenu-linkLists"><div class="Grid-unit UserMenu-linkList UserMenu-store-col" id=header__profile-menu__store><h4 class=UserMenu-list-heading>My Store Account</h4><ul class=bb-list--plain><li class=UserMenu-list-item ng-repeat="link in profileLinks.store" id=header__profile-menu__item__{{link.key}}><a ng-href={{link.href}} rel={{link.rel}} class=UserMenu-list-item-link>{{link.label | titlecase}}</a></li><li class=UserMenu-list-item id=header__profile-menu__item__signOut><span ng-click=userMenu.logout() data-bb-action=logout class="UserMenu-list-item-link bb-link">Sign Out</span></li></ul></div><div class="UserMenu-divider UserMenu-divider--doesFlip"></div><div ng-if=!userMenu.oldIE class="Grid-unit UserMenu-linkList Grid-unit--stretch" id=header__profile-menu__my><h4 class=UserMenu-list-heading><span class="Icon-bodyspace-logo gte-tablet--inline-block"></span> my bodyspace</h4><ul class="bb-list--plain UserMenu-list--my"><li class=UserMenu-list-item ng-repeat="link in profileLinks.my" id=header__profile-menu__item__{{link.key}}><a ng-href={{link.href}} rel={{link.rel}} class=UserMenu-list-item-link>{{link.label | titlecase}} </a><span ng-if="link.key == \'myBodyspace.notifications\' && userMenu.hasUnreadNotifs" class="UserMenu-unread-dot UserMenu-unread-dot--link"></span></li></ul></div></div>'),a.put("bb/ui/user-menu/logged-in-content.ng.html",'<div class=UserMenu-content><div class="Grid-row UserMenu-header-bar"><div class=Grid-unit><a ng-href=https://bodyspace.bodybuilding.com/{{currentUser.slug}} rel="{{currentUser.slug}}\'s profile"><img class="UserMenu-avatar bb-avatar" ng-src={{currentUser.profilePic.thumbUrl}} fallback-src alt=avatar></a></div><div class="Grid-unit Grid-unit--stretch UserMenu-profile-user-n-allAccessStatus"><h4 class=UserMenu-header-bar__username><a class=UserMenu-header-bar__usernameLink ng-href=https://bodyspace.bodybuilding.com/{{currentUser.slug}} rel="{{currentUser.slug}}\'s profile">Welcome Back, <span ng-if=realName>{{ realName }}! </span><span ng-if=!realName>{{ currentUser.slug }}!</span></a></h4><h5 class=UserMenu-header-bar__allAccessStatus><span bb-entitlements if-has-entitlement="All Access">All Access Member </span><span bb-entitlements if-missing-entitlement="All Access"><a href=https://www.bodybuilding.com/fun/all-access.html id=PROFILE_JOIN_ALL_ACCESS>Join All Access</a></span></h5></div></div><div bb-entitlements if-has-entitlement="All Access"><div class=UserMenu-divider></div><div class=Grid-row><div class="Grid-unit Grid-unit--stretch"><div class=UserMenu-workoutPlansPanelWrap><bb-workout-plans-panel></bb-workout-plans-panel></div></div></div></div><div class=UserMenu-divider></div><div class=Grid-row><div class="Grid-unit Grid-unit--stretch"><ng-include src="\'bb/ui/user-menu/links.ng.html\'"></ng-include></div></div></div>'),a.put("bb/ui/user-menu/logged-in-trigger.ng.html",'<div class=UserMenu-trigger-img-wrap><img class="UserMenu-trigger-img UserMenu-trigger-img--logged-in bb-circle-image" ng-src="{{ currentUser.profilePic.thumbUrl }}" fallback-src> <span class="UserMenu-unread-dot UserMenu-unread-dot--trigger" ng-if=userMenu.hasUnreadNotifs></span></div>'),a.put("bb/ui/user-menu/logged-out-trigger.ng.html",'<div class=UserMenu-trigger-img-wrap><div class="UserMenu-trigger-img UserMenu-trigger-img--logged-out Icon-profile UserMenu-trigger-icon-profile"></div></div>'),a.put("bb/ui/user-menu/user-menu.ng.html","<div class=UserMenu><div ng-dropover=bbUserMenu ng-dropover-options=\"{'position':'bottom-right','triggerEvent': 'click','horizontalOffset': 10}\" class=UserMenu-ngdropover><button class=\"UserMenu-trigger bb-btn--plain preserve-outline\"><ng-include ng-if=loggedIn src=\"'bb/ui/user-menu/logged-in-trigger.ng.html'\"></ng-include><ng-include ng-if=!loggedIn src=\"'bb/ui/user-menu/logged-out-trigger.ng.html'\"></ng-include></button><div ng-dropover-contents class=UserMenu-menu ng-class=\"{ 'UserMenu-menu--loggedIn': loggedIn,'UserMenu-menu--notLoggedIn': !loggedIn }\"><ng-include ng-if=loggedIn src=\"'bb/ui/user-menu/logged-in-content.ng.html'\"></ng-include><bb-login ng-if=!loggedIn reload=true></bb-login><button class=\"UserMenu-close bb-btn--plain\" ng-click=userMenu.close()><svg viewbox=\"0 0 40 40\"><path class=UserMenu-closeSVG d=\"M 10,10 L 30,30 M 30,10 L 10,30\"/></svg></button></div></div></div>")}}),define("bb/ui/user-menu/user-menu",[],function(){"use strict";function a(a,b,c,d,e,f,g){function h(f){function h(){d.isLoggedIn()&&(i(),j())}function i(){var c;b.currentUser.realName&&(c=b.currentUser.realName,c.length>30&&(c=a("limitTo")(c,30).concat("")),f.realName=c)}function j(){l.hasUnreadNotifs=d.hasUnreadNotifs()}function k(a){"OPENING"===a?"mobile"===b.device.breakpoint&&(document.body.style.overflow="hidden",document.body.style.position="fixed"):(document.body.style.overflow="",document.body.style.position="")}var l={};f.userMenu=l,l.logout=c.logout,d.get().finally(h),e.oldIE?(l.oldIE=!0,b.$on("ngDropover.opening",function(a,c){"bbUserMenu"!==c.id||d.isLoggedIn()||(g.assign("https://www.bodybuilding.com/profile/login"),b.$emit("ngDropover.close",c.id))})):(b.$on("ngDropover.opening",function(a,c){"bbUserMenu"===c.id&&(d.isLoggedIn()||b.$emit("facebook.needsSDKInjected"),k("OPENING"))}),b.$on("ngDropover.closing",function(a,b){"bbUserMenu"===b.id&&k("CLOSING")})),l.close=function(){b.$emit("ngDropover.close","bbUserMenu")}}var i;return i={restrict:"E",templateUrl:"bb/ui/user-menu/user-menu.ng.html",controller:["$scope",h]}}return["$filter","$rootScope","loginResource","currentUserService","uaService","deviceService","locationService",a]}),define("bb/ui/filters/filters-module",["angular","bb/ui/services/user/current-user"],function(a){"use strict";var b=a.module("bb.ui.filters",["bb.ui.services.user"]);return b}),define("bb/ui/filters/titlecase",["bb/ui/filters/filters-module"],function(a){"use strict";var b=function(){var a=["a","an","the","and","but","or","for","on","to","of","at","as","by","nor","in"];return function(b){return b&&"string"==typeof b?b.trim().split(" ").map(function(b,c){return 0!==c&&a.indexOf(b)!==-1?b:(b=b.trim(),b.substring(0,1).toUpperCase()+b.substring(1))}).join(" "):""}};return a.filter("titlecase",[b]),b}),define("lodash/internal/baseFind",[],function(){function a(a,b,c,d){var e;return c(a,function(a,c,f){if(b(a,c,f))return e=d?c:a,!1}),e}return a}),define("lodash/internal/baseFindIndex",[],function(){function a(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}return a}),define("lodash/internal/createFind",["./baseCallback","./baseFind","./baseFindIndex","../lang/isArray"],function(a,b,c,d){function e(e,g){return function(h,i,j){if(i=a(i,j,3),d(h)){var k=c(h,i,g);return k>-1?h[k]:f}return b(h,i,e)}}var f;return e}),define("lodash/collection/find",["../internal/baseEach","../internal/createFind"],function(a,b){var c=b(a);return c}),define("bb/ui/workout-plans-panel/workout-plans-panel",["lodash/object/get","lodash/collection/find","lodash/lang/isArray"],function(a,b,c){"use strict";function d(d,e,f){function g(e,g,h,i){var j={};e.workoutPlans=j,j.onTrainerPage=!!i,c(f.plans)&&(j.plans=f.plans),e.$watch(function(){return f.plans},function(a){c(a)&&(j.plans=a)}),f.getActivePlans().then(function(a){j.plans=a}).catch(function(){j.haveError=!0}).finally(function(){j.havePlans=!0}),j.menu={isReset:!1,isStopped:!1,isCallingAPI:!1,stopTracking:function(a){this.isCallingAPI=!0,f.stopPlan(a).then(function(){this.isCallingAPI=!1,this.isStopped=!0,this.resetMenu(a,"STOP")}.bind(this)).catch(this.errorHandler.bind(this))},resetPlan:function(a){this.isCallingAPI=!0,f.resetPlan(a).then(function(){this.isCallingAPI=!1,this.isReset=!0,this.resetMenu(a,"RESET")}.bind(this)).catch(this.errorHandler.bind(j.menu))},resetMenu:function(a,b){var c="bbWorkoutPlansPanel.";d.$emit("ngDropover.close","WorkoutPlansPanel-menu"),this.isReset=!1,this.isStopped=!1,"STOP"===b?c+="planStopped":"RESET"===b&&(c+="planReset"),d.$emit(c,{planId:a})},errorHandler:function(){this.isReset=!1,this.isStopped=!1,this.isCallingAPI=!1,window.alert("An error occurred while communicating with the server. Try again.")}},j.followBtn={startPlan:function(){this.isBusy=!0,this.apiError=!1,f.startPlan(e.planId).catch(function(){this.apiError=!0}.bind(this)).finally(function(){this.isBusy=!1}.bind(this))},isBusy:!1,apiError:!1},j.show={empty:function(){return j.havePlans&&!e.showFollowPlanBtn&&!j.plans.length},btn:function(){return j.havePlans&&e.showFollowPlanBtn&&!b(j.plans,function(a){return a.programId===e.planId})},panel:function(a){return j.havePlans&&!e.showFollowPlanBtn&&j.plans.length||e.showFollowPlanBtn&&a.programId==e.planId&&b(j.plans,function(a){return a.programId===e.planId})}},j.getSquareImage=function(c){var d,e;return d=a(c,"_embedded.bb-cms:trainer._links.bb-trainer:headerImage",[]),e=b(d,function(a){return"mainSquare"===a.name})||{},e.href?e.href.replace(/\.jpg$/,"-200x200.jpg"):null},j.getName=function(b){return a(b,"_embedded.bb-cms:trainer.shortName","")},j.getSlug=function(b){return a(b,"_embedded.bb-cms:trainer.slug","")},j.getNextWorkoutDayNoAndShortName=function(b){var c,d,e;return b.hasOwnProperty("nextWorkoutIndex")?(c="Day "+(b.nextWorkoutIndex+1),d=a(b,"_embedded.workouts["+b.nextWorkoutIndex+"]._embedded.bb-workoutday.shortName"),e=d?c+" - "+d:c):e="",e},j.getNextWorkoutLink=function(b){var c;if(c=a(b,"_embedded.bb-cms:trainer._links.web[0].href"))return c+"/day/"+(b.nextWorkoutIndex+1)},j.areWeAlreadyOnNextWorkoutLink=function(a){var b,c;if(c=this.getNextWorkoutLink(a))return b=document.createElement("a"),b.href=c,location.href.indexOf(b.pathname)!==-1}}var h={restrict:"AE",templateUrl:"bb/ui/workout-plans-panel/workout-plans-panel.ng.html",scope:{showContextMenu:"@",showFollowPlanBtn:"@",planId:"@"},require:"?^^bbTrainerApp",link:g};return h}return["$rootScope","$timeout","simpleTrackService",d]}),define("bb/ui/workout-plans-panel/views",[],{init:function(a){"use strict";a.put("bb/ui/workout-plans-panel/workout-plans-panel.ng.html",'<div class="WorkoutPlansPanel WorkoutPlansPanel--spinner Grid-row" ng-if=!workoutPlans.havePlans><div class=bb-spinner-btn__spinner--inverse></div></div><div class="WorkoutPlansPanel Grid-row" ng-if=workoutPlans.show.empty()><div class="WorkoutPlansPanel-img Grid-unit"><a href=https://www.bodybuilding.com/fun/all-access.html class=WorkoutPlansPanel-imgNoPlan>+</a></div><div class="WorkoutPlansPanel-progress Grid-unit Grid-unit--stretch"><div class=Grid-row><div class="Grid-unit Grid-unit--stretch"><h4 class="WorkoutPlansPanel-progressHeading UserMenu-list-heading">Your Progress</h4></div></div><div class=WorkoutPlansPanel-progressInfo><div class=WorkoutPlansPanel-progressBarTotal><div class=WorkoutPlansPanel-progressBarComplete style="width: 0"></div></div><div class="WorkoutPlansPanel-progressText Grid-row"><div class="WorkoutPlansPanel-progressDays Grid-unit Grid-unit--stretch">0 Days Tracked</div><div class="WorkoutPlansPanel-progressPercentage Grid-unit">0% Complete</div></div></div><div class="WorkoutPlansPanel-nextWorkout Grid-row"><div class="Grid-unit Grid-unit--stretch"><div class=WorkoutPlansPanel-nextWorkoutMissing><a href=https://www.bodybuilding.com/fun/all-access.html id=PROFILE_FIND_A_PLAN>Find a Plan</a></div></div></div></div></div><div class="WorkoutPlansPanel Grid-row" ng-if=workoutPlans.show.btn()><button class="bb-flat-btn bb-flat-btn--stretch bb-flat-btn--titlecase bb-flat-btn--size-md bb-spinner-btn" ng-click=workoutPlans.followBtn.startPlan() id=PLAN_FOLLOW_PLAN><span bb-visible=!workoutPlans.followBtn.isBusy class=FacebookButton__text>Follow Workout Plan </span><span bb-visible=workoutPlans.followBtn.isBusy class=bb-spinner-btn__spinner>Following&hellip;</span></button><p class="WorkoutPlansPanel-followError bb-form-msg--error" ng-if=workoutPlans.followBtn.apiError>An error occurred while attempting to follow this plan. Try again.</p></div><div class="WorkoutPlansPanel Grid-row" ng-if=workoutPlans.show.panel(plan) ng-repeat="plan in workoutPlans.plans"><div class="WorkoutPlansPanel-img Grid-unit"><img class=WorkoutPlansPanel-imgImg width=80 height=80 ng-src="{{ workoutPlans.getSquareImage(plan) }}"></div><div class="WorkoutPlansPanel-progress Grid-unit Grid-unit--stretch"><div class=Grid-row><div class="Grid-unit Grid-unit--stretch"><h4 class="WorkoutPlansPanel-progressHeading UserMenu-list-heading"><span ng-if=planId>Your Progress </span><span ng-if=!planId>{{ workoutPlans.getName(plan) }}</span></h4></div><div ng-if=showContextMenu class=Grid-unit><div class=WorkoutPlansPanel-menu ng-dropover=WorkoutPlansPanel-menu ng-dropover-options="{\'position\':\'bottom-right\',\'verticalOffset\': -17,\'staticOptions\': true}"><button class="bb-btn--plain WorkoutPlansPanel-menuTrigger" id=PLAN_PROGRESS_MODAL><svg width=27 height=7 viewBox="0 0 27 7" xmlns=http://www.w3.org/2000/svg><circle cx=3.5 cy=3.5 r=3.5 fill=#d8d8d8 /><circle cx=13.5 cy=3.5 r=3.5 fill=#d8d8d8 /><circle cx=23.5 cy=3.5 r=3.5 fill=#d8d8d8 /></svg></button><div ng-dropover-contents class=WorkoutPlansPanel-menuContents><div class=WorkoutPlansPanel-menuContentsExtraDivSoWeCanCenter><ul class=bb-list--plain ng-hide="workoutPlans.menu.isCallingAPI || workoutPlans.menu.isStopped || workoutPlans.menu.isReset"><li><button class="WorkoutPlansPanel-menuContentsLink bb-btn--plain bb-link" ng-click=workoutPlans.menu.stopTracking(plan.programId) id=PLAN_STOP_TRACKING_MODAL>Stop Tracking</button></li><li><button class="WorkoutPlansPanel-menuContentsLink bb-btn--plain bb-link" ng-click=workoutPlans.menu.resetPlan(plan.programId) id=PLAN_RESET_PLAN_MODAL>Reset Plan</button></li><li><a href=https://www.bodybuilding.com/fun/all-access.html class="WorkoutPlansPanel-menuContentsLink bb-btn--plain" id=PLAN_FIND_NEW_PLAN_MODAL>Find a New Plan</a></li></ul><div class=WorkoutPlansPanel-spinner ng-show=workoutPlans.menu.isCallingAPI></div><div ng-show="workoutPlans.menu.isStopped || workoutPlans.menu.isReset" class=WorkoutPlansPanel-menuContentsStatusIcon></div><div ng-show=workoutPlans.menu.isStopped class=WorkoutPlansPanel-menuContentsStatus>Tracking stopped</div><div ng-show=workoutPlans.menu.isReset class=WorkoutPlansPanel-menuContentsStatus>Plan progress reset</div></div></div></div></div></div><div class=WorkoutPlansPanel-progressInfo><div class=WorkoutPlansPanel-progressBarTotal><div class=WorkoutPlansPanel-progressBarComplete ng-style="{ \'width\': plan.percentComplete + \'%\' }"></div></div><div class="WorkoutPlansPanel-progressText Grid-row"><div class="WorkoutPlansPanel-progressDays Grid-unit Grid-unit--stretch"><span ng-if=plan.completedWorkouts>{{ plan.completedWorkouts }} / {{ plan.totalWorkouts }} Days Tracked </span><span ng-if=!plan.completedWorkouts>0 Days Tracked</span></div><div class="WorkoutPlansPanel-progressPercentage Grid-unit">{{ plan.percentComplete }}% Complete</div></div></div><div class="WorkoutPlansPanel-nextWorkout Grid-row"><div class="Grid-unit Grid-unit--stretch" ng-if="plan.nextWorkoutIndex > -1"><div class=WorkoutPlansPanel-nextWorkoutHeading>Next Workout</div><div class=WorkoutPlansPanel-nextWorkoutName>{{ workoutPlans.getNextWorkoutDayNoAndShortName(plan) }}</div></div><div class=Grid-unit ng-if="plan.nextWorkoutIndex > -1 && !workoutPlans.areWeAlreadyOnNextWorkoutLink(plan)"><a ng-if=!workoutPlans.onTrainerPage class="bb-flat-btn bb-flat-btn--quaternary" ng-href="{{ workoutPlans.getNextWorkoutLink(plan) }}" target=_self id=PROFILE_NEXT_WORKOUT>Go Now </a><a ng-if=workoutPlans.onTrainerPage class="bb-flat-btn bb-flat-btn--quaternary" ui-sref="trainer.byDayNumber({ trainer: workoutPlans.getSlug(plan), day: plan.nextWorkoutIndex + 1 })" id=PROFILE_NEXT_WORKOUT>Go Now</a></div></div></div></div>');
}}),define("bb/ui/services/simple-track/simple-track-service",["bb/util/module-info","bb/util/strings","lodash/object/has"],function(a,b,c){"use strict";function d(d,e,f,g){function h(a,c,g){var h=f.defer();return a&&c&&g&&d.isLoggedIn()?d.getUserId().then(function(d){return e.post(b.format("{0}track/{1}/{2}/{3}",i,d,a,c),{state:g,source:"WEB"})}).then(function(a){k.getActivePlans(),h.resolve(a.data)}).catch(h.reject):h.reject(),h.promise}var i,j,k={};return j=document.querySelector('link[rel="bb:simple-track-api-root"]'),i=j?j.href:"stage"===a.settings.env||"qa"===a.settings.env||"dev"===a.settings.env?"https://simpletrack-api.stage-cloud.bodybuilding.com/":"https://simpletrack-api.bodybuilding.com/",k.plans=[],k.completeWorkout=function(a,b){return h(a,b,"TRACKED")},k.skipWorkout=function(a,b){return h(a,b,"SKIPPED")},k.resetWorkout=function(a,b){return h(a,b,"NONE")},k.startPlan=function(a){var c=f.defer();return a&&d.isLoggedIn()?d.getUserId().then(function(c){return e.post(b.format("{0}track/{1}/{2}",i,c,a),{source:"WEB"})}).then(function(a){k.getActivePlans(),c.resolve(a.data)}).catch(c.reject):c.reject(),c.promise},k.stopPlan=function(a){var c=f.defer();return a&&d.isLoggedIn()?d.getUserId().then(function(c){return e.delete(b.format("{0}track/{1}/{2}",i,c,a),{data:{source:"WEB"},headers:{"Content-type":"application/json;charset=utf-8"}})}).then(function(a){k.getActivePlans(),c.resolve(a.data)}).catch(c.reject):c.reject(),c.promise},k.resetPlan=function(a){var b=f.defer();return k.stopPlan(a).then(function(){return k.startPlan(a)}).then(function(a){k.getActivePlans(),b.resolve(a.data)}).catch(b.reject),b.promise},k.getPlan=function(a){var c=f.defer();return a&&d.isLoggedIn()?d.getUserId().then(function(c){return e.get(b.format("{0}track/{1}/{2}",i,c,a))}).then(function(a){c.resolve(a.data)}).catch(c.reject):c.reject(),c.promise},k.getPlans=function(){var a=f.defer();return e.get(b.format("{0}programs",i)).then(function(b){c(b,"data._embedded.programs")?a.resolve(b.data._embedded.programs):a.reject()}).catch(a.reject),a.promise},k.getActivePlans=function(){var a=f.defer();return d.isLoggedIn()?d.getUserId().then(function(a){return e.get(b.format("{0}track/{1}",i,a))}).then(function(b){c(b,"data._embedded.currentPrograms")?(k.plans=b.data._embedded.currentPrograms,a.resolve(k.plans),g.$emit("simpleTrackService.plansUpdated",k.plans)):a.reject()}).catch(a.reject):a.reject(),a.promise},k}return["profileService","$http","$q","$rootScope",d]}),define("bb/ui/services/user/profile-service",["./user-module","bb/util/strings","bb/util/module-info","bb/util/storage","./login-resource"],function(a,b,c,d){"use strict";function e(a,e,f,g){function h(a){o.setItem(q,Date.now()+6e4),o.setItem(p,JSON.stringify(a))}function i(a,b){(2!==arguments.length||b.success)&&(o.removeItem(q),o.removeItem(p))}function j(){return JSON.parse(o.getItem(p))}function k(){var a=o.getItem(q),b=o.getItem(p);return b&&a&&Date.now()<new Date(Number(a))}var l,m,n={},o=d.local,p="bbcom-profile-service-cache",q="bbcom-profile-service-cache-ttl",r={isRunning:!1,requests:[]};return m=document.querySelector('link[rel="bb:profile-api-root"]'),l=m?m.href:"stage"===c.settings.env||"qa"===c.settings.env||"dev"===c.settings.env?"https://profile-api-stage.bodybuilding.com/":"https://profile-api.bodybuilding.com/",n.isLoggedIn=function(){return!!f.lgn},n.get=function(){var c=a.defer();return k()?c.resolve(j()):(r.requests.push(c),r.isRunning||(r.isRunning=!0,e.get(b.format("{0}profile/me",l)).then(function(a){r.requests.forEach(function(b){b.resolve(a.data)}),h(a.data)}).catch(function(a){r.requests.forEach(function(b){b.reject(a)})}).finally(function(){r.requests=[],r.isRunning=!1}))),c.promise},n.getUserId=function(){var b=a.defer();return n.get().then(function(a){var c=a.userId;b[c?"resolve":"reject"](c)}).catch(b.reject),b.promise},g.registerLogoutObserver(i),g.registerLoginObserver(i),n.isLoggedIn()||i(),n}return a.service("profileService",["$q","$http","$cookies","loginResource",e])}),define("bb/ui/services/simple-track/package",["angular","./simple-track-service","bb/ui/services/http-interceptor/package","bb/ui/services/user/profile-service"],function(a,b){"use strict";return a.module("bb.ui.services.simple-track",["bb.ui.services.http-interceptor","bb.ui.services.user"]).service("simpleTrackService",b)}),define("bb/ui/entitlements/entitlements",[],function(){function a(a){function b(b,c){b.isReady=!1,b.shouldShow=!1;var d=b.ifHasEntitlement||b.ifMissingEntitlement;a.hasEntitlement(d).then(function(a){b.isReady=!0,a&&b.ifHasEntitlement||!a&&b.ifMissingEntitlement?(b.shouldShow=!0,c.show()):c.remove()}).catch(c.remove)}var c={restrict:"AE",templateUrl:"bb/ui/entitlements/entitlements.ng.html",transclude:!0,scope:{ifHasEntitlement:"@",ifMissingEntitlement:"@"},link:b};return c}return["entitlementsService",a]}),define("bb/ui/entitlements/views",[],{init:function(a){"use strict";a.put("bb/ui/entitlements/entitlements.ng.html",'<div ng-if="isReady && shouldShow" ng-transclude ng-cloak></div>')}}),define("bb/ui/services/user/entitlements-service",["./user-module","bb/util/browser/get-meta","bb/util/module-info","./profile-service"],function(a,b,c){"use strict";function d(a,d,e){function f(a,b){h[a]?h[a].requests.push(b):h[a]={isRunning:!1,requests:[b]}}var g={},h=[];return g.hasEntitlement=function(g){var i,j,k,l=a.defer();return k=document.querySelector('link[rel="bb:subscription-api-root"]'),j=k?k.href+"entitlements/check":"stage"===c.settings.env||"qa"===c.settings.env||"dev"===c.settings.env?"https://subscription-api.stage-cloud.bodybuilding.com/entitlements/check":"https://subscription-api.bodybuilding.com/entitlements/check",b("bb:entitlements")?(i=b("bb:entitlements").split(",").map(function(a){return a.trim()}),i.indexOf(g)!==-1?l.resolve(!0):l.resolve(!1)):e.isLoggedIn()?(f(g,l),h[g].isRunning||(h[g].isRunning=!0,d.post(j,{checkAccessFor:g}).then(function(a){var b=document.createElement("meta");b.setAttribute("name","bb:entitlements"),a&&a.data&&a.data.active?(h[g].requests.forEach(function(a){a.resolve(!0)}),b.setAttribute("content","All Access")):(h[g].requests.forEach(function(a){a.resolve(!1)}),b.setAttribute("content","NONE")),document.head.appendChild(b)}).catch(function(a){h[g].requests.forEach(function(b){b.reject(a)})}).finally(function(){h[g].requests=[],h[g].isRunning=!1}))):l.resolve(!1),l.promise},g}return a.service("entitlementsService",["$q","$http","profileService",d])});define("bb/ui/entitlements/package",["angular","./entitlements","./views","bb/ui/services/user/entitlements-service"],function(a,b,c){return a.module("bb.ui.entitlements",["bb.ui.services.user"]).directive("bbEntitlements",b).run(["$templateCache",c.init])});!function(a){define("ngdropover",["angular"],function(){return function(){!function(a,b){"use strict";angular.module("ngDropover",[]).run(["$document","$rootScope",function(a,c){function d(a){for(var d=[];a&&a!==b;)a.attributes&&a.attributes.getNamedItem("ng-dropover")&&d.push(a.attributes.getNamedItem("ng-dropover").nodeValue),a.attributes&&a.attributes.getNamedItem("ng-dropover-trigger")&&d.push(c.$eval(a.attributes.getNamedItem("ng-dropover-trigger").nodeValue).targetId||""),a=a.parentNode;return d}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),c.scrolling=!1,a.on("touchmove",function(a){c.scrolling=!0}),a.on("touchend click",function(a){a=a.originalEvent&&a.originalEvent.target?a.originalEvent:a;var b=d(a.target);a.ngDropoverId&&b.push(a.ngDropoverId),3===a.which||c.scrolling||c.$emit("ngDropover.documentClick",{fromDocument:!0,ngDropoverId:b}),c.scrolling=!1})}]).constant("ngDropoverConfig",{horizontalOffset:0,verticalOffset:0,triggerEvent:"click",position:"bottom-left",closeOnClickOff:!0,staticOptions:"false",groupId:""}).constant("positions",["bottom","bottom-left","bottom-center","bottom-right","top","top-left","top-center","top-right","left","left-bottom","left-center","left-top","right","right-bottom","right-center","right-top"]).factory("triggerEventsMap",function(){var a={mouseover:"mouseleave",click:"click",focus:"blur",none:"none","touchend click":"touchend click"};return{getTriggers:function(b){return"hover"===b&&(b="mouseover"),"click"===b&&(b="touchend click"),a.hasOwnProperty(b)?{show:b,hide:a[b]}:null}}}).directive("ngDropover",["ngDropoverConfig","positions","$rootScope","$position","$document","$window","triggerEventsMap","$timeout",function(a,c,d,e,f,g,h,i){function j(a,b,c){console.log("? ngDropover Error | ID:"+a+" ?"),console.log(b),console.log(c),console.log("")}return{restrict:"A",replace:!0,scope:{target:"@ngDropover",ngDropoverOptions:"@ngDropoverOptions"},link:function(k,l,m){function n(){function e(a){a=a.originalEvent&&a.originalEvent.target?a.originalEvent:a;var c=a.target;if(a.ngDropoverId)return!0;for(;c&&c!==b&&c!==l[0];){if(c.attributes&&c.attributes.getNamedItem("ng-dropover-contents"))return!0;c=c.parentNode}return!1}k.config=angular.extend({},a,k.$eval(k.ngDropoverOptions)),k.positions=c,A={toggle:function(a){if(!e(a))return"touchend"===a.type&&(a.preventDefault(),d.scrolling)?void(d.scrolling=!1):void k.toggle(k.ngDropoverId)},open:function(a){e(a)||k.isOpen||k.open(k.ngDropoverId)},close:function(a){!e(a)&&k.isOpen&&k.close(k.ngDropoverId)},markEvent:function(a){a=a.originalEvent||a,a.ngDropoverId=k.ngDropoverId},mouseleave:function(a){t(a)||A.close({})}},o(),p(),k.config.staticOptions?(s(),k.config=angular.extend({},a,k.$eval(k.ngDropoverOptions)),"string"==typeof k.config.position&&k.positions.indexOf(k.config.position)!==-1||(j(k.ngDropoverId,angular.element(l),"Position must be a string and one of these values: "+k.positions),k.config.position="bottom-left"),q(),u(),v()):k.$watch("ngDropoverOptions",function(){s(),k.config=angular.extend({},a,k.$eval(k.ngDropoverOptions)),"string"==typeof k.config.position&&k.positions.indexOf(k.config.position)!==-1||(j(k.ngDropoverId,angular.element(l),"Position must be a string and one of these values: "+k.positions),k.config.position="bottom-left"),q(),u(),v()},!0),f.ready(function(){u()})}function o(){l.addClass(k.config.groupId+" ngdo"),l.attr("ng-dropover",k.ngDropoverId),z=w(),z.css({position:"absolute",display:"none"}).addClass("ngdo-contents "+k.config.groupId),B.event=x(),B.handler=function(a){"visibility"!==a.propertyName&&(z.css({display:"none"}),z[0].removeEventListener(B.event,B.handler))},z.on("touchend click",A.markEvent)}function p(){k.dropoverObj={options:k.config,id:k.ngDropoverId,children:l[0].querySelectorAll("[ng-dropover]"),element:l,dropoverContents:z}}function q(){var a=h.getTriggers(k.config.triggerEvent);a||j(k.ngDropoverId,angular.element(l),"triggerEvent must be a string: 'none', 'click', 'hover', 'focus'"),a&&"none"!==a.show&&(a.show===a.hide?l.on(a.show,A.toggle):(r(l[0])&&l.on("touchend",A.toggle),l.on(a.show,A.open),l.on(a.hide,A.close),"hover"===k.config.triggerEvent&&z.on("mouseleave",A.mouseleave)))}function r(a){return!(!a.attributes||!a.attributes.getNamedItem("ng-click")&&!a.attributes.getNamedItem("href"))}function s(){var a=h.getTriggers(k.config.triggerEvent);a&&"none"!==a.show&&(a.show===a.hide?l.off(a.show,A.toggle):(r(l[0])&&l.off("touchend",A.toggle),l.off(a.show,A.open),l.off(a.hide,A.close),"hover"===k.config.triggerEvent&&z.off("mouseleave",A.mouseleave)))}function t(a){a=a.originalEvent&&a.originalEvent.target?a.originalEvent:a;for(var c=a.target;c&&c!==b;){if(c===l[0])return!0;c=c.parentNode}return!1}function u(){var a,b,c,d;a=parseInt(k.config.horizontalOffset,10)||0,b=parseInt(k.config.verticalOffset,10)||0,d=e.getStyle(z[0],"display"),z.css({visibility:"hidden",display:"inline-block"}),c=e.positionElements(l,z,k.config.position,!1),z.css({left:c.left+a+"px",top:c.top+b+"px",display:d,visibility:""})}function v(){for(var a=l[0].className.split(" "),b=0,c=a.length;b<c;b++){var d=a[b].substring(5,a[b].length);k.positions.indexOf(d)>0&&l.removeClass(a[b])}l.addClass("ngdo-"+k.config.position)}function w(){var a;return l[0].querySelector("[ng-dropover-contents]")?a=angular.element(l[0].querySelector("[ng-dropover-contents]")):(a=angular.element("<div class='ngdo-empty'>Oops, you forgot to specify what goes in the dropdown</div>"),l.append(a),a)}function x(){var a,b={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",webkitTransition:"webkitTransitionEnd"},c={transition:"transitionDuration",OTransition:"oTransitionDuration",MozTransition:"MozTransitionDuration",webkitTransition:"WebkitTransitionDuration"};for(a in b)if(void 0!==z[0].style[a]&&parseFloat(e.getStyle(z[0],c[a]),10)>0)return B.duration=Math.floor(1e3*parseFloat(e.getStyle(z[0],c[a]),10)),b[a]}function y(){B.event?i(function(){k.isOpen||z[0].addEventListener(B.event,B.handler)},B.duration/2):z.css({display:"none"}),l.removeClass("ngdo-open"),k.isOpen=!1,d.$broadcast("ngDropover.closing",k.dropoverObj),angular.element(g).unbind("resize",u)}var z,A,B={duration:0};n(),k.open=function(a){B.event&&z[0].removeEventListener(B.event,B.handler),a!==k.ngDropoverId||k.isOpen||(u(),d.$broadcast("ngDropover.opening",k.dropoverObj),z.css({display:"inline-block"}),l.addClass("ngdo-open"),angular.element(g).bind("resize",u),k.isOpen=!0)},k.close=function(a){a===k.ngDropoverId&&k.isOpen&&y()},k.toggle=function(a){k.isOpen?k.close(a):k.open(a)},k.closeAll=function(a){k.isOpen&&a!==k.ngDropoverId&&y()},k.$on("$destroy",function(){s(),angular.element(g).unbind("resize",u),z.off("touchend click",A.markEvent)})},controller:["$scope","$element","$attrs",function(a,b,c){a.isOpen=!1,a.ngDropoverId=a.target||""+a.$id,a.openListener=d.$on("ngDropover.open",function(b,c){a.open(c)}),a.closeListener=d.$on("ngDropover.close",function(b,c){a.close(c)}),a.toggleListener=d.$on("ngDropover.toggle",function(b,c){a.isOpen?a.close(c):a.open(c)}),a.closeAllListener=d.$on("ngDropover.closeAll",function(b,c){a.closeAll(c)}),a.documentClickListener=d.$on("ngDropover.documentClick",function(b,c){c.ngDropoverId&&!(c.ngDropoverId.indexOf(a.ngDropoverId)<0)||!a.config.closeOnClickOff&&c.fromDocument||a.closeAll()}),a.$on("$destroy",function(){a.openListener(),a.openListener=null,a.closeListener(),a.closeListener=null,a.toggleListener(),a.toggleListener=null,a.closeAllListener(),a.closeAllListener=null,a.documentClickListener(),a.documentClickListener=null})}]}}]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a,null).getPropertyValue(c):a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{getStyle:c,position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!==a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,e){var f,g,h,i,j=c.split("-"),k=j[0],l=j[1]||"center";f=e?this.offset(a):this.position(a),d(a[0])||(f.top=-a[0].clientTop,f.left=-a[0].clientLeft),g=b.prop("offsetWidth"),h=b.prop("offsetHeight");var m={center:function(){return f.left+f.width/2-g/2},left:function(){return f.left},right:function(){return"right"===l?f.left+(f.width-g):f.left+f.width}},n={center:function(){return f.top+f.height/2-h/2},top:function(){return f.top},bottom:function(){return f.top+f.height}};switch(k){case"right":i={top:n[l](),left:m[k]()};break;case"left":i={top:n[l](),left:f.left-g};break;case"bottom":i={top:n[k](),left:m[l]()};break;default:i={top:f.top-h,left:m[l]()}}return i}}}]).directive("ngDropoverTrigger",["$rootScope","$document","triggerEventsMap",function(a,b,c){return{restrict:"AE",scope:{triggerOptions:"@ngDropoverTrigger"},link:function(b,d,e){var f=b.$eval(b.triggerOptions),g=c.getTriggers(f.triggerEvent||"click");d.addClass("ngdo-trigger");var h={action:function(a){b.$emit("ngDropover."+f.action,f.targetId)},toggle:function(c){return"touchend"===c.type&&(c.preventDefault(),a.scrolling)?void(a.scrolling=!1):void b.$emit("ngDropover.toggle",f.targetId)},show:function(a){b.$emit("ngDropover.open",f.targetId)},hide:function(a){b.$emit("ngDropover.close",f.targetId)},touch:function(c){return c.preventDefault(),a.scrolling?void(a.scrolling=!1):void b.$emit("ngDropover."+(f.action||"toggle"),f.targetId)}};"open"===f.action||"close"===f.action?d.on(g.show,h.action):g.show===g.hide?d.on(g.show,h.toggle):(d.on(g.show,h.show),d.on(g.hide,h.hide)),"hover"===f.triggerEvent&&d.on("touchend",h.touch),b.$on("destroy",function(){"open"===f.action||"close"===f.action?d.off(g.show,h.action):g.show===g.hide?d.off(g.show,h.toggle):(d.off(g.show,h.show),d.off(g.hide,h.hide)),"hover"===f.triggerEvent&&d.off("touchend",h.touch)})}}}])}(window,document)}.apply(a,arguments)})}(this),define("bb/ui/workout-plans-panel/package",["angular","./workout-plans-panel","./views","bb/ui/services/simple-track/package","bb/ui/entitlements/package","ngdropover"],function(a,b,c){"use strict";return a.module("bb.ui.workout-plans-panel",["bb.ui.services.simple-track","bb.ui.entitlements","ngDropover"]).directive("bbWorkoutPlansPanel",b).run(["$templateCache",c.init])}),define("bb/ui/user-menu/package",["angular","bb/ui/user-menu/views","bb/ui/user-menu/user-menu","bb/ui/login/package","bb/ui/core/avatar","bb/ui/filters/titlecase","bb/ui/services/user/current-user","bb/ui/services/utils/location-service","bb/ui/util/package","bb/ui/workout-plans-panel/package","bb/ui/entitlements/package","ngdropover","angular-sanitize"],function(a,b,c){"use strict";var d;d=a.module("bb.ui.userMenu",["bb.ui.core","bb.ui.filters","bb.ui.services.user","bb.ui.services.utils","bb.ui.workout-plans-panel","bb.ui.entitlements","bb.ui.login","bb.ui.util","ngDropover","ngSanitize"]),d.run(["$templateCache",b.init]),d.directive("bbUserMenu",c)}),define("jquery",[],function(){"use strict";return window.jQuery}),define("bb/ui/util/jquery-shim",function(){}),define("bb/ui/wrapper-app",["angular","bb/util/module-info","@bbcom/bb-analytics","bb/ui/gdpr/package","bb/ui/util/package","bb/ui/core/package","bb/ui/ad/package","bb/ui/cart/package","bb/ui/country-select/package","bb/ui/geoip/package","bb/ui/login/package","bb/ui/navigation/package","bb/ui/newsletter/package","bb/ui/signup/package","bb/ui/typeahead/package","bb/ui/user-menu/package","bb/ui/flash-message/package","bb/ui/services/user/current-user","bb/ui/util/jquery-shim"],function(a,b,c,d){"use strict";function e(e){var f={},g=a.module("bb.ui.wrapper",["bb.ui.core","bb.ui.services.user","bb.ui.userMenu","bb.ui.util","bb.ui.cart","bb.ui.ad","bb.ui.country-select","bb.ui.geoip","bb.ui.login","bb.ui.navigation","bb.ui.newsletter","bb.ui.signup","bb.ui.typeahead","bb.ui.flash-message",d.name]);return g.config(["$compileProvider","$locationProvider","$anchorScrollProvider","$provide","$sceDelegateProvider",function(a,c,d,e,f){function g(){void 0!==b.settings.html5Mode&&null!==b.settings.html5Mode||(b.settings.html5Mode=!0),"string"==typeof b.settings.html5Mode&&(b.settings.html5Mode="true"===b.settings.html5Mode),c.html5Mode(b.settings.html5Mode)}function h(){e.decorator("$browser",["$delegate",function(a){return a.onUrlChange=function(){},a.url=function(){return""},a}])}a.debugInfoEnabled(!1),f.resourceUrlWhitelist(["self","http://*.bodybuilding.com/**","https://*.bodybuilding.com/**"]),"string"==typeof b.settings.disableAngularRouting&&(b.settings.disableAngularRouting="true"===b.settings.disableAngularRouting),b.settings.disableAngularRouting&&h(),d.disableAutoScrolling(),b.settings.disableAngularRouting?h():g()}]),g.run(["currentUserService","$browser","$location","$rootScope","$window","$log","kruxService","flashMessageService",function(a,c,d,e,g,h,i,j){function k(){var a;a=e.$on("$locationChangeStart",function(b,c,d){function e(){function a(){return c.match(e)}function b(){var a=!0;return f&&(a=c.match(f)),a}function d(){var a,b,d,e=!0;return h&&(a=c.indexOf("?"),a===-1?e=!1:(b=c.indexOf("#"),d=b>-1?c.substring(a+1,b):c.substring(a+1),d!==h.substring(1)&&(e=!1))),e}var e,f,h;return e=g.location.host,f=g.location.pathname,h=g.location.search,a()&&b()&&d()}g.location.href===d&&d!==c?(e()||(a(),b.preventDefault()),g.location.href=c):"/"===g.location.pathname&&g.location.href===c&&c!==d&&(a(),b.preventDefault(),g.location.href=c)})}f.currentUserService=a,h.debug("Single page app mode is %c%s","font-weight:bold",b.settings.singlePageApp),f.currentUserService.get(),b.settings.disableAngularRouting||"false"!==b.settings.singlePageApp&&b.settings.singlePageApp||k(),i.init(),j.init()}]),f.element=a.element(e.elementSelector||"body"),f.init=function(){a.bootstrap(f.element,["bb.ui.wrapper"]);try{window.BB.Action.Binder.wire(a.element(".bbBinder"))}catch(a){window.console.warn("Could not start bbBinder",a)}c.pushTiming("bb.wrapper","bootstrapped","Wrapper bootstrapped")},f}return e})}();